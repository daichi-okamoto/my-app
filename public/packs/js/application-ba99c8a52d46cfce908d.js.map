{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/@hotwired/stimulus/dist/stimulus.js","webpack:///./node_modules/sortablejs/modular/sortable.esm.js","webpack:///./node_modules/@hotwired/stimulus-webpack-helpers/dist/stimulus-webpack-helpers.js","webpack:///./app/javascript/controllers/sortable_controller.js","webpack:///./app/javascript/controllers sync \\.js$","webpack:///./app/javascript/packs/application.js","webpack:///./app/javascript/controllers/application.js","webpack:///./app/javascript/controllers/hello_controller.js","webpack:///./app/javascript/controllers/index.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","_slicedToArray","e","Array","isArray","_arrayWithHoles","iterator","u","a","f","next","done","push","length","return","_iterableToArrayLimit","_arrayLikeToArray","toString","slice","constructor","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","EventListener","eventTarget","eventName","eventOptions","this","unorderedBindings","Set","connect","addEventListener","disconnect","removeEventListener","bindingConnected","binding","add","bindingDisconnected","delete","handleEvent","event","extendedEvent","stopImmediatePropagation","assign","immediatePropagationStopped","extendEvent","bindings","hasBindings","size","sort","left","right","leftIndex","index","rightIndex","Dispatcher","application","eventListenerMaps","Map","started","start","eventListeners","forEach","eventListener","stop","values","reduce","listeners","map","concat","fetchEventListenerForBinding","clearEventListeners","arguments","undefined","clearEventListenersForBinding","handleError","error","message","detail","removeMappedEventListenerFor","eventListenerMap","fetchEventListenerMapForEventTarget","cacheKey","fetchEventListener","createEventListener","set","parts","keys","join","defaultActionDescriptorFilters","_ref","stopPropagation","prevent","_ref2","preventDefault","self","_ref3","element","target","descriptorPattern","parseEventTarget","eventTargetName","window","document","camelize","replace","_","char","toUpperCase","namespaceCamelize","capitalize","charAt","dasherize","toLowerCase","isSomething","hasProperty","allModifiers","Action","descriptor","schema","tagName","defaultEventNames","getDefaultEventNameForElement","identifier","methodName","keyFilter","forToken","token","descriptorString","matches","trim","match","includes","split","options","parseActionDescriptorString","content","eventFilter","shouldIgnoreKeyboardEvent","filters","keyFilterDissatisfied","standardFilter","filter","keyMappings","shouldIgnoreMouseEvent","params","pattern","RegExp","_ref4","attributes","typecast","_allModifiers$map2","modifier","meta","ctrl","alt","shift","metaKey","ctrlKey","altKey","shiftKey","button","form","details","input","getAttribute","select","textarea","Error","JSON","parse","o_O","Binding","context","action","actionEvent","prepareActionEvent","willBeInvokedByEvent","applyEventModifiers","invokeWithEvent","method","controller","actionDescriptorFilters","passes","_ref5","entries","_ref6","currentTarget","logDebugActivity","KeyboardEvent","MouseEvent","Element","contains","scope","containsElement","ElementObserver","delegate","mutationObserverInit","childList","subtree","elements","mutationObserver","MutationObserver","mutations","processMutations","observe","refresh","pause","callback","takeRecords","matchElementsInTree","has","removeElement","addElement","mutation","processMutation","type","processAttributeChange","attributeName","processRemovedNodes","removedNodes","processAddedNodes","addedNodes","elementAttributeChanged","matchElement","nodes","node","elementFromNode","processTree","elementIsActive","tree","processor","nodeType","Node","ELEMENT_NODE","isConnected","elementMatched","elementUnmatched","AttributeObserver","elementObserver","selector","hasAttribute","querySelectorAll","elementMatchedAttribute","elementUnmatchedAttribute","elementAttributeValueChanged","fetch","del","prune","Multimap","valuesByKey","hasKey","hasValue","some","getValuesForKey","getKeysForValue","_ref7","_ref8","_ref9","_ref10","SelectorObserver","_selector","matchesByElement","selectorMatchElement","selectorMatched","selectors","selectorUnmatched","_attributeName","matchedBefore","StringMapObserver","stringMap","attributeOldValue","knownAttributeNames","refreshAttribute","oldValue","getStringMapKeyForAttribute","stringMapKeyAdded","stringMapValueChanged","stringMapKeyRemoved","currentAttributeNames","recordedAttributeNames","attribute","TokenListObserver","attributeObserver","tokensByElement","tokensMatched","readTokensForElement","_this$refreshTokensFo2","refreshTokensForElement","unmatchedTokens","matchedTokens","tokensUnmatched","tokens","tokenMatched","tokenUnmatched","previousTokens","currentTokens","firstDifferingIndex","Math","max","zip","findIndex","_ref11","_ref12","previousToken","currentToken","tokenString","parseTokenString","ValueListObserver","tokenListObserver","parseResultsByToken","WeakMap","valuesByTokenByElement","fetchParseResultForToken","fetchValuesByTokenForElement","elementMatchedValue","elementUnmatchedValue","parseResult","parseToken","valuesByToken","parseValueForToken","BindingObserver","bindingsByAction","valueListObserver","actionAttribute","disconnectAllActions","connectAction","disconnectAction","clear","ValueObserver","receiver","stringMapObserver","valueDescriptorMap","invokeChangedCallbacksForDefaultValues","invokeChangedCallback","writer","defaultValue","valueDescriptorNameMap","_ref13","valueDescriptors","data","rawValue","rawOldValue","changedMethodName","changedMethod","reader","descriptors","hasMethodName","TargetObserver","targetsByName","disconnectAllTargets","_ref14","connectTarget","_ref15","disconnectTarget","_a","targetConnected","targetDisconnected","readInheritableStaticArrayValues","propertyName","ancestors","getAncestorsForConstructor","definition","getOwnStaticArrayValues","readInheritableStaticObjectPairs","pairs","getOwnStaticObjectPairs","getPrototypeOf","reverse","OutletObserver","outletsByName","outletElementsByName","selectorObserverMap","attributeObserverMap","outletDefinitions","outletName","setupSelectorObserverForOutlet","setupAttributeObserverForOutlet","dependentContexts","observer","disconnectAllOutlets","stopSelectorObservers","stopAttributeObservers","_ref16","outlet","getOutlet","connectOutlet","_ref17","getOutletFromMap","disconnectOutlet","_ref18","hasOutlet","hasOutletController","controllerAttribute","_element","getOutletNameFromOutletAttributeName","updateSelectorObserverForOutlet","outletConnected","outletDisconnected","selectorObserver","body","attributeNameForOutletName","outlets","getSelectorForOutletName","outletAttributeForScope","find","outletDependencies","dependencies","router","controllerConstructor","dependentControllerIdentifiers","identifiers","contexts","getControllerForElementAndIdentifier","Context","_this","functionName","bindingObserver","dispatcher","valueObserver","targetObserver","outletObserver","initialize","parentElement","invokeControllerMethod","_len","args","_key2","bless","properties","shadowConstructor","extend","shadowProperties","getOwnKeys","shadowingDescriptor","getOwnPropertyDescriptor","getShadowedDescriptor","getShadowProperties","defineProperties","shadow","blessings","blessedProperties","blessing","getBlessedProperties","getOwnPropertySymbols","getOwnPropertyNames","extendWithReflect","extended","Reflect","construct","setPrototypeOf","b","testReflectExtension","Module","blessDefinition","contextsByScope","connectedContexts","connectContextForScope","fetchContextForScope","disconnectContextForScope","ClassMap","getDataKey","getAll","getAttributeName","getAttributeNameForKey","DataMap","setAttribute","removeAttribute","Guide","logger","warnedKeysByObject","warn","warnedKeys","attributeValueContainsToken","TargetSet","targetName","_len2","targetNames","_key3","findTarget","findLegacyTarget","findAll","_len3","_key4","targets","findAllTargets","findAllLegacyTargets","getSelectorForTargetName","findElement","findAllElements","targetAttributeForScope","getLegacySelectorForTargetName","deprecate","targetDescriptor","targetAttribute","revisedAttributeName","guide","OutletSet","controllerElement","_len4","outletNames","_key5","findOutlet","_len5","_key6","findAllOutlets","queryElements","matchesElement","Scope","classes","closest","controllerSelector","documentScope","isDocumentScope","documentElement","ScopeObserver","scopesByIdentifierByElement","scopeReferenceCounts","parseValueForElementAndIdentifier","scopesByIdentifier","fetchScopesByIdentifierForElement","createScopeForElementAndIdentifier","referenceCount","scopeConnected","scopeDisconnected","Router","scopeObserver","modulesByIdentifier","loadDefinition","unloadIdentifier","connectModule","afterLoad","disconnectModule","getContextForElementAndIdentifier","proposeToConnectScopeForElementAndIdentifier","console","defaultSchema","enter","tab","esc","space","up","down","home","end","page_up","page_down","objectFromEntries","array","memo","_ref19","_ref20","k","v","Application","_this2","debug","logFormattedMessage","Promise","resolve","readyState","register","load","registerActionOption","head","_len6","rest","_key7","shouldLoad","unload","_len7","_key8","controllers","onerror","groupCollapsed","log","groupEnd","getOutletController","getControllerAndEnsureConnectedScope","outletController","parseValueDefinitionPair","_ref21","_ref22","payload","typeDefinition","typeObject","typeFromObject","hasType","hasDefault","default","fullObject","onlyType","onlyDefault","parseValueTypeConstant","typeFromDefaultValue","parseValueTypeDefault","parseValueTypeObject","typeFromConstant","propertyPath","parseValueTypeDefinition","constant","defaultValuesByType","constantFromType","defaultValueForDefinition","hasCustomDefaultValue","readers","writers","valueDescriptorForTokenAndTypeDefinition","Boolean","Number","String","boolean","number","string","writeJSON","stringify","Controller","_identifier","_application","dispatch","_ref23","_ref23$target","_ref23$detail","_ref23$prefix","prefix","_ref23$bubbles","bubbles","_ref23$cancelable","cancelable","CustomEvent","dispatchEvent","classDefinition","targetDefinition","valueDefinitionPairs","propertyDescriptorMap","result","valueDefinitionPair","valueDescriptor","read","write","propertiesForValueDefinitionPair","outletDefinition","camelizedName","outletElement","propertiesForOutletDefinition","ownKeys","enumerableOnly","symbols","sym","apply","_objectSpread2","source","_defineProperty","getOwnPropertyDescriptors","_typeof","obj","configurable","writable","_extends","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","propertyIsEnumerable","userAgent","navigator","IE11OrLess","Edge","FireFox","Safari","IOS","ChromeForAndroid","captureMode","capture","passive","on","el","fn","off","substring","msMatchesSelector","webkitMatchesSelector","getParentOrHost","host","parentNode","ctx","includeCTX","_throttleTimeout","R_SPACE","toggleClass","state","classList","className","css","prop","val","style","defaultView","getComputedStyle","currentStyle","matrix","selfOnly","appliedTransforms","transform","matrixFn","DOMMatrix","WebKitCSSMatrix","CSSMatrix","MSCSSMatrix","list","getElementsByTagName","getWindowScrollingElement","scrollingElement","getRect","relativeToContainingBlock","relativeToNonStaticParent","undoScale","container","getBoundingClientRect","elRect","top","bottom","height","width","innerHeight","innerWidth","containerRect","parseInt","elMatrix","scaleX","scaleY","isScrolledPast","elSide","parentSide","parent","getParentAutoScrollElement","elSideVal","parentSideVal","getChild","childNum","includeDragEl","currentChild","children","display","Sortable","ghost","dragged","draggable","lastChild","last","lastElementChild","previousElementSibling","nodeName","clone","getRelativeScrollOffset","offsetLeft","offsetTop","winScroller","scrollLeft","scrollTop","includeSelf","elem","gotSelf","clientWidth","scrollWidth","clientHeight","scrollHeight","elemCSS","overflowX","overflowY","isRectEqual","rect1","rect2","round","throttle","ms","setTimeout","scrollBy","x","y","Polymer","$","jQuery","Zepto","dom","cloneNode","getChildContainingRectFromElement","ghostEl","rect","child","_rect$left","_rect$top","_rect$right","_rect$bottom","animated","childRect","min","Infinity","expando","Date","getTime","AnimationStateManager","animationCallbackId","animationStates","captureAnimationState","animation","fromRect","thisAnimationDuration","childMatrix","addAnimationState","removeAnimationState","splice","arr","indexOfObject","animateAll","clearTimeout","animating","animationTime","time","toRect","prevFromRect","prevToRect","animatingRect","targetMatrix","sqrt","pow","calculateRealTime","animate","animationResetTimer","currentRect","duration","translateX","translateY","animatingX","animatingY","forRepaintDummy","offsetWidth","repaint","easing","plugins","defaults","initializeByDefault","PluginManager","mount","plugin","option","pluginName","pluginEvent","sortable","evt","eventCanceled","cancel","eventNameGlobal","initializePlugins","initialized","modified","modifyOption","getEventProperties","eventProperties","modifiedValue","optionListeners","rootEl","targetEl","cloneEl","toEl","fromEl","oldIndex","newIndex","oldDraggableIndex","newDraggableIndex","originalEvent","putSortable","extraEventProperties","onName","substr","createEvent","initEvent","to","item","pullMode","lastPutMode","allEventProperties","_excluded","dragEl","parentEl","nextEl","lastDownEl","cloneHidden","dragStarted","moved","activeSortable","active","hideGhostForTarget","_hideGhostForTarget","unhideGhostForTarget","_unhideGhostForTarget","cloneNowHidden","cloneNowShown","dispatchSortableEvent","_dispatchEvent","info","activeGroup","tapEvt","touchEvt","lastDx","lastDy","tapDistanceLeft","tapDistanceTop","lastTarget","lastDirection","targetMoveDistance","ghostRelativeParent","awaitingDragStarted","ignoreNextClick","sortables","pastFirstInvertThresh","isCircumstantialInvert","ghostRelativeParentInitialScroll","_silent","savedInputChecked","documentExists","PositionGhostAbsolutely","CSSFloatProperty","supportDraggable","createElement","supportCssPointerEvents","cssText","pointerEvents","_detectDirection","elCSS","elWidth","paddingLeft","paddingRight","borderLeftWidth","borderRightWidth","child1","child2","firstChildCSS","secondChildCSS","firstChildWidth","marginLeft","marginRight","secondChildWidth","flexDirection","gridTemplateColumns","touchingSideChild2","_prepareGroup","toFn","pull","sameGroup","group","otherGroup","originalGroup","checkPull","checkPut","put","revertClone","nearestEmptyInsertDetectEvent","touches","nearest","clientX","clientY","threshold","emptyInsertThreshold","insideHorizontally","insideVertically","ret","_onDragOver","_checkOutsideTargetEl","_isOutsideThisEl","disabled","store","handle","swapThreshold","invertSwap","invertedSwapThreshold","removeCloneOnHide","direction","ghostClass","chosenClass","dragClass","ignore","preventOnFilter","setData","dataTransfer","textContent","dropBubble","dragoverBubble","dataIdAttr","delay","delayOnTouchOnly","touchStartThreshold","devicePixelRatio","forceFallback","fallbackClass","fallbackOnBody","fallbackTolerance","fallbackOffset","supportPointer","nativeDraggable","_onTapStart","_onMove","dragRect","targetRect","willInsertAfter","retVal","onMoveFn","onMove","draggedRect","related","relatedRect","_disableDraggable","_unsilent","_generateId","str","src","href","sum","charCodeAt","_nextTick","_cancelNextTick","id","_getDirection","touch","pointerType","originalTarget","shadowRoot","path","composedPath","root","inputs","idx","checked","_saveInputCheckedState","isContentEditable","criteria","_prepareDragStart","dragStartFn","ownerDocument","nextSibling","_lastX","_lastY","_onDrop","_disableDelayedDragEvents","_triggerDragStart","_disableDelayedDrag","_delayedDragTouchMoveHandler","_dragStartTimer","abs","floor","_onTouchMove","_onDragStart","selection","empty","getSelection","removeAllRanges","err","_dragStarted","fallback","_appendGhost","_nulling","_emulateDragOver","elementFromPoint","ghostMatrix","relativeScrollOffset","dx","dy","cssMatrix","appendChild","_hideClone","cloneId","insertBefore","_loopId","setInterval","effectAllowed","_dragStartId","revert","vertical","isOwner","canSort","fromSortable","completedFired","dragOverEvent","_ignoreWhileAnimating","completed","elLastChild","lastElRect","childContainingRect","spacer","_ghostIsLast","changed","firstElRect","_ghostIsFirst","firstChild","targetBeforeFirstSwap","sibling","differentLevel","differentRowCol","dragElS1Opp","dragElS2Opp","dragElOppLength","targetS1Opp","targetS2Opp","targetOppLength","_dragElInRowColumn","side1","scrolledPastTop","scrollBefore","isLastTarget","mouseOnAxis","targetLength","targetS1","targetS2","invert","_getInsertDirection","_getSwapDirection","dragIndex","nextElementSibling","after","moveVector","extra","axis","insertion","_showClone","_offMoveEvents","_offUpEvents","clearInterval","removeChild","save","dropEffect","_globalDragOver","toArray","order","useAnimation","items","destroy","utils","is","dst","nextTick","cancelNextTick","detectDirection","_key","version","scrollEl","scrollRootEl","lastAutoScrollX","lastAutoScrollY","touchEvt$1","pointerElemChangedInterval","autoScrolls","scrolling","clearAutoScrolls","autoScroll","pid","clearPointerElemChangedInterval","isFallback","scroll","scrollCustomFn","sens","scrollSensitivity","speed","scrollSpeed","scrollThisInstance","scrollFn","layersOut","currentParent","canScrollX","canScrollY","scrollPosX","scrollPosY","vx","vy","layer","scrollOffsetY","scrollOffsetX","bubbleScroll","drop","toSortable","changedTouches","onSpill","Revert","Remove","startIndex","dragStart","parentSortable","AutoScroll","forceAutoScrollFallback","_handleAutoScroll","_handleFallbackAutoScroll","dragOverCompleted","dragOverBubble","nulling","ogElemScroller","newElem","definitionsFromContext","logicalName","identifierForContextKey","definitionForModuleAndIdentifier","definitionForModuleWithContextAndKey","_default","_Controller","_classCallCheck","_callSuper","_inherits","onEnd","row","dataset","position","headers","querySelector","then","response","ok","webpackContext","req","webpackContextResolve","code","Stimulus","require","getElementById","SortableController"],"mappings":"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","file":"js/application-ba99c8a52d46cfce908d.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/packs/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n","function _slicedToArray(r, e) { return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(r, a) { if (r) { if (\"string\" == typeof r) return _arrayLikeToArray(r, a); var t = {}.toString.call(r).slice(8, -1); return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0; } }\nfunction _arrayLikeToArray(r, a) { (null == a || a > r.length) && (a = r.length); for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e]; return n; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(r) { if (Array.isArray(r)) return r; }\n/*\nStimulus 3.2.1\nCopyright  2023 Basecamp, LLC\n */\nclass EventListener {\n  constructor(eventTarget, eventName, eventOptions) {\n    this.eventTarget = eventTarget;\n    this.eventName = eventName;\n    this.eventOptions = eventOptions;\n    this.unorderedBindings = new Set();\n  }\n  connect() {\n    this.eventTarget.addEventListener(this.eventName, this, this.eventOptions);\n  }\n  disconnect() {\n    this.eventTarget.removeEventListener(this.eventName, this, this.eventOptions);\n  }\n  bindingConnected(binding) {\n    this.unorderedBindings.add(binding);\n  }\n  bindingDisconnected(binding) {\n    this.unorderedBindings.delete(binding);\n  }\n  handleEvent(event) {\n    const extendedEvent = extendEvent(event);\n    for (const binding of this.bindings) {\n      if (extendedEvent.immediatePropagationStopped) {\n        break;\n      } else {\n        binding.handleEvent(extendedEvent);\n      }\n    }\n  }\n  hasBindings() {\n    return this.unorderedBindings.size > 0;\n  }\n  get bindings() {\n    return Array.from(this.unorderedBindings).sort((left, right) => {\n      const leftIndex = left.index,\n        rightIndex = right.index;\n      return leftIndex < rightIndex ? -1 : leftIndex > rightIndex ? 1 : 0;\n    });\n  }\n}\nfunction extendEvent(event) {\n  if (\"immediatePropagationStopped\" in event) {\n    return event;\n  } else {\n    const stopImmediatePropagation = event.stopImmediatePropagation;\n    return Object.assign(event, {\n      immediatePropagationStopped: false,\n      stopImmediatePropagation() {\n        this.immediatePropagationStopped = true;\n        stopImmediatePropagation.call(this);\n      }\n    });\n  }\n}\nclass Dispatcher {\n  constructor(application) {\n    this.application = application;\n    this.eventListenerMaps = new Map();\n    this.started = false;\n  }\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this.eventListeners.forEach(eventListener => eventListener.connect());\n    }\n  }\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this.eventListeners.forEach(eventListener => eventListener.disconnect());\n    }\n  }\n  get eventListeners() {\n    return Array.from(this.eventListenerMaps.values()).reduce((listeners, map) => listeners.concat(Array.from(map.values())), []);\n  }\n  bindingConnected(binding) {\n    this.fetchEventListenerForBinding(binding).bindingConnected(binding);\n  }\n  bindingDisconnected(binding) {\n    let clearEventListeners = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    this.fetchEventListenerForBinding(binding).bindingDisconnected(binding);\n    if (clearEventListeners) this.clearEventListenersForBinding(binding);\n  }\n  handleError(error, message) {\n    let detail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.application.handleError(error, `Error ${message}`, detail);\n  }\n  clearEventListenersForBinding(binding) {\n    const eventListener = this.fetchEventListenerForBinding(binding);\n    if (!eventListener.hasBindings()) {\n      eventListener.disconnect();\n      this.removeMappedEventListenerFor(binding);\n    }\n  }\n  removeMappedEventListenerFor(binding) {\n    const eventTarget = binding.eventTarget,\n      eventName = binding.eventName,\n      eventOptions = binding.eventOptions;\n    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n    const cacheKey = this.cacheKey(eventName, eventOptions);\n    eventListenerMap.delete(cacheKey);\n    if (eventListenerMap.size == 0) this.eventListenerMaps.delete(eventTarget);\n  }\n  fetchEventListenerForBinding(binding) {\n    const eventTarget = binding.eventTarget,\n      eventName = binding.eventName,\n      eventOptions = binding.eventOptions;\n    return this.fetchEventListener(eventTarget, eventName, eventOptions);\n  }\n  fetchEventListener(eventTarget, eventName, eventOptions) {\n    const eventListenerMap = this.fetchEventListenerMapForEventTarget(eventTarget);\n    const cacheKey = this.cacheKey(eventName, eventOptions);\n    let eventListener = eventListenerMap.get(cacheKey);\n    if (!eventListener) {\n      eventListener = this.createEventListener(eventTarget, eventName, eventOptions);\n      eventListenerMap.set(cacheKey, eventListener);\n    }\n    return eventListener;\n  }\n  createEventListener(eventTarget, eventName, eventOptions) {\n    const eventListener = new EventListener(eventTarget, eventName, eventOptions);\n    if (this.started) {\n      eventListener.connect();\n    }\n    return eventListener;\n  }\n  fetchEventListenerMapForEventTarget(eventTarget) {\n    let eventListenerMap = this.eventListenerMaps.get(eventTarget);\n    if (!eventListenerMap) {\n      eventListenerMap = new Map();\n      this.eventListenerMaps.set(eventTarget, eventListenerMap);\n    }\n    return eventListenerMap;\n  }\n  cacheKey(eventName, eventOptions) {\n    const parts = [eventName];\n    Object.keys(eventOptions).sort().forEach(key => {\n      parts.push(`${eventOptions[key] ? \"\" : \"!\"}${key}`);\n    });\n    return parts.join(\":\");\n  }\n}\nconst defaultActionDescriptorFilters = {\n  stop(_ref) {\n    let event = _ref.event,\n      value = _ref.value;\n    if (value) event.stopPropagation();\n    return true;\n  },\n  prevent(_ref2) {\n    let event = _ref2.event,\n      value = _ref2.value;\n    if (value) event.preventDefault();\n    return true;\n  },\n  self(_ref3) {\n    let event = _ref3.event,\n      value = _ref3.value,\n      element = _ref3.element;\n    if (value) {\n      return element === event.target;\n    } else {\n      return true;\n    }\n  }\n};\nconst descriptorPattern = /^(?:(?:([^.]+?)\\+)?(.+?)(?:\\.(.+?))?(?:@(window|document))?->)?(.+?)(?:#([^:]+?))(?::(.+))?$/;\nfunction parseActionDescriptorString(descriptorString) {\n  const source = descriptorString.trim();\n  const matches = source.match(descriptorPattern) || [];\n  let eventName = matches[2];\n  let keyFilter = matches[3];\n  if (keyFilter && ![\"keydown\", \"keyup\", \"keypress\"].includes(eventName)) {\n    eventName += `.${keyFilter}`;\n    keyFilter = \"\";\n  }\n  return {\n    eventTarget: parseEventTarget(matches[4]),\n    eventName,\n    eventOptions: matches[7] ? parseEventOptions(matches[7]) : {},\n    identifier: matches[5],\n    methodName: matches[6],\n    keyFilter: matches[1] || keyFilter\n  };\n}\nfunction parseEventTarget(eventTargetName) {\n  if (eventTargetName == \"window\") {\n    return window;\n  } else if (eventTargetName == \"document\") {\n    return document;\n  }\n}\nfunction parseEventOptions(eventOptions) {\n  return eventOptions.split(\":\").reduce((options, token) => Object.assign(options, {\n    [token.replace(/^!/, \"\")]: !/^!/.test(token)\n  }), {});\n}\nfunction stringifyEventTarget(eventTarget) {\n  if (eventTarget == window) {\n    return \"window\";\n  } else if (eventTarget == document) {\n    return \"document\";\n  }\n}\nfunction camelize(value) {\n  return value.replace(/(?:[_-])([a-z0-9])/g, (_, char) => char.toUpperCase());\n}\nfunction namespaceCamelize(value) {\n  return camelize(value.replace(/--/g, \"-\").replace(/__/g, \"_\"));\n}\nfunction capitalize(value) {\n  return value.charAt(0).toUpperCase() + value.slice(1);\n}\nfunction dasherize(value) {\n  return value.replace(/([A-Z])/g, (_, char) => `-${char.toLowerCase()}`);\n}\nfunction tokenize(value) {\n  return value.match(/[^\\s]+/g) || [];\n}\nfunction isSomething(object) {\n  return object !== null && object !== undefined;\n}\nfunction hasProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\nconst allModifiers = [\"meta\", \"ctrl\", \"alt\", \"shift\"];\nclass Action {\n  constructor(element, index, descriptor, schema) {\n    this.element = element;\n    this.index = index;\n    this.eventTarget = descriptor.eventTarget || element;\n    this.eventName = descriptor.eventName || getDefaultEventNameForElement(element) || error(\"missing event name\");\n    this.eventOptions = descriptor.eventOptions || {};\n    this.identifier = descriptor.identifier || error(\"missing identifier\");\n    this.methodName = descriptor.methodName || error(\"missing method name\");\n    this.keyFilter = descriptor.keyFilter || \"\";\n    this.schema = schema;\n  }\n  static forToken(token, schema) {\n    return new this(token.element, token.index, parseActionDescriptorString(token.content), schema);\n  }\n  toString() {\n    const eventFilter = this.keyFilter ? `.${this.keyFilter}` : \"\";\n    const eventTarget = this.eventTargetName ? `@${this.eventTargetName}` : \"\";\n    return `${this.eventName}${eventFilter}${eventTarget}->${this.identifier}#${this.methodName}`;\n  }\n  shouldIgnoreKeyboardEvent(event) {\n    if (!this.keyFilter) {\n      return false;\n    }\n    const filters = this.keyFilter.split(\"+\");\n    if (this.keyFilterDissatisfied(event, filters)) {\n      return true;\n    }\n    const standardFilter = filters.filter(key => !allModifiers.includes(key))[0];\n    if (!standardFilter) {\n      return false;\n    }\n    if (!hasProperty(this.keyMappings, standardFilter)) {\n      error(`contains unknown key filter: ${this.keyFilter}`);\n    }\n    return this.keyMappings[standardFilter].toLowerCase() !== event.key.toLowerCase();\n  }\n  shouldIgnoreMouseEvent(event) {\n    if (!this.keyFilter) {\n      return false;\n    }\n    const filters = [this.keyFilter];\n    if (this.keyFilterDissatisfied(event, filters)) {\n      return true;\n    }\n    return false;\n  }\n  get params() {\n    const params = {};\n    const pattern = new RegExp(`^data-${this.identifier}-(.+)-param$`, \"i\");\n    for (const _ref4 of Array.from(this.element.attributes)) {\n      const name = _ref4.name;\n      const value = _ref4.value;\n      const match = name.match(pattern);\n      const key = match && match[1];\n      if (key) {\n        params[camelize(key)] = typecast(value);\n      }\n    }\n    return params;\n  }\n  get eventTargetName() {\n    return stringifyEventTarget(this.eventTarget);\n  }\n  get keyMappings() {\n    return this.schema.keyMappings;\n  }\n  keyFilterDissatisfied(event, filters) {\n    const _allModifiers$map = allModifiers.map(modifier => filters.includes(modifier)),\n      _allModifiers$map2 = _slicedToArray(_allModifiers$map, 4),\n      meta = _allModifiers$map2[0],\n      ctrl = _allModifiers$map2[1],\n      alt = _allModifiers$map2[2],\n      shift = _allModifiers$map2[3];\n    return event.metaKey !== meta || event.ctrlKey !== ctrl || event.altKey !== alt || event.shiftKey !== shift;\n  }\n}\nconst defaultEventNames = {\n  a: () => \"click\",\n  button: () => \"click\",\n  form: () => \"submit\",\n  details: () => \"toggle\",\n  input: e => e.getAttribute(\"type\") == \"submit\" ? \"click\" : \"input\",\n  select: () => \"change\",\n  textarea: () => \"input\"\n};\nfunction getDefaultEventNameForElement(element) {\n  const tagName = element.tagName.toLowerCase();\n  if (tagName in defaultEventNames) {\n    return defaultEventNames[tagName](element);\n  }\n}\nfunction error(message) {\n  throw new Error(message);\n}\nfunction typecast(value) {\n  try {\n    return JSON.parse(value);\n  } catch (o_O) {\n    return value;\n  }\n}\nclass Binding {\n  constructor(context, action) {\n    this.context = context;\n    this.action = action;\n  }\n  get index() {\n    return this.action.index;\n  }\n  get eventTarget() {\n    return this.action.eventTarget;\n  }\n  get eventOptions() {\n    return this.action.eventOptions;\n  }\n  get identifier() {\n    return this.context.identifier;\n  }\n  handleEvent(event) {\n    const actionEvent = this.prepareActionEvent(event);\n    if (this.willBeInvokedByEvent(event) && this.applyEventModifiers(actionEvent)) {\n      this.invokeWithEvent(actionEvent);\n    }\n  }\n  get eventName() {\n    return this.action.eventName;\n  }\n  get method() {\n    const method = this.controller[this.methodName];\n    if (typeof method == \"function\") {\n      return method;\n    }\n    throw new Error(`Action \"${this.action}\" references undefined method \"${this.methodName}\"`);\n  }\n  applyEventModifiers(event) {\n    const element = this.action.element;\n    const actionDescriptorFilters = this.context.application.actionDescriptorFilters;\n    const controller = this.context.controller;\n    let passes = true;\n    for (const _ref5 of Object.entries(this.eventOptions)) {\n      var _ref6 = _slicedToArray(_ref5, 2);\n      const name = _ref6[0];\n      const value = _ref6[1];\n      if (name in actionDescriptorFilters) {\n        const filter = actionDescriptorFilters[name];\n        passes = passes && filter({\n          name,\n          value,\n          event,\n          element,\n          controller\n        });\n      } else {\n        continue;\n      }\n    }\n    return passes;\n  }\n  prepareActionEvent(event) {\n    return Object.assign(event, {\n      params: this.action.params\n    });\n  }\n  invokeWithEvent(event) {\n    const target = event.target,\n      currentTarget = event.currentTarget;\n    try {\n      this.method.call(this.controller, event);\n      this.context.logDebugActivity(this.methodName, {\n        event,\n        target,\n        currentTarget,\n        action: this.methodName\n      });\n    } catch (error) {\n      const identifier = this.identifier,\n        controller = this.controller,\n        element = this.element,\n        index = this.index;\n      const detail = {\n        identifier,\n        controller,\n        element,\n        index,\n        event\n      };\n      this.context.handleError(error, `invoking action \"${this.action}\"`, detail);\n    }\n  }\n  willBeInvokedByEvent(event) {\n    const eventTarget = event.target;\n    if (event instanceof KeyboardEvent && this.action.shouldIgnoreKeyboardEvent(event)) {\n      return false;\n    }\n    if (event instanceof MouseEvent && this.action.shouldIgnoreMouseEvent(event)) {\n      return false;\n    }\n    if (this.element === eventTarget) {\n      return true;\n    } else if (eventTarget instanceof Element && this.element.contains(eventTarget)) {\n      return this.scope.containsElement(eventTarget);\n    } else {\n      return this.scope.containsElement(this.action.element);\n    }\n  }\n  get controller() {\n    return this.context.controller;\n  }\n  get methodName() {\n    return this.action.methodName;\n  }\n  get element() {\n    return this.scope.element;\n  }\n  get scope() {\n    return this.context.scope;\n  }\n}\nclass ElementObserver {\n  constructor(element, delegate) {\n    this.mutationObserverInit = {\n      attributes: true,\n      childList: true,\n      subtree: true\n    };\n    this.element = element;\n    this.started = false;\n    this.delegate = delegate;\n    this.elements = new Set();\n    this.mutationObserver = new MutationObserver(mutations => this.processMutations(mutations));\n  }\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this.mutationObserver.observe(this.element, this.mutationObserverInit);\n      this.refresh();\n    }\n  }\n  pause(callback) {\n    if (this.started) {\n      this.mutationObserver.disconnect();\n      this.started = false;\n    }\n    callback();\n    if (!this.started) {\n      this.mutationObserver.observe(this.element, this.mutationObserverInit);\n      this.started = true;\n    }\n  }\n  stop() {\n    if (this.started) {\n      this.mutationObserver.takeRecords();\n      this.mutationObserver.disconnect();\n      this.started = false;\n    }\n  }\n  refresh() {\n    if (this.started) {\n      const matches = new Set(this.matchElementsInTree());\n      for (const element of Array.from(this.elements)) {\n        if (!matches.has(element)) {\n          this.removeElement(element);\n        }\n      }\n      for (const element of Array.from(matches)) {\n        this.addElement(element);\n      }\n    }\n  }\n  processMutations(mutations) {\n    if (this.started) {\n      for (const mutation of mutations) {\n        this.processMutation(mutation);\n      }\n    }\n  }\n  processMutation(mutation) {\n    if (mutation.type == \"attributes\") {\n      this.processAttributeChange(mutation.target, mutation.attributeName);\n    } else if (mutation.type == \"childList\") {\n      this.processRemovedNodes(mutation.removedNodes);\n      this.processAddedNodes(mutation.addedNodes);\n    }\n  }\n  processAttributeChange(element, attributeName) {\n    if (this.elements.has(element)) {\n      if (this.delegate.elementAttributeChanged && this.matchElement(element)) {\n        this.delegate.elementAttributeChanged(element, attributeName);\n      } else {\n        this.removeElement(element);\n      }\n    } else if (this.matchElement(element)) {\n      this.addElement(element);\n    }\n  }\n  processRemovedNodes(nodes) {\n    for (const node of Array.from(nodes)) {\n      const element = this.elementFromNode(node);\n      if (element) {\n        this.processTree(element, this.removeElement);\n      }\n    }\n  }\n  processAddedNodes(nodes) {\n    for (const node of Array.from(nodes)) {\n      const element = this.elementFromNode(node);\n      if (element && this.elementIsActive(element)) {\n        this.processTree(element, this.addElement);\n      }\n    }\n  }\n  matchElement(element) {\n    return this.delegate.matchElement(element);\n  }\n  matchElementsInTree() {\n    let tree = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.element;\n    return this.delegate.matchElementsInTree(tree);\n  }\n  processTree(tree, processor) {\n    for (const element of this.matchElementsInTree(tree)) {\n      processor.call(this, element);\n    }\n  }\n  elementFromNode(node) {\n    if (node.nodeType == Node.ELEMENT_NODE) {\n      return node;\n    }\n  }\n  elementIsActive(element) {\n    if (element.isConnected != this.element.isConnected) {\n      return false;\n    } else {\n      return this.element.contains(element);\n    }\n  }\n  addElement(element) {\n    if (!this.elements.has(element)) {\n      if (this.elementIsActive(element)) {\n        this.elements.add(element);\n        if (this.delegate.elementMatched) {\n          this.delegate.elementMatched(element);\n        }\n      }\n    }\n  }\n  removeElement(element) {\n    if (this.elements.has(element)) {\n      this.elements.delete(element);\n      if (this.delegate.elementUnmatched) {\n        this.delegate.elementUnmatched(element);\n      }\n    }\n  }\n}\nclass AttributeObserver {\n  constructor(element, attributeName, delegate) {\n    this.attributeName = attributeName;\n    this.delegate = delegate;\n    this.elementObserver = new ElementObserver(element, this);\n  }\n  get element() {\n    return this.elementObserver.element;\n  }\n  get selector() {\n    return `[${this.attributeName}]`;\n  }\n  start() {\n    this.elementObserver.start();\n  }\n  pause(callback) {\n    this.elementObserver.pause(callback);\n  }\n  stop() {\n    this.elementObserver.stop();\n  }\n  refresh() {\n    this.elementObserver.refresh();\n  }\n  get started() {\n    return this.elementObserver.started;\n  }\n  matchElement(element) {\n    return element.hasAttribute(this.attributeName);\n  }\n  matchElementsInTree(tree) {\n    const match = this.matchElement(tree) ? [tree] : [];\n    const matches = Array.from(tree.querySelectorAll(this.selector));\n    return match.concat(matches);\n  }\n  elementMatched(element) {\n    if (this.delegate.elementMatchedAttribute) {\n      this.delegate.elementMatchedAttribute(element, this.attributeName);\n    }\n  }\n  elementUnmatched(element) {\n    if (this.delegate.elementUnmatchedAttribute) {\n      this.delegate.elementUnmatchedAttribute(element, this.attributeName);\n    }\n  }\n  elementAttributeChanged(element, attributeName) {\n    if (this.delegate.elementAttributeValueChanged && this.attributeName == attributeName) {\n      this.delegate.elementAttributeValueChanged(element, attributeName);\n    }\n  }\n}\nfunction add(map, key, value) {\n  fetch(map, key).add(value);\n}\nfunction del(map, key, value) {\n  fetch(map, key).delete(value);\n  prune(map, key);\n}\nfunction fetch(map, key) {\n  let values = map.get(key);\n  if (!values) {\n    values = new Set();\n    map.set(key, values);\n  }\n  return values;\n}\nfunction prune(map, key) {\n  const values = map.get(key);\n  if (values != null && values.size == 0) {\n    map.delete(key);\n  }\n}\nclass Multimap {\n  constructor() {\n    this.valuesByKey = new Map();\n  }\n  get keys() {\n    return Array.from(this.valuesByKey.keys());\n  }\n  get values() {\n    const sets = Array.from(this.valuesByKey.values());\n    return sets.reduce((values, set) => values.concat(Array.from(set)), []);\n  }\n  get size() {\n    const sets = Array.from(this.valuesByKey.values());\n    return sets.reduce((size, set) => size + set.size, 0);\n  }\n  add(key, value) {\n    add(this.valuesByKey, key, value);\n  }\n  delete(key, value) {\n    del(this.valuesByKey, key, value);\n  }\n  has(key, value) {\n    const values = this.valuesByKey.get(key);\n    return values != null && values.has(value);\n  }\n  hasKey(key) {\n    return this.valuesByKey.has(key);\n  }\n  hasValue(value) {\n    const sets = Array.from(this.valuesByKey.values());\n    return sets.some(set => set.has(value));\n  }\n  getValuesForKey(key) {\n    const values = this.valuesByKey.get(key);\n    return values ? Array.from(values) : [];\n  }\n  getKeysForValue(value) {\n    return Array.from(this.valuesByKey).filter(_ref7 => {\n      let _ref8 = _slicedToArray(_ref7, 2),\n        _key = _ref8[0],\n        values = _ref8[1];\n      return values.has(value);\n    }).map(_ref9 => {\n      let _ref10 = _slicedToArray(_ref9, 2),\n        key = _ref10[0],\n        _values = _ref10[1];\n      return key;\n    });\n  }\n}\nclass IndexedMultimap extends Multimap {\n  constructor() {\n    super();\n    this.keysByValue = new Map();\n  }\n  get values() {\n    return Array.from(this.keysByValue.keys());\n  }\n  add(key, value) {\n    super.add(key, value);\n    add(this.keysByValue, value, key);\n  }\n  delete(key, value) {\n    super.delete(key, value);\n    del(this.keysByValue, value, key);\n  }\n  hasValue(value) {\n    return this.keysByValue.has(value);\n  }\n  getKeysForValue(value) {\n    const set = this.keysByValue.get(value);\n    return set ? Array.from(set) : [];\n  }\n}\nclass SelectorObserver {\n  constructor(element, selector, delegate, details) {\n    this._selector = selector;\n    this.details = details;\n    this.elementObserver = new ElementObserver(element, this);\n    this.delegate = delegate;\n    this.matchesByElement = new Multimap();\n  }\n  get started() {\n    return this.elementObserver.started;\n  }\n  get selector() {\n    return this._selector;\n  }\n  set selector(selector) {\n    this._selector = selector;\n    this.refresh();\n  }\n  start() {\n    this.elementObserver.start();\n  }\n  pause(callback) {\n    this.elementObserver.pause(callback);\n  }\n  stop() {\n    this.elementObserver.stop();\n  }\n  refresh() {\n    this.elementObserver.refresh();\n  }\n  get element() {\n    return this.elementObserver.element;\n  }\n  matchElement(element) {\n    const selector = this.selector;\n    if (selector) {\n      const matches = element.matches(selector);\n      if (this.delegate.selectorMatchElement) {\n        return matches && this.delegate.selectorMatchElement(element, this.details);\n      }\n      return matches;\n    } else {\n      return false;\n    }\n  }\n  matchElementsInTree(tree) {\n    const selector = this.selector;\n    if (selector) {\n      const match = this.matchElement(tree) ? [tree] : [];\n      const matches = Array.from(tree.querySelectorAll(selector)).filter(match => this.matchElement(match));\n      return match.concat(matches);\n    } else {\n      return [];\n    }\n  }\n  elementMatched(element) {\n    const selector = this.selector;\n    if (selector) {\n      this.selectorMatched(element, selector);\n    }\n  }\n  elementUnmatched(element) {\n    const selectors = this.matchesByElement.getKeysForValue(element);\n    for (const selector of selectors) {\n      this.selectorUnmatched(element, selector);\n    }\n  }\n  elementAttributeChanged(element, _attributeName) {\n    const selector = this.selector;\n    if (selector) {\n      const matches = this.matchElement(element);\n      const matchedBefore = this.matchesByElement.has(selector, element);\n      if (matches && !matchedBefore) {\n        this.selectorMatched(element, selector);\n      } else if (!matches && matchedBefore) {\n        this.selectorUnmatched(element, selector);\n      }\n    }\n  }\n  selectorMatched(element, selector) {\n    this.delegate.selectorMatched(element, selector, this.details);\n    this.matchesByElement.add(selector, element);\n  }\n  selectorUnmatched(element, selector) {\n    this.delegate.selectorUnmatched(element, selector, this.details);\n    this.matchesByElement.delete(selector, element);\n  }\n}\nclass StringMapObserver {\n  constructor(element, delegate) {\n    this.element = element;\n    this.delegate = delegate;\n    this.started = false;\n    this.stringMap = new Map();\n    this.mutationObserver = new MutationObserver(mutations => this.processMutations(mutations));\n  }\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this.mutationObserver.observe(this.element, {\n        attributes: true,\n        attributeOldValue: true\n      });\n      this.refresh();\n    }\n  }\n  stop() {\n    if (this.started) {\n      this.mutationObserver.takeRecords();\n      this.mutationObserver.disconnect();\n      this.started = false;\n    }\n  }\n  refresh() {\n    if (this.started) {\n      for (const attributeName of this.knownAttributeNames) {\n        this.refreshAttribute(attributeName, null);\n      }\n    }\n  }\n  processMutations(mutations) {\n    if (this.started) {\n      for (const mutation of mutations) {\n        this.processMutation(mutation);\n      }\n    }\n  }\n  processMutation(mutation) {\n    const attributeName = mutation.attributeName;\n    if (attributeName) {\n      this.refreshAttribute(attributeName, mutation.oldValue);\n    }\n  }\n  refreshAttribute(attributeName, oldValue) {\n    const key = this.delegate.getStringMapKeyForAttribute(attributeName);\n    if (key != null) {\n      if (!this.stringMap.has(attributeName)) {\n        this.stringMapKeyAdded(key, attributeName);\n      }\n      const value = this.element.getAttribute(attributeName);\n      if (this.stringMap.get(attributeName) != value) {\n        this.stringMapValueChanged(value, key, oldValue);\n      }\n      if (value == null) {\n        const oldValue = this.stringMap.get(attributeName);\n        this.stringMap.delete(attributeName);\n        if (oldValue) this.stringMapKeyRemoved(key, attributeName, oldValue);\n      } else {\n        this.stringMap.set(attributeName, value);\n      }\n    }\n  }\n  stringMapKeyAdded(key, attributeName) {\n    if (this.delegate.stringMapKeyAdded) {\n      this.delegate.stringMapKeyAdded(key, attributeName);\n    }\n  }\n  stringMapValueChanged(value, key, oldValue) {\n    if (this.delegate.stringMapValueChanged) {\n      this.delegate.stringMapValueChanged(value, key, oldValue);\n    }\n  }\n  stringMapKeyRemoved(key, attributeName, oldValue) {\n    if (this.delegate.stringMapKeyRemoved) {\n      this.delegate.stringMapKeyRemoved(key, attributeName, oldValue);\n    }\n  }\n  get knownAttributeNames() {\n    return Array.from(new Set(this.currentAttributeNames.concat(this.recordedAttributeNames)));\n  }\n  get currentAttributeNames() {\n    return Array.from(this.element.attributes).map(attribute => attribute.name);\n  }\n  get recordedAttributeNames() {\n    return Array.from(this.stringMap.keys());\n  }\n}\nclass TokenListObserver {\n  constructor(element, attributeName, delegate) {\n    this.attributeObserver = new AttributeObserver(element, attributeName, this);\n    this.delegate = delegate;\n    this.tokensByElement = new Multimap();\n  }\n  get started() {\n    return this.attributeObserver.started;\n  }\n  start() {\n    this.attributeObserver.start();\n  }\n  pause(callback) {\n    this.attributeObserver.pause(callback);\n  }\n  stop() {\n    this.attributeObserver.stop();\n  }\n  refresh() {\n    this.attributeObserver.refresh();\n  }\n  get element() {\n    return this.attributeObserver.element;\n  }\n  get attributeName() {\n    return this.attributeObserver.attributeName;\n  }\n  elementMatchedAttribute(element) {\n    this.tokensMatched(this.readTokensForElement(element));\n  }\n  elementAttributeValueChanged(element) {\n    const _this$refreshTokensFo = this.refreshTokensForElement(element),\n      _this$refreshTokensFo2 = _slicedToArray(_this$refreshTokensFo, 2),\n      unmatchedTokens = _this$refreshTokensFo2[0],\n      matchedTokens = _this$refreshTokensFo2[1];\n    this.tokensUnmatched(unmatchedTokens);\n    this.tokensMatched(matchedTokens);\n  }\n  elementUnmatchedAttribute(element) {\n    this.tokensUnmatched(this.tokensByElement.getValuesForKey(element));\n  }\n  tokensMatched(tokens) {\n    tokens.forEach(token => this.tokenMatched(token));\n  }\n  tokensUnmatched(tokens) {\n    tokens.forEach(token => this.tokenUnmatched(token));\n  }\n  tokenMatched(token) {\n    this.delegate.tokenMatched(token);\n    this.tokensByElement.add(token.element, token);\n  }\n  tokenUnmatched(token) {\n    this.delegate.tokenUnmatched(token);\n    this.tokensByElement.delete(token.element, token);\n  }\n  refreshTokensForElement(element) {\n    const previousTokens = this.tokensByElement.getValuesForKey(element);\n    const currentTokens = this.readTokensForElement(element);\n    const firstDifferingIndex = zip(previousTokens, currentTokens).findIndex(_ref11 => {\n      let _ref12 = _slicedToArray(_ref11, 2),\n        previousToken = _ref12[0],\n        currentToken = _ref12[1];\n      return !tokensAreEqual(previousToken, currentToken);\n    });\n    if (firstDifferingIndex == -1) {\n      return [[], []];\n    } else {\n      return [previousTokens.slice(firstDifferingIndex), currentTokens.slice(firstDifferingIndex)];\n    }\n  }\n  readTokensForElement(element) {\n    const attributeName = this.attributeName;\n    const tokenString = element.getAttribute(attributeName) || \"\";\n    return parseTokenString(tokenString, element, attributeName);\n  }\n}\nfunction parseTokenString(tokenString, element, attributeName) {\n  return tokenString.trim().split(/\\s+/).filter(content => content.length).map((content, index) => ({\n    element,\n    attributeName,\n    content,\n    index\n  }));\n}\nfunction zip(left, right) {\n  const length = Math.max(left.length, right.length);\n  return Array.from({\n    length\n  }, (_, index) => [left[index], right[index]]);\n}\nfunction tokensAreEqual(left, right) {\n  return left && right && left.index == right.index && left.content == right.content;\n}\nclass ValueListObserver {\n  constructor(element, attributeName, delegate) {\n    this.tokenListObserver = new TokenListObserver(element, attributeName, this);\n    this.delegate = delegate;\n    this.parseResultsByToken = new WeakMap();\n    this.valuesByTokenByElement = new WeakMap();\n  }\n  get started() {\n    return this.tokenListObserver.started;\n  }\n  start() {\n    this.tokenListObserver.start();\n  }\n  stop() {\n    this.tokenListObserver.stop();\n  }\n  refresh() {\n    this.tokenListObserver.refresh();\n  }\n  get element() {\n    return this.tokenListObserver.element;\n  }\n  get attributeName() {\n    return this.tokenListObserver.attributeName;\n  }\n  tokenMatched(token) {\n    const element = token.element;\n    const _this$fetchParseResul = this.fetchParseResultForToken(token),\n      value = _this$fetchParseResul.value;\n    if (value) {\n      this.fetchValuesByTokenForElement(element).set(token, value);\n      this.delegate.elementMatchedValue(element, value);\n    }\n  }\n  tokenUnmatched(token) {\n    const element = token.element;\n    const _this$fetchParseResul2 = this.fetchParseResultForToken(token),\n      value = _this$fetchParseResul2.value;\n    if (value) {\n      this.fetchValuesByTokenForElement(element).delete(token);\n      this.delegate.elementUnmatchedValue(element, value);\n    }\n  }\n  fetchParseResultForToken(token) {\n    let parseResult = this.parseResultsByToken.get(token);\n    if (!parseResult) {\n      parseResult = this.parseToken(token);\n      this.parseResultsByToken.set(token, parseResult);\n    }\n    return parseResult;\n  }\n  fetchValuesByTokenForElement(element) {\n    let valuesByToken = this.valuesByTokenByElement.get(element);\n    if (!valuesByToken) {\n      valuesByToken = new Map();\n      this.valuesByTokenByElement.set(element, valuesByToken);\n    }\n    return valuesByToken;\n  }\n  parseToken(token) {\n    try {\n      const value = this.delegate.parseValueForToken(token);\n      return {\n        value\n      };\n    } catch (error) {\n      return {\n        error\n      };\n    }\n  }\n}\nclass BindingObserver {\n  constructor(context, delegate) {\n    this.context = context;\n    this.delegate = delegate;\n    this.bindingsByAction = new Map();\n  }\n  start() {\n    if (!this.valueListObserver) {\n      this.valueListObserver = new ValueListObserver(this.element, this.actionAttribute, this);\n      this.valueListObserver.start();\n    }\n  }\n  stop() {\n    if (this.valueListObserver) {\n      this.valueListObserver.stop();\n      delete this.valueListObserver;\n      this.disconnectAllActions();\n    }\n  }\n  get element() {\n    return this.context.element;\n  }\n  get identifier() {\n    return this.context.identifier;\n  }\n  get actionAttribute() {\n    return this.schema.actionAttribute;\n  }\n  get schema() {\n    return this.context.schema;\n  }\n  get bindings() {\n    return Array.from(this.bindingsByAction.values());\n  }\n  connectAction(action) {\n    const binding = new Binding(this.context, action);\n    this.bindingsByAction.set(action, binding);\n    this.delegate.bindingConnected(binding);\n  }\n  disconnectAction(action) {\n    const binding = this.bindingsByAction.get(action);\n    if (binding) {\n      this.bindingsByAction.delete(action);\n      this.delegate.bindingDisconnected(binding);\n    }\n  }\n  disconnectAllActions() {\n    this.bindings.forEach(binding => this.delegate.bindingDisconnected(binding, true));\n    this.bindingsByAction.clear();\n  }\n  parseValueForToken(token) {\n    const action = Action.forToken(token, this.schema);\n    if (action.identifier == this.identifier) {\n      return action;\n    }\n  }\n  elementMatchedValue(element, action) {\n    this.connectAction(action);\n  }\n  elementUnmatchedValue(element, action) {\n    this.disconnectAction(action);\n  }\n}\nclass ValueObserver {\n  constructor(context, receiver) {\n    this.context = context;\n    this.receiver = receiver;\n    this.stringMapObserver = new StringMapObserver(this.element, this);\n    this.valueDescriptorMap = this.controller.valueDescriptorMap;\n  }\n  start() {\n    this.stringMapObserver.start();\n    this.invokeChangedCallbacksForDefaultValues();\n  }\n  stop() {\n    this.stringMapObserver.stop();\n  }\n  get element() {\n    return this.context.element;\n  }\n  get controller() {\n    return this.context.controller;\n  }\n  getStringMapKeyForAttribute(attributeName) {\n    if (attributeName in this.valueDescriptorMap) {\n      return this.valueDescriptorMap[attributeName].name;\n    }\n  }\n  stringMapKeyAdded(key, attributeName) {\n    const descriptor = this.valueDescriptorMap[attributeName];\n    if (!this.hasValue(key)) {\n      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), descriptor.writer(descriptor.defaultValue));\n    }\n  }\n  stringMapValueChanged(value, name, oldValue) {\n    const descriptor = this.valueDescriptorNameMap[name];\n    if (value === null) return;\n    if (oldValue === null) {\n      oldValue = descriptor.writer(descriptor.defaultValue);\n    }\n    this.invokeChangedCallback(name, value, oldValue);\n  }\n  stringMapKeyRemoved(key, attributeName, oldValue) {\n    const descriptor = this.valueDescriptorNameMap[key];\n    if (this.hasValue(key)) {\n      this.invokeChangedCallback(key, descriptor.writer(this.receiver[key]), oldValue);\n    } else {\n      this.invokeChangedCallback(key, descriptor.writer(descriptor.defaultValue), oldValue);\n    }\n  }\n  invokeChangedCallbacksForDefaultValues() {\n    for (const _ref13 of this.valueDescriptors) {\n      const key = _ref13.key;\n      const name = _ref13.name;\n      const defaultValue = _ref13.defaultValue;\n      const writer = _ref13.writer;\n      if (defaultValue != undefined && !this.controller.data.has(key)) {\n        this.invokeChangedCallback(name, writer(defaultValue), undefined);\n      }\n    }\n  }\n  invokeChangedCallback(name, rawValue, rawOldValue) {\n    const changedMethodName = `${name}Changed`;\n    const changedMethod = this.receiver[changedMethodName];\n    if (typeof changedMethod == \"function\") {\n      const descriptor = this.valueDescriptorNameMap[name];\n      try {\n        const value = descriptor.reader(rawValue);\n        let oldValue = rawOldValue;\n        if (rawOldValue) {\n          oldValue = descriptor.reader(rawOldValue);\n        }\n        changedMethod.call(this.receiver, value, oldValue);\n      } catch (error) {\n        if (error instanceof TypeError) {\n          error.message = `Stimulus Value \"${this.context.identifier}.${descriptor.name}\" - ${error.message}`;\n        }\n        throw error;\n      }\n    }\n  }\n  get valueDescriptors() {\n    const valueDescriptorMap = this.valueDescriptorMap;\n    return Object.keys(valueDescriptorMap).map(key => valueDescriptorMap[key]);\n  }\n  get valueDescriptorNameMap() {\n    const descriptors = {};\n    Object.keys(this.valueDescriptorMap).forEach(key => {\n      const descriptor = this.valueDescriptorMap[key];\n      descriptors[descriptor.name] = descriptor;\n    });\n    return descriptors;\n  }\n  hasValue(attributeName) {\n    const descriptor = this.valueDescriptorNameMap[attributeName];\n    const hasMethodName = `has${capitalize(descriptor.name)}`;\n    return this.receiver[hasMethodName];\n  }\n}\nclass TargetObserver {\n  constructor(context, delegate) {\n    this.context = context;\n    this.delegate = delegate;\n    this.targetsByName = new Multimap();\n  }\n  start() {\n    if (!this.tokenListObserver) {\n      this.tokenListObserver = new TokenListObserver(this.element, this.attributeName, this);\n      this.tokenListObserver.start();\n    }\n  }\n  stop() {\n    if (this.tokenListObserver) {\n      this.disconnectAllTargets();\n      this.tokenListObserver.stop();\n      delete this.tokenListObserver;\n    }\n  }\n  tokenMatched(_ref14) {\n    let element = _ref14.element,\n      name = _ref14.content;\n    if (this.scope.containsElement(element)) {\n      this.connectTarget(element, name);\n    }\n  }\n  tokenUnmatched(_ref15) {\n    let element = _ref15.element,\n      name = _ref15.content;\n    this.disconnectTarget(element, name);\n  }\n  connectTarget(element, name) {\n    var _a;\n    if (!this.targetsByName.has(name, element)) {\n      this.targetsByName.add(name, element);\n      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetConnected(element, name));\n    }\n  }\n  disconnectTarget(element, name) {\n    var _a;\n    if (this.targetsByName.has(name, element)) {\n      this.targetsByName.delete(name, element);\n      (_a = this.tokenListObserver) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.targetDisconnected(element, name));\n    }\n  }\n  disconnectAllTargets() {\n    for (const name of this.targetsByName.keys) {\n      for (const element of this.targetsByName.getValuesForKey(name)) {\n        this.disconnectTarget(element, name);\n      }\n    }\n  }\n  get attributeName() {\n    return `data-${this.context.identifier}-target`;\n  }\n  get element() {\n    return this.context.element;\n  }\n  get scope() {\n    return this.context.scope;\n  }\n}\nfunction readInheritableStaticArrayValues(constructor, propertyName) {\n  const ancestors = getAncestorsForConstructor(constructor);\n  return Array.from(ancestors.reduce((values, constructor) => {\n    getOwnStaticArrayValues(constructor, propertyName).forEach(name => values.add(name));\n    return values;\n  }, new Set()));\n}\nfunction readInheritableStaticObjectPairs(constructor, propertyName) {\n  const ancestors = getAncestorsForConstructor(constructor);\n  return ancestors.reduce((pairs, constructor) => {\n    pairs.push(...getOwnStaticObjectPairs(constructor, propertyName));\n    return pairs;\n  }, []);\n}\nfunction getAncestorsForConstructor(constructor) {\n  const ancestors = [];\n  while (constructor) {\n    ancestors.push(constructor);\n    constructor = Object.getPrototypeOf(constructor);\n  }\n  return ancestors.reverse();\n}\nfunction getOwnStaticArrayValues(constructor, propertyName) {\n  const definition = constructor[propertyName];\n  return Array.isArray(definition) ? definition : [];\n}\nfunction getOwnStaticObjectPairs(constructor, propertyName) {\n  const definition = constructor[propertyName];\n  return definition ? Object.keys(definition).map(key => [key, definition[key]]) : [];\n}\nclass OutletObserver {\n  constructor(context, delegate) {\n    this.started = false;\n    this.context = context;\n    this.delegate = delegate;\n    this.outletsByName = new Multimap();\n    this.outletElementsByName = new Multimap();\n    this.selectorObserverMap = new Map();\n    this.attributeObserverMap = new Map();\n  }\n  start() {\n    if (!this.started) {\n      this.outletDefinitions.forEach(outletName => {\n        this.setupSelectorObserverForOutlet(outletName);\n        this.setupAttributeObserverForOutlet(outletName);\n      });\n      this.started = true;\n      this.dependentContexts.forEach(context => context.refresh());\n    }\n  }\n  refresh() {\n    this.selectorObserverMap.forEach(observer => observer.refresh());\n    this.attributeObserverMap.forEach(observer => observer.refresh());\n  }\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this.disconnectAllOutlets();\n      this.stopSelectorObservers();\n      this.stopAttributeObservers();\n    }\n  }\n  stopSelectorObservers() {\n    if (this.selectorObserverMap.size > 0) {\n      this.selectorObserverMap.forEach(observer => observer.stop());\n      this.selectorObserverMap.clear();\n    }\n  }\n  stopAttributeObservers() {\n    if (this.attributeObserverMap.size > 0) {\n      this.attributeObserverMap.forEach(observer => observer.stop());\n      this.attributeObserverMap.clear();\n    }\n  }\n  selectorMatched(element, _selector, _ref16) {\n    let outletName = _ref16.outletName;\n    const outlet = this.getOutlet(element, outletName);\n    if (outlet) {\n      this.connectOutlet(outlet, element, outletName);\n    }\n  }\n  selectorUnmatched(element, _selector, _ref17) {\n    let outletName = _ref17.outletName;\n    const outlet = this.getOutletFromMap(element, outletName);\n    if (outlet) {\n      this.disconnectOutlet(outlet, element, outletName);\n    }\n  }\n  selectorMatchElement(element, _ref18) {\n    let outletName = _ref18.outletName;\n    const selector = this.selector(outletName);\n    const hasOutlet = this.hasOutlet(element, outletName);\n    const hasOutletController = element.matches(`[${this.schema.controllerAttribute}~=${outletName}]`);\n    if (selector) {\n      return hasOutlet && hasOutletController && element.matches(selector);\n    } else {\n      return false;\n    }\n  }\n  elementMatchedAttribute(_element, attributeName) {\n    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n    if (outletName) {\n      this.updateSelectorObserverForOutlet(outletName);\n    }\n  }\n  elementAttributeValueChanged(_element, attributeName) {\n    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n    if (outletName) {\n      this.updateSelectorObserverForOutlet(outletName);\n    }\n  }\n  elementUnmatchedAttribute(_element, attributeName) {\n    const outletName = this.getOutletNameFromOutletAttributeName(attributeName);\n    if (outletName) {\n      this.updateSelectorObserverForOutlet(outletName);\n    }\n  }\n  connectOutlet(outlet, element, outletName) {\n    var _a;\n    if (!this.outletElementsByName.has(outletName, element)) {\n      this.outletsByName.add(outletName, outlet);\n      this.outletElementsByName.add(outletName, element);\n      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletConnected(outlet, element, outletName));\n    }\n  }\n  disconnectOutlet(outlet, element, outletName) {\n    var _a;\n    if (this.outletElementsByName.has(outletName, element)) {\n      this.outletsByName.delete(outletName, outlet);\n      this.outletElementsByName.delete(outletName, element);\n      (_a = this.selectorObserverMap.get(outletName)) === null || _a === void 0 ? void 0 : _a.pause(() => this.delegate.outletDisconnected(outlet, element, outletName));\n    }\n  }\n  disconnectAllOutlets() {\n    for (const outletName of this.outletElementsByName.keys) {\n      for (const element of this.outletElementsByName.getValuesForKey(outletName)) {\n        for (const outlet of this.outletsByName.getValuesForKey(outletName)) {\n          this.disconnectOutlet(outlet, element, outletName);\n        }\n      }\n    }\n  }\n  updateSelectorObserverForOutlet(outletName) {\n    const observer = this.selectorObserverMap.get(outletName);\n    if (observer) {\n      observer.selector = this.selector(outletName);\n    }\n  }\n  setupSelectorObserverForOutlet(outletName) {\n    const selector = this.selector(outletName);\n    const selectorObserver = new SelectorObserver(document.body, selector, this, {\n      outletName\n    });\n    this.selectorObserverMap.set(outletName, selectorObserver);\n    selectorObserver.start();\n  }\n  setupAttributeObserverForOutlet(outletName) {\n    const attributeName = this.attributeNameForOutletName(outletName);\n    const attributeObserver = new AttributeObserver(this.scope.element, attributeName, this);\n    this.attributeObserverMap.set(outletName, attributeObserver);\n    attributeObserver.start();\n  }\n  selector(outletName) {\n    return this.scope.outlets.getSelectorForOutletName(outletName);\n  }\n  attributeNameForOutletName(outletName) {\n    return this.scope.schema.outletAttributeForScope(this.identifier, outletName);\n  }\n  getOutletNameFromOutletAttributeName(attributeName) {\n    return this.outletDefinitions.find(outletName => this.attributeNameForOutletName(outletName) === attributeName);\n  }\n  get outletDependencies() {\n    const dependencies = new Multimap();\n    this.router.modules.forEach(module => {\n      const constructor = module.definition.controllerConstructor;\n      const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n      outlets.forEach(outlet => dependencies.add(outlet, module.identifier));\n    });\n    return dependencies;\n  }\n  get outletDefinitions() {\n    return this.outletDependencies.getKeysForValue(this.identifier);\n  }\n  get dependentControllerIdentifiers() {\n    return this.outletDependencies.getValuesForKey(this.identifier);\n  }\n  get dependentContexts() {\n    const identifiers = this.dependentControllerIdentifiers;\n    return this.router.contexts.filter(context => identifiers.includes(context.identifier));\n  }\n  hasOutlet(element, outletName) {\n    return !!this.getOutlet(element, outletName) || !!this.getOutletFromMap(element, outletName);\n  }\n  getOutlet(element, outletName) {\n    return this.application.getControllerForElementAndIdentifier(element, outletName);\n  }\n  getOutletFromMap(element, outletName) {\n    return this.outletsByName.getValuesForKey(outletName).find(outlet => outlet.element === element);\n  }\n  get scope() {\n    return this.context.scope;\n  }\n  get schema() {\n    return this.context.schema;\n  }\n  get identifier() {\n    return this.context.identifier;\n  }\n  get application() {\n    return this.context.application;\n  }\n  get router() {\n    return this.application.router;\n  }\n}\nclass Context {\n  constructor(module, scope) {\n    var _this = this;\n    this.logDebugActivity = function (functionName) {\n      let detail = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      const identifier = _this.identifier,\n        controller = _this.controller,\n        element = _this.element;\n      detail = Object.assign({\n        identifier,\n        controller,\n        element\n      }, detail);\n      _this.application.logDebugActivity(_this.identifier, functionName, detail);\n    };\n    this.module = module;\n    this.scope = scope;\n    this.controller = new module.controllerConstructor(this);\n    this.bindingObserver = new BindingObserver(this, this.dispatcher);\n    this.valueObserver = new ValueObserver(this, this.controller);\n    this.targetObserver = new TargetObserver(this, this);\n    this.outletObserver = new OutletObserver(this, this);\n    try {\n      this.controller.initialize();\n      this.logDebugActivity(\"initialize\");\n    } catch (error) {\n      this.handleError(error, \"initializing controller\");\n    }\n  }\n  connect() {\n    this.bindingObserver.start();\n    this.valueObserver.start();\n    this.targetObserver.start();\n    this.outletObserver.start();\n    try {\n      this.controller.connect();\n      this.logDebugActivity(\"connect\");\n    } catch (error) {\n      this.handleError(error, \"connecting controller\");\n    }\n  }\n  refresh() {\n    this.outletObserver.refresh();\n  }\n  disconnect() {\n    try {\n      this.controller.disconnect();\n      this.logDebugActivity(\"disconnect\");\n    } catch (error) {\n      this.handleError(error, \"disconnecting controller\");\n    }\n    this.outletObserver.stop();\n    this.targetObserver.stop();\n    this.valueObserver.stop();\n    this.bindingObserver.stop();\n  }\n  get application() {\n    return this.module.application;\n  }\n  get identifier() {\n    return this.module.identifier;\n  }\n  get schema() {\n    return this.application.schema;\n  }\n  get dispatcher() {\n    return this.application.dispatcher;\n  }\n  get element() {\n    return this.scope.element;\n  }\n  get parentElement() {\n    return this.element.parentElement;\n  }\n  handleError(error, message) {\n    let detail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const identifier = this.identifier,\n      controller = this.controller,\n      element = this.element;\n    detail = Object.assign({\n      identifier,\n      controller,\n      element\n    }, detail);\n    this.application.handleError(error, `Error ${message}`, detail);\n  }\n  targetConnected(element, name) {\n    this.invokeControllerMethod(`${name}TargetConnected`, element);\n  }\n  targetDisconnected(element, name) {\n    this.invokeControllerMethod(`${name}TargetDisconnected`, element);\n  }\n  outletConnected(outlet, element, name) {\n    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletConnected`, outlet, element);\n  }\n  outletDisconnected(outlet, element, name) {\n    this.invokeControllerMethod(`${namespaceCamelize(name)}OutletDisconnected`, outlet, element);\n  }\n  invokeControllerMethod(methodName) {\n    const controller = this.controller;\n    if (typeof controller[methodName] == \"function\") {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key2 = 1; _key2 < _len; _key2++) {\n        args[_key2 - 1] = arguments[_key2];\n      }\n      controller[methodName](...args);\n    }\n  }\n}\nfunction bless(constructor) {\n  return shadow(constructor, getBlessedProperties(constructor));\n}\nfunction shadow(constructor, properties) {\n  const shadowConstructor = extend(constructor);\n  const shadowProperties = getShadowProperties(constructor.prototype, properties);\n  Object.defineProperties(shadowConstructor.prototype, shadowProperties);\n  return shadowConstructor;\n}\nfunction getBlessedProperties(constructor) {\n  const blessings = readInheritableStaticArrayValues(constructor, \"blessings\");\n  return blessings.reduce((blessedProperties, blessing) => {\n    const properties = blessing(constructor);\n    for (const key in properties) {\n      const descriptor = blessedProperties[key] || {};\n      blessedProperties[key] = Object.assign(descriptor, properties[key]);\n    }\n    return blessedProperties;\n  }, {});\n}\nfunction getShadowProperties(prototype, properties) {\n  return getOwnKeys(properties).reduce((shadowProperties, key) => {\n    const descriptor = getShadowedDescriptor(prototype, properties, key);\n    if (descriptor) {\n      Object.assign(shadowProperties, {\n        [key]: descriptor\n      });\n    }\n    return shadowProperties;\n  }, {});\n}\nfunction getShadowedDescriptor(prototype, properties, key) {\n  const shadowingDescriptor = Object.getOwnPropertyDescriptor(prototype, key);\n  const shadowedByValue = shadowingDescriptor && \"value\" in shadowingDescriptor;\n  if (!shadowedByValue) {\n    const descriptor = Object.getOwnPropertyDescriptor(properties, key).value;\n    if (shadowingDescriptor) {\n      descriptor.get = shadowingDescriptor.get || descriptor.get;\n      descriptor.set = shadowingDescriptor.set || descriptor.set;\n    }\n    return descriptor;\n  }\n}\nconst getOwnKeys = (() => {\n  if (typeof Object.getOwnPropertySymbols == \"function\") {\n    return object => [...Object.getOwnPropertyNames(object), ...Object.getOwnPropertySymbols(object)];\n  } else {\n    return Object.getOwnPropertyNames;\n  }\n})();\nconst extend = (() => {\n  function extendWithReflect(constructor) {\n    function extended() {\n      return Reflect.construct(constructor, arguments, new.target);\n    }\n    extended.prototype = Object.create(constructor.prototype, {\n      constructor: {\n        value: extended\n      }\n    });\n    Reflect.setPrototypeOf(extended, constructor);\n    return extended;\n  }\n  function testReflectExtension() {\n    const a = function () {\n      this.a.call(this);\n    };\n    const b = extendWithReflect(a);\n    b.prototype.a = function () {};\n    return new b();\n  }\n  try {\n    testReflectExtension();\n    return extendWithReflect;\n  } catch (error) {\n    return constructor => class extended extends constructor {};\n  }\n})();\nfunction blessDefinition(definition) {\n  return {\n    identifier: definition.identifier,\n    controllerConstructor: bless(definition.controllerConstructor)\n  };\n}\nclass Module {\n  constructor(application, definition) {\n    this.application = application;\n    this.definition = blessDefinition(definition);\n    this.contextsByScope = new WeakMap();\n    this.connectedContexts = new Set();\n  }\n  get identifier() {\n    return this.definition.identifier;\n  }\n  get controllerConstructor() {\n    return this.definition.controllerConstructor;\n  }\n  get contexts() {\n    return Array.from(this.connectedContexts);\n  }\n  connectContextForScope(scope) {\n    const context = this.fetchContextForScope(scope);\n    this.connectedContexts.add(context);\n    context.connect();\n  }\n  disconnectContextForScope(scope) {\n    const context = this.contextsByScope.get(scope);\n    if (context) {\n      this.connectedContexts.delete(context);\n      context.disconnect();\n    }\n  }\n  fetchContextForScope(scope) {\n    let context = this.contextsByScope.get(scope);\n    if (!context) {\n      context = new Context(this, scope);\n      this.contextsByScope.set(scope, context);\n    }\n    return context;\n  }\n}\nclass ClassMap {\n  constructor(scope) {\n    this.scope = scope;\n  }\n  has(name) {\n    return this.data.has(this.getDataKey(name));\n  }\n  get(name) {\n    return this.getAll(name)[0];\n  }\n  getAll(name) {\n    const tokenString = this.data.get(this.getDataKey(name)) || \"\";\n    return tokenize(tokenString);\n  }\n  getAttributeName(name) {\n    return this.data.getAttributeNameForKey(this.getDataKey(name));\n  }\n  getDataKey(name) {\n    return `${name}-class`;\n  }\n  get data() {\n    return this.scope.data;\n  }\n}\nclass DataMap {\n  constructor(scope) {\n    this.scope = scope;\n  }\n  get element() {\n    return this.scope.element;\n  }\n  get identifier() {\n    return this.scope.identifier;\n  }\n  get(key) {\n    const name = this.getAttributeNameForKey(key);\n    return this.element.getAttribute(name);\n  }\n  set(key, value) {\n    const name = this.getAttributeNameForKey(key);\n    this.element.setAttribute(name, value);\n    return this.get(key);\n  }\n  has(key) {\n    const name = this.getAttributeNameForKey(key);\n    return this.element.hasAttribute(name);\n  }\n  delete(key) {\n    if (this.has(key)) {\n      const name = this.getAttributeNameForKey(key);\n      this.element.removeAttribute(name);\n      return true;\n    } else {\n      return false;\n    }\n  }\n  getAttributeNameForKey(key) {\n    return `data-${this.identifier}-${dasherize(key)}`;\n  }\n}\nclass Guide {\n  constructor(logger) {\n    this.warnedKeysByObject = new WeakMap();\n    this.logger = logger;\n  }\n  warn(object, key, message) {\n    let warnedKeys = this.warnedKeysByObject.get(object);\n    if (!warnedKeys) {\n      warnedKeys = new Set();\n      this.warnedKeysByObject.set(object, warnedKeys);\n    }\n    if (!warnedKeys.has(key)) {\n      warnedKeys.add(key);\n      this.logger.warn(message, object);\n    }\n  }\n}\nfunction attributeValueContainsToken(attributeName, token) {\n  return `[${attributeName}~=\"${token}\"]`;\n}\nclass TargetSet {\n  constructor(scope) {\n    this.scope = scope;\n  }\n  get element() {\n    return this.scope.element;\n  }\n  get identifier() {\n    return this.scope.identifier;\n  }\n  get schema() {\n    return this.scope.schema;\n  }\n  has(targetName) {\n    return this.find(targetName) != null;\n  }\n  find() {\n    for (var _len2 = arguments.length, targetNames = new Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n      targetNames[_key3] = arguments[_key3];\n    }\n    return targetNames.reduce((target, targetName) => target || this.findTarget(targetName) || this.findLegacyTarget(targetName), undefined);\n  }\n  findAll() {\n    for (var _len3 = arguments.length, targetNames = new Array(_len3), _key4 = 0; _key4 < _len3; _key4++) {\n      targetNames[_key4] = arguments[_key4];\n    }\n    return targetNames.reduce((targets, targetName) => [...targets, ...this.findAllTargets(targetName), ...this.findAllLegacyTargets(targetName)], []);\n  }\n  findTarget(targetName) {\n    const selector = this.getSelectorForTargetName(targetName);\n    return this.scope.findElement(selector);\n  }\n  findAllTargets(targetName) {\n    const selector = this.getSelectorForTargetName(targetName);\n    return this.scope.findAllElements(selector);\n  }\n  getSelectorForTargetName(targetName) {\n    const attributeName = this.schema.targetAttributeForScope(this.identifier);\n    return attributeValueContainsToken(attributeName, targetName);\n  }\n  findLegacyTarget(targetName) {\n    const selector = this.getLegacySelectorForTargetName(targetName);\n    return this.deprecate(this.scope.findElement(selector), targetName);\n  }\n  findAllLegacyTargets(targetName) {\n    const selector = this.getLegacySelectorForTargetName(targetName);\n    return this.scope.findAllElements(selector).map(element => this.deprecate(element, targetName));\n  }\n  getLegacySelectorForTargetName(targetName) {\n    const targetDescriptor = `${this.identifier}.${targetName}`;\n    return attributeValueContainsToken(this.schema.targetAttribute, targetDescriptor);\n  }\n  deprecate(element, targetName) {\n    if (element) {\n      const identifier = this.identifier;\n      const attributeName = this.schema.targetAttribute;\n      const revisedAttributeName = this.schema.targetAttributeForScope(identifier);\n      this.guide.warn(element, `target:${targetName}`, `Please replace ${attributeName}=\"${identifier}.${targetName}\" with ${revisedAttributeName}=\"${targetName}\". ` + `The ${attributeName} attribute is deprecated and will be removed in a future version of Stimulus.`);\n    }\n    return element;\n  }\n  get guide() {\n    return this.scope.guide;\n  }\n}\nclass OutletSet {\n  constructor(scope, controllerElement) {\n    this.scope = scope;\n    this.controllerElement = controllerElement;\n  }\n  get element() {\n    return this.scope.element;\n  }\n  get identifier() {\n    return this.scope.identifier;\n  }\n  get schema() {\n    return this.scope.schema;\n  }\n  has(outletName) {\n    return this.find(outletName) != null;\n  }\n  find() {\n    for (var _len4 = arguments.length, outletNames = new Array(_len4), _key5 = 0; _key5 < _len4; _key5++) {\n      outletNames[_key5] = arguments[_key5];\n    }\n    return outletNames.reduce((outlet, outletName) => outlet || this.findOutlet(outletName), undefined);\n  }\n  findAll() {\n    for (var _len5 = arguments.length, outletNames = new Array(_len5), _key6 = 0; _key6 < _len5; _key6++) {\n      outletNames[_key6] = arguments[_key6];\n    }\n    return outletNames.reduce((outlets, outletName) => [...outlets, ...this.findAllOutlets(outletName)], []);\n  }\n  getSelectorForOutletName(outletName) {\n    const attributeName = this.schema.outletAttributeForScope(this.identifier, outletName);\n    return this.controllerElement.getAttribute(attributeName);\n  }\n  findOutlet(outletName) {\n    const selector = this.getSelectorForOutletName(outletName);\n    if (selector) return this.findElement(selector, outletName);\n  }\n  findAllOutlets(outletName) {\n    const selector = this.getSelectorForOutletName(outletName);\n    return selector ? this.findAllElements(selector, outletName) : [];\n  }\n  findElement(selector, outletName) {\n    const elements = this.scope.queryElements(selector);\n    return elements.filter(element => this.matchesElement(element, selector, outletName))[0];\n  }\n  findAllElements(selector, outletName) {\n    const elements = this.scope.queryElements(selector);\n    return elements.filter(element => this.matchesElement(element, selector, outletName));\n  }\n  matchesElement(element, selector, outletName) {\n    const controllerAttribute = element.getAttribute(this.scope.schema.controllerAttribute) || \"\";\n    return element.matches(selector) && controllerAttribute.split(\" \").includes(outletName);\n  }\n}\nclass Scope {\n  constructor(schema, element, identifier, logger) {\n    this.targets = new TargetSet(this);\n    this.classes = new ClassMap(this);\n    this.data = new DataMap(this);\n    this.containsElement = element => {\n      return element.closest(this.controllerSelector) === this.element;\n    };\n    this.schema = schema;\n    this.element = element;\n    this.identifier = identifier;\n    this.guide = new Guide(logger);\n    this.outlets = new OutletSet(this.documentScope, element);\n  }\n  findElement(selector) {\n    return this.element.matches(selector) ? this.element : this.queryElements(selector).find(this.containsElement);\n  }\n  findAllElements(selector) {\n    return [...(this.element.matches(selector) ? [this.element] : []), ...this.queryElements(selector).filter(this.containsElement)];\n  }\n  queryElements(selector) {\n    return Array.from(this.element.querySelectorAll(selector));\n  }\n  get controllerSelector() {\n    return attributeValueContainsToken(this.schema.controllerAttribute, this.identifier);\n  }\n  get isDocumentScope() {\n    return this.element === document.documentElement;\n  }\n  get documentScope() {\n    return this.isDocumentScope ? this : new Scope(this.schema, document.documentElement, this.identifier, this.guide.logger);\n  }\n}\nclass ScopeObserver {\n  constructor(element, schema, delegate) {\n    this.element = element;\n    this.schema = schema;\n    this.delegate = delegate;\n    this.valueListObserver = new ValueListObserver(this.element, this.controllerAttribute, this);\n    this.scopesByIdentifierByElement = new WeakMap();\n    this.scopeReferenceCounts = new WeakMap();\n  }\n  start() {\n    this.valueListObserver.start();\n  }\n  stop() {\n    this.valueListObserver.stop();\n  }\n  get controllerAttribute() {\n    return this.schema.controllerAttribute;\n  }\n  parseValueForToken(token) {\n    const element = token.element,\n      identifier = token.content;\n    return this.parseValueForElementAndIdentifier(element, identifier);\n  }\n  parseValueForElementAndIdentifier(element, identifier) {\n    const scopesByIdentifier = this.fetchScopesByIdentifierForElement(element);\n    let scope = scopesByIdentifier.get(identifier);\n    if (!scope) {\n      scope = this.delegate.createScopeForElementAndIdentifier(element, identifier);\n      scopesByIdentifier.set(identifier, scope);\n    }\n    return scope;\n  }\n  elementMatchedValue(element, value) {\n    const referenceCount = (this.scopeReferenceCounts.get(value) || 0) + 1;\n    this.scopeReferenceCounts.set(value, referenceCount);\n    if (referenceCount == 1) {\n      this.delegate.scopeConnected(value);\n    }\n  }\n  elementUnmatchedValue(element, value) {\n    const referenceCount = this.scopeReferenceCounts.get(value);\n    if (referenceCount) {\n      this.scopeReferenceCounts.set(value, referenceCount - 1);\n      if (referenceCount == 1) {\n        this.delegate.scopeDisconnected(value);\n      }\n    }\n  }\n  fetchScopesByIdentifierForElement(element) {\n    let scopesByIdentifier = this.scopesByIdentifierByElement.get(element);\n    if (!scopesByIdentifier) {\n      scopesByIdentifier = new Map();\n      this.scopesByIdentifierByElement.set(element, scopesByIdentifier);\n    }\n    return scopesByIdentifier;\n  }\n}\nclass Router {\n  constructor(application) {\n    this.application = application;\n    this.scopeObserver = new ScopeObserver(this.element, this.schema, this);\n    this.scopesByIdentifier = new Multimap();\n    this.modulesByIdentifier = new Map();\n  }\n  get element() {\n    return this.application.element;\n  }\n  get schema() {\n    return this.application.schema;\n  }\n  get logger() {\n    return this.application.logger;\n  }\n  get controllerAttribute() {\n    return this.schema.controllerAttribute;\n  }\n  get modules() {\n    return Array.from(this.modulesByIdentifier.values());\n  }\n  get contexts() {\n    return this.modules.reduce((contexts, module) => contexts.concat(module.contexts), []);\n  }\n  start() {\n    this.scopeObserver.start();\n  }\n  stop() {\n    this.scopeObserver.stop();\n  }\n  loadDefinition(definition) {\n    this.unloadIdentifier(definition.identifier);\n    const module = new Module(this.application, definition);\n    this.connectModule(module);\n    const afterLoad = definition.controllerConstructor.afterLoad;\n    if (afterLoad) {\n      afterLoad.call(definition.controllerConstructor, definition.identifier, this.application);\n    }\n  }\n  unloadIdentifier(identifier) {\n    const module = this.modulesByIdentifier.get(identifier);\n    if (module) {\n      this.disconnectModule(module);\n    }\n  }\n  getContextForElementAndIdentifier(element, identifier) {\n    const module = this.modulesByIdentifier.get(identifier);\n    if (module) {\n      return module.contexts.find(context => context.element == element);\n    }\n  }\n  proposeToConnectScopeForElementAndIdentifier(element, identifier) {\n    const scope = this.scopeObserver.parseValueForElementAndIdentifier(element, identifier);\n    if (scope) {\n      this.scopeObserver.elementMatchedValue(scope.element, scope);\n    } else {\n      console.error(`Couldn't find or create scope for identifier: \"${identifier}\" and element:`, element);\n    }\n  }\n  handleError(error, message, detail) {\n    this.application.handleError(error, message, detail);\n  }\n  createScopeForElementAndIdentifier(element, identifier) {\n    return new Scope(this.schema, element, identifier, this.logger);\n  }\n  scopeConnected(scope) {\n    this.scopesByIdentifier.add(scope.identifier, scope);\n    const module = this.modulesByIdentifier.get(scope.identifier);\n    if (module) {\n      module.connectContextForScope(scope);\n    }\n  }\n  scopeDisconnected(scope) {\n    this.scopesByIdentifier.delete(scope.identifier, scope);\n    const module = this.modulesByIdentifier.get(scope.identifier);\n    if (module) {\n      module.disconnectContextForScope(scope);\n    }\n  }\n  connectModule(module) {\n    this.modulesByIdentifier.set(module.identifier, module);\n    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n    scopes.forEach(scope => module.connectContextForScope(scope));\n  }\n  disconnectModule(module) {\n    this.modulesByIdentifier.delete(module.identifier);\n    const scopes = this.scopesByIdentifier.getValuesForKey(module.identifier);\n    scopes.forEach(scope => module.disconnectContextForScope(scope));\n  }\n}\nconst defaultSchema = {\n  controllerAttribute: \"data-controller\",\n  actionAttribute: \"data-action\",\n  targetAttribute: \"data-target\",\n  targetAttributeForScope: identifier => `data-${identifier}-target`,\n  outletAttributeForScope: (identifier, outlet) => `data-${identifier}-${outlet}-outlet`,\n  keyMappings: Object.assign(Object.assign({\n    enter: \"Enter\",\n    tab: \"Tab\",\n    esc: \"Escape\",\n    space: \" \",\n    up: \"ArrowUp\",\n    down: \"ArrowDown\",\n    left: \"ArrowLeft\",\n    right: \"ArrowRight\",\n    home: \"Home\",\n    end: \"End\",\n    page_up: \"PageUp\",\n    page_down: \"PageDown\"\n  }, objectFromEntries(\"abcdefghijklmnopqrstuvwxyz\".split(\"\").map(c => [c, c]))), objectFromEntries(\"0123456789\".split(\"\").map(n => [n, n])))\n};\nfunction objectFromEntries(array) {\n  return array.reduce((memo, _ref19) => {\n    let _ref20 = _slicedToArray(_ref19, 2),\n      k = _ref20[0],\n      v = _ref20[1];\n    return Object.assign(Object.assign({}, memo), {\n      [k]: v\n    });\n  }, {});\n}\nclass Application {\n  constructor() {\n    var _this2 = this;\n    let element = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : document.documentElement;\n    let schema = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : defaultSchema;\n    this.logger = console;\n    this.debug = false;\n    this.logDebugActivity = function (identifier, functionName) {\n      let detail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      if (_this2.debug) {\n        _this2.logFormattedMessage(identifier, functionName, detail);\n      }\n    };\n    this.element = element;\n    this.schema = schema;\n    this.dispatcher = new Dispatcher(this);\n    this.router = new Router(this);\n    this.actionDescriptorFilters = Object.assign({}, defaultActionDescriptorFilters);\n  }\n  static start(element, schema) {\n    const application = new this(element, schema);\n    application.start();\n    return application;\n  }\n  async start() {\n    await domReady();\n    this.logDebugActivity(\"application\", \"starting\");\n    this.dispatcher.start();\n    this.router.start();\n    this.logDebugActivity(\"application\", \"start\");\n  }\n  stop() {\n    this.logDebugActivity(\"application\", \"stopping\");\n    this.dispatcher.stop();\n    this.router.stop();\n    this.logDebugActivity(\"application\", \"stop\");\n  }\n  register(identifier, controllerConstructor) {\n    this.load({\n      identifier,\n      controllerConstructor\n    });\n  }\n  registerActionOption(name, filter) {\n    this.actionDescriptorFilters[name] = filter;\n  }\n  load(head) {\n    for (var _len6 = arguments.length, rest = new Array(_len6 > 1 ? _len6 - 1 : 0), _key7 = 1; _key7 < _len6; _key7++) {\n      rest[_key7 - 1] = arguments[_key7];\n    }\n    const definitions = Array.isArray(head) ? head : [head, ...rest];\n    definitions.forEach(definition => {\n      if (definition.controllerConstructor.shouldLoad) {\n        this.router.loadDefinition(definition);\n      }\n    });\n  }\n  unload(head) {\n    for (var _len7 = arguments.length, rest = new Array(_len7 > 1 ? _len7 - 1 : 0), _key8 = 1; _key8 < _len7; _key8++) {\n      rest[_key8 - 1] = arguments[_key8];\n    }\n    const identifiers = Array.isArray(head) ? head : [head, ...rest];\n    identifiers.forEach(identifier => this.router.unloadIdentifier(identifier));\n  }\n  get controllers() {\n    return this.router.contexts.map(context => context.controller);\n  }\n  getControllerForElementAndIdentifier(element, identifier) {\n    const context = this.router.getContextForElementAndIdentifier(element, identifier);\n    return context ? context.controller : null;\n  }\n  handleError(error, message, detail) {\n    var _a;\n    this.logger.error(`%s\\n\\n%o\\n\\n%o`, message, error, detail);\n    (_a = window.onerror) === null || _a === void 0 ? void 0 : _a.call(window, message, \"\", 0, 0, error);\n  }\n  logFormattedMessage(identifier, functionName) {\n    let detail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    detail = Object.assign({\n      application: this\n    }, detail);\n    this.logger.groupCollapsed(`${identifier} #${functionName}`);\n    this.logger.log(\"details:\", Object.assign({}, detail));\n    this.logger.groupEnd();\n  }\n}\nfunction domReady() {\n  return new Promise(resolve => {\n    if (document.readyState == \"loading\") {\n      document.addEventListener(\"DOMContentLoaded\", () => resolve());\n    } else {\n      resolve();\n    }\n  });\n}\nfunction ClassPropertiesBlessing(constructor) {\n  const classes = readInheritableStaticArrayValues(constructor, \"classes\");\n  return classes.reduce((properties, classDefinition) => {\n    return Object.assign(properties, propertiesForClassDefinition(classDefinition));\n  }, {});\n}\nfunction propertiesForClassDefinition(key) {\n  return {\n    [`${key}Class`]: {\n      get() {\n        const classes = this.classes;\n        if (classes.has(key)) {\n          return classes.get(key);\n        } else {\n          const attribute = classes.getAttributeName(key);\n          throw new Error(`Missing attribute \"${attribute}\"`);\n        }\n      }\n    },\n    [`${key}Classes`]: {\n      get() {\n        return this.classes.getAll(key);\n      }\n    },\n    [`has${capitalize(key)}Class`]: {\n      get() {\n        return this.classes.has(key);\n      }\n    }\n  };\n}\nfunction OutletPropertiesBlessing(constructor) {\n  const outlets = readInheritableStaticArrayValues(constructor, \"outlets\");\n  return outlets.reduce((properties, outletDefinition) => {\n    return Object.assign(properties, propertiesForOutletDefinition(outletDefinition));\n  }, {});\n}\nfunction getOutletController(controller, element, identifier) {\n  return controller.application.getControllerForElementAndIdentifier(element, identifier);\n}\nfunction getControllerAndEnsureConnectedScope(controller, element, outletName) {\n  let outletController = getOutletController(controller, element, outletName);\n  if (outletController) return outletController;\n  controller.application.router.proposeToConnectScopeForElementAndIdentifier(element, outletName);\n  outletController = getOutletController(controller, element, outletName);\n  if (outletController) return outletController;\n}\nfunction propertiesForOutletDefinition(name) {\n  const camelizedName = namespaceCamelize(name);\n  return {\n    [`${camelizedName}Outlet`]: {\n      get() {\n        const outletElement = this.outlets.find(name);\n        const selector = this.outlets.getSelectorForOutletName(name);\n        if (outletElement) {\n          const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n          if (outletController) return outletController;\n          throw new Error(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`);\n        }\n        throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n      }\n    },\n    [`${camelizedName}Outlets`]: {\n      get() {\n        const outlets = this.outlets.findAll(name);\n        if (outlets.length > 0) {\n          return outlets.map(outletElement => {\n            const outletController = getControllerAndEnsureConnectedScope(this, outletElement, name);\n            if (outletController) return outletController;\n            console.warn(`The provided outlet element is missing an outlet controller \"${name}\" instance for host controller \"${this.identifier}\"`, outletElement);\n          }).filter(controller => controller);\n        }\n        return [];\n      }\n    },\n    [`${camelizedName}OutletElement`]: {\n      get() {\n        const outletElement = this.outlets.find(name);\n        const selector = this.outlets.getSelectorForOutletName(name);\n        if (outletElement) {\n          return outletElement;\n        } else {\n          throw new Error(`Missing outlet element \"${name}\" for host controller \"${this.identifier}\". Stimulus couldn't find a matching outlet element using selector \"${selector}\".`);\n        }\n      }\n    },\n    [`${camelizedName}OutletElements`]: {\n      get() {\n        return this.outlets.findAll(name);\n      }\n    },\n    [`has${capitalize(camelizedName)}Outlet`]: {\n      get() {\n        return this.outlets.has(name);\n      }\n    }\n  };\n}\nfunction TargetPropertiesBlessing(constructor) {\n  const targets = readInheritableStaticArrayValues(constructor, \"targets\");\n  return targets.reduce((properties, targetDefinition) => {\n    return Object.assign(properties, propertiesForTargetDefinition(targetDefinition));\n  }, {});\n}\nfunction propertiesForTargetDefinition(name) {\n  return {\n    [`${name}Target`]: {\n      get() {\n        const target = this.targets.find(name);\n        if (target) {\n          return target;\n        } else {\n          throw new Error(`Missing target element \"${name}\" for \"${this.identifier}\" controller`);\n        }\n      }\n    },\n    [`${name}Targets`]: {\n      get() {\n        return this.targets.findAll(name);\n      }\n    },\n    [`has${capitalize(name)}Target`]: {\n      get() {\n        return this.targets.has(name);\n      }\n    }\n  };\n}\nfunction ValuePropertiesBlessing(constructor) {\n  const valueDefinitionPairs = readInheritableStaticObjectPairs(constructor, \"values\");\n  const propertyDescriptorMap = {\n    valueDescriptorMap: {\n      get() {\n        return valueDefinitionPairs.reduce((result, valueDefinitionPair) => {\n          const valueDescriptor = parseValueDefinitionPair(valueDefinitionPair, this.identifier);\n          const attributeName = this.data.getAttributeNameForKey(valueDescriptor.key);\n          return Object.assign(result, {\n            [attributeName]: valueDescriptor\n          });\n        }, {});\n      }\n    }\n  };\n  return valueDefinitionPairs.reduce((properties, valueDefinitionPair) => {\n    return Object.assign(properties, propertiesForValueDefinitionPair(valueDefinitionPair));\n  }, propertyDescriptorMap);\n}\nfunction propertiesForValueDefinitionPair(valueDefinitionPair, controller) {\n  const definition = parseValueDefinitionPair(valueDefinitionPair, controller);\n  const key = definition.key,\n    name = definition.name,\n    read = definition.reader,\n    write = definition.writer;\n  return {\n    [name]: {\n      get() {\n        const value = this.data.get(key);\n        if (value !== null) {\n          return read(value);\n        } else {\n          return definition.defaultValue;\n        }\n      },\n      set(value) {\n        if (value === undefined) {\n          this.data.delete(key);\n        } else {\n          this.data.set(key, write(value));\n        }\n      }\n    },\n    [`has${capitalize(name)}`]: {\n      get() {\n        return this.data.has(key) || definition.hasCustomDefaultValue;\n      }\n    }\n  };\n}\nfunction parseValueDefinitionPair(_ref21, controller) {\n  let _ref22 = _slicedToArray(_ref21, 2),\n    token = _ref22[0],\n    typeDefinition = _ref22[1];\n  return valueDescriptorForTokenAndTypeDefinition({\n    controller,\n    token,\n    typeDefinition\n  });\n}\nfunction parseValueTypeConstant(constant) {\n  switch (constant) {\n    case Array:\n      return \"array\";\n    case Boolean:\n      return \"boolean\";\n    case Number:\n      return \"number\";\n    case Object:\n      return \"object\";\n    case String:\n      return \"string\";\n  }\n}\nfunction parseValueTypeDefault(defaultValue) {\n  switch (typeof defaultValue) {\n    case \"boolean\":\n      return \"boolean\";\n    case \"number\":\n      return \"number\";\n    case \"string\":\n      return \"string\";\n  }\n  if (Array.isArray(defaultValue)) return \"array\";\n  if (Object.prototype.toString.call(defaultValue) === \"[object Object]\") return \"object\";\n}\nfunction parseValueTypeObject(payload) {\n  const controller = payload.controller,\n    token = payload.token,\n    typeObject = payload.typeObject;\n  const hasType = isSomething(typeObject.type);\n  const hasDefault = isSomething(typeObject.default);\n  const fullObject = hasType && hasDefault;\n  const onlyType = hasType && !hasDefault;\n  const onlyDefault = !hasType && hasDefault;\n  const typeFromObject = parseValueTypeConstant(typeObject.type);\n  const typeFromDefaultValue = parseValueTypeDefault(payload.typeObject.default);\n  if (onlyType) return typeFromObject;\n  if (onlyDefault) return typeFromDefaultValue;\n  if (typeFromObject !== typeFromDefaultValue) {\n    const propertyPath = controller ? `${controller}.${token}` : token;\n    throw new Error(`The specified default value for the Stimulus Value \"${propertyPath}\" must match the defined type \"${typeFromObject}\". The provided default value of \"${typeObject.default}\" is of type \"${typeFromDefaultValue}\".`);\n  }\n  if (fullObject) return typeFromObject;\n}\nfunction parseValueTypeDefinition(payload) {\n  const controller = payload.controller,\n    token = payload.token,\n    typeDefinition = payload.typeDefinition;\n  const typeObject = {\n    controller,\n    token,\n    typeObject: typeDefinition\n  };\n  const typeFromObject = parseValueTypeObject(typeObject);\n  const typeFromDefaultValue = parseValueTypeDefault(typeDefinition);\n  const typeFromConstant = parseValueTypeConstant(typeDefinition);\n  const type = typeFromObject || typeFromDefaultValue || typeFromConstant;\n  if (type) return type;\n  const propertyPath = controller ? `${controller}.${typeDefinition}` : token;\n  throw new Error(`Unknown value type \"${propertyPath}\" for \"${token}\" value`);\n}\nfunction defaultValueForDefinition(typeDefinition) {\n  const constant = parseValueTypeConstant(typeDefinition);\n  if (constant) return defaultValuesByType[constant];\n  const hasDefault = hasProperty(typeDefinition, \"default\");\n  const hasType = hasProperty(typeDefinition, \"type\");\n  const typeObject = typeDefinition;\n  if (hasDefault) return typeObject.default;\n  if (hasType) {\n    const type = typeObject.type;\n    const constantFromType = parseValueTypeConstant(type);\n    if (constantFromType) return defaultValuesByType[constantFromType];\n  }\n  return typeDefinition;\n}\nfunction valueDescriptorForTokenAndTypeDefinition(payload) {\n  const token = payload.token,\n    typeDefinition = payload.typeDefinition;\n  const key = `${dasherize(token)}-value`;\n  const type = parseValueTypeDefinition(payload);\n  return {\n    type,\n    key,\n    name: camelize(key),\n    get defaultValue() {\n      return defaultValueForDefinition(typeDefinition);\n    },\n    get hasCustomDefaultValue() {\n      return parseValueTypeDefault(typeDefinition) !== undefined;\n    },\n    reader: readers[type],\n    writer: writers[type] || writers.default\n  };\n}\nconst defaultValuesByType = {\n  get array() {\n    return [];\n  },\n  boolean: false,\n  number: 0,\n  get object() {\n    return {};\n  },\n  string: \"\"\n};\nconst readers = {\n  array(value) {\n    const array = JSON.parse(value);\n    if (!Array.isArray(array)) {\n      throw new TypeError(`expected value of type \"array\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(array)}\"`);\n    }\n    return array;\n  },\n  boolean(value) {\n    return !(value == \"0\" || String(value).toLowerCase() == \"false\");\n  },\n  number(value) {\n    return Number(value.replace(/_/g, \"\"));\n  },\n  object(value) {\n    const object = JSON.parse(value);\n    if (object === null || typeof object != \"object\" || Array.isArray(object)) {\n      throw new TypeError(`expected value of type \"object\" but instead got value \"${value}\" of type \"${parseValueTypeDefault(object)}\"`);\n    }\n    return object;\n  },\n  string(value) {\n    return value;\n  }\n};\nconst writers = {\n  default: writeString,\n  array: writeJSON,\n  object: writeJSON\n};\nfunction writeJSON(value) {\n  return JSON.stringify(value);\n}\nfunction writeString(value) {\n  return `${value}`;\n}\nclass Controller {\n  constructor(context) {\n    this.context = context;\n  }\n  static get shouldLoad() {\n    return true;\n  }\n  static afterLoad(_identifier, _application) {\n    return;\n  }\n  get application() {\n    return this.context.application;\n  }\n  get scope() {\n    return this.context.scope;\n  }\n  get element() {\n    return this.scope.element;\n  }\n  get identifier() {\n    return this.scope.identifier;\n  }\n  get targets() {\n    return this.scope.targets;\n  }\n  get outlets() {\n    return this.scope.outlets;\n  }\n  get classes() {\n    return this.scope.classes;\n  }\n  get data() {\n    return this.scope.data;\n  }\n  initialize() {}\n  connect() {}\n  disconnect() {}\n  dispatch(eventName) {\n    let _ref23 = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n      _ref23$target = _ref23.target,\n      target = _ref23$target === void 0 ? this.element : _ref23$target,\n      _ref23$detail = _ref23.detail,\n      detail = _ref23$detail === void 0 ? {} : _ref23$detail,\n      _ref23$prefix = _ref23.prefix,\n      prefix = _ref23$prefix === void 0 ? this.identifier : _ref23$prefix,\n      _ref23$bubbles = _ref23.bubbles,\n      bubbles = _ref23$bubbles === void 0 ? true : _ref23$bubbles,\n      _ref23$cancelable = _ref23.cancelable,\n      cancelable = _ref23$cancelable === void 0 ? true : _ref23$cancelable;\n    const type = prefix ? `${prefix}:${eventName}` : eventName;\n    const event = new CustomEvent(type, {\n      detail,\n      bubbles,\n      cancelable\n    });\n    target.dispatchEvent(event);\n    return event;\n  }\n}\nController.blessings = [ClassPropertiesBlessing, TargetPropertiesBlessing, ValuePropertiesBlessing, OutletPropertiesBlessing];\nController.targets = [];\nController.outlets = [];\nController.values = {};\nexport { Application, AttributeObserver, Context, Controller, ElementObserver, IndexedMultimap, Multimap, SelectorObserver, StringMapObserver, TokenListObserver, ValueListObserver, add, defaultSchema, del, fetch, prune };","/**!\n * Sortable 1.15.2\n * @author\tRubaXa   <trash@rubaxa.org>\n * @author\towenm    <owen23355@gmail.com>\n * @license MIT\n */\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) {\n      symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n    }\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nfunction _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n  return _typeof(obj);\n}\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\nfunction _toConsumableArray(arr) {\n  return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread();\n}\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return _arrayLikeToArray(arr);\n}\nfunction _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n  return arr2;\n}\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nvar version = \"1.15.2\";\nfunction userAgent(pattern) {\n  if (typeof window !== 'undefined' && window.navigator) {\n    return !! /*@__PURE__*/navigator.userAgent.match(pattern);\n  }\n}\nvar IE11OrLess = userAgent(/(?:Trident.*rv[ :]?11\\.|msie|iemobile|Windows Phone)/i);\nvar Edge = userAgent(/Edge/i);\nvar FireFox = userAgent(/firefox/i);\nvar Safari = userAgent(/safari/i) && !userAgent(/chrome/i) && !userAgent(/android/i);\nvar IOS = userAgent(/iP(ad|od|hone)/i);\nvar ChromeForAndroid = userAgent(/chrome/i) && userAgent(/android/i);\nvar captureMode = {\n  capture: false,\n  passive: false\n};\nfunction on(el, event, fn) {\n  el.addEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction off(el, event, fn) {\n  el.removeEventListener(event, fn, !IE11OrLess && captureMode);\n}\nfunction matches( /**HTMLElement*/el, /**String*/selector) {\n  if (!selector) return;\n  selector[0] === '>' && (selector = selector.substring(1));\n  if (el) {\n    try {\n      if (el.matches) {\n        return el.matches(selector);\n      } else if (el.msMatchesSelector) {\n        return el.msMatchesSelector(selector);\n      } else if (el.webkitMatchesSelector) {\n        return el.webkitMatchesSelector(selector);\n      }\n    } catch (_) {\n      return false;\n    }\n  }\n  return false;\n}\nfunction getParentOrHost(el) {\n  return el.host && el !== document && el.host.nodeType ? el.host : el.parentNode;\n}\nfunction closest( /**HTMLElement*/el, /**String*/selector, /**HTMLElement*/ctx, includeCTX) {\n  if (el) {\n    ctx = ctx || document;\n    do {\n      if (selector != null && (selector[0] === '>' ? el.parentNode === ctx && matches(el, selector) : matches(el, selector)) || includeCTX && el === ctx) {\n        return el;\n      }\n      if (el === ctx) break;\n      /* jshint boss:true */\n    } while (el = getParentOrHost(el));\n  }\n  return null;\n}\nvar R_SPACE = /\\s+/g;\nfunction toggleClass(el, name, state) {\n  if (el && name) {\n    if (el.classList) {\n      el.classList[state ? 'add' : 'remove'](name);\n    } else {\n      var className = (' ' + el.className + ' ').replace(R_SPACE, ' ').replace(' ' + name + ' ', ' ');\n      el.className = (className + (state ? ' ' + name : '')).replace(R_SPACE, ' ');\n    }\n  }\n}\nfunction css(el, prop, val) {\n  var style = el && el.style;\n  if (style) {\n    if (val === void 0) {\n      if (document.defaultView && document.defaultView.getComputedStyle) {\n        val = document.defaultView.getComputedStyle(el, '');\n      } else if (el.currentStyle) {\n        val = el.currentStyle;\n      }\n      return prop === void 0 ? val : val[prop];\n    } else {\n      if (!(prop in style) && prop.indexOf('webkit') === -1) {\n        prop = '-webkit-' + prop;\n      }\n      style[prop] = val + (typeof val === 'string' ? '' : 'px');\n    }\n  }\n}\nfunction matrix(el, selfOnly) {\n  var appliedTransforms = '';\n  if (typeof el === 'string') {\n    appliedTransforms = el;\n  } else {\n    do {\n      var transform = css(el, 'transform');\n      if (transform && transform !== 'none') {\n        appliedTransforms = transform + ' ' + appliedTransforms;\n      }\n      /* jshint boss:true */\n    } while (!selfOnly && (el = el.parentNode));\n  }\n  var matrixFn = window.DOMMatrix || window.WebKitCSSMatrix || window.CSSMatrix || window.MSCSSMatrix;\n  /*jshint -W056 */\n  return matrixFn && new matrixFn(appliedTransforms);\n}\nfunction find(ctx, tagName, iterator) {\n  if (ctx) {\n    var list = ctx.getElementsByTagName(tagName),\n      i = 0,\n      n = list.length;\n    if (iterator) {\n      for (; i < n; i++) {\n        iterator(list[i], i);\n      }\n    }\n    return list;\n  }\n  return [];\n}\nfunction getWindowScrollingElement() {\n  var scrollingElement = document.scrollingElement;\n  if (scrollingElement) {\n    return scrollingElement;\n  } else {\n    return document.documentElement;\n  }\n}\n\n/**\r\n * Returns the \"bounding client rect\" of given element\r\n * @param  {HTMLElement} el                       The element whose boundingClientRect is wanted\r\n * @param  {[Boolean]} relativeToContainingBlock  Whether the rect should be relative to the containing block of (including) the container\r\n * @param  {[Boolean]} relativeToNonStaticParent  Whether the rect should be relative to the relative parent of (including) the contaienr\r\n * @param  {[Boolean]} undoScale                  Whether the container's scale() should be undone\r\n * @param  {[HTMLElement]} container              The parent the element will be placed in\r\n * @return {Object}                               The boundingClientRect of el, with specified adjustments\r\n */\nfunction getRect(el, relativeToContainingBlock, relativeToNonStaticParent, undoScale, container) {\n  if (!el.getBoundingClientRect && el !== window) return;\n  var elRect, top, left, bottom, right, height, width;\n  if (el !== window && el.parentNode && el !== getWindowScrollingElement()) {\n    elRect = el.getBoundingClientRect();\n    top = elRect.top;\n    left = elRect.left;\n    bottom = elRect.bottom;\n    right = elRect.right;\n    height = elRect.height;\n    width = elRect.width;\n  } else {\n    top = 0;\n    left = 0;\n    bottom = window.innerHeight;\n    right = window.innerWidth;\n    height = window.innerHeight;\n    width = window.innerWidth;\n  }\n  if ((relativeToContainingBlock || relativeToNonStaticParent) && el !== window) {\n    // Adjust for translate()\n    container = container || el.parentNode;\n\n    // solves #1123 (see: https://stackoverflow.com/a/37953806/6088312)\n    // Not needed on <= IE11\n    if (!IE11OrLess) {\n      do {\n        if (container && container.getBoundingClientRect && (css(container, 'transform') !== 'none' || relativeToNonStaticParent && css(container, 'position') !== 'static')) {\n          var containerRect = container.getBoundingClientRect();\n\n          // Set relative to edges of padding box of container\n          top -= containerRect.top + parseInt(css(container, 'border-top-width'));\n          left -= containerRect.left + parseInt(css(container, 'border-left-width'));\n          bottom = top + elRect.height;\n          right = left + elRect.width;\n          break;\n        }\n        /* jshint boss:true */\n      } while (container = container.parentNode);\n    }\n  }\n  if (undoScale && el !== window) {\n    // Adjust for scale()\n    var elMatrix = matrix(container || el),\n      scaleX = elMatrix && elMatrix.a,\n      scaleY = elMatrix && elMatrix.d;\n    if (elMatrix) {\n      top /= scaleY;\n      left /= scaleX;\n      width /= scaleX;\n      height /= scaleY;\n      bottom = top + height;\n      right = left + width;\n    }\n  }\n  return {\n    top: top,\n    left: left,\n    bottom: bottom,\n    right: right,\n    width: width,\n    height: height\n  };\n}\n\n/**\r\n * Checks if a side of an element is scrolled past a side of its parents\r\n * @param  {HTMLElement}  el           The element who's side being scrolled out of view is in question\r\n * @param  {String}       elSide       Side of the element in question ('top', 'left', 'right', 'bottom')\r\n * @param  {String}       parentSide   Side of the parent in question ('top', 'left', 'right', 'bottom')\r\n * @return {HTMLElement}               The parent scroll element that the el's side is scrolled past, or null if there is no such element\r\n */\nfunction isScrolledPast(el, elSide, parentSide) {\n  var parent = getParentAutoScrollElement(el, true),\n    elSideVal = getRect(el)[elSide];\n\n  /* jshint boss:true */\n  while (parent) {\n    var parentSideVal = getRect(parent)[parentSide],\n      visible = void 0;\n    if (parentSide === 'top' || parentSide === 'left') {\n      visible = elSideVal >= parentSideVal;\n    } else {\n      visible = elSideVal <= parentSideVal;\n    }\n    if (!visible) return parent;\n    if (parent === getWindowScrollingElement()) break;\n    parent = getParentAutoScrollElement(parent, false);\n  }\n  return false;\n}\n\n/**\r\n * Gets nth child of el, ignoring hidden children, sortable's elements (does not ignore clone if it's visible)\r\n * and non-draggable elements\r\n * @param  {HTMLElement} el       The parent element\r\n * @param  {Number} childNum      The index of the child\r\n * @param  {Object} options       Parent Sortable's options\r\n * @return {HTMLElement}          The child at index childNum, or null if not found\r\n */\nfunction getChild(el, childNum, options, includeDragEl) {\n  var currentChild = 0,\n    i = 0,\n    children = el.children;\n  while (i < children.length) {\n    if (children[i].style.display !== 'none' && children[i] !== Sortable.ghost && (includeDragEl || children[i] !== Sortable.dragged) && closest(children[i], options.draggable, el, false)) {\n      if (currentChild === childNum) {\n        return children[i];\n      }\n      currentChild++;\n    }\n    i++;\n  }\n  return null;\n}\n\n/**\r\n * Gets the last child in the el, ignoring ghostEl or invisible elements (clones)\r\n * @param  {HTMLElement} el       Parent element\r\n * @param  {selector} selector    Any other elements that should be ignored\r\n * @return {HTMLElement}          The last child, ignoring ghostEl\r\n */\nfunction lastChild(el, selector) {\n  var last = el.lastElementChild;\n  while (last && (last === Sortable.ghost || css(last, 'display') === 'none' || selector && !matches(last, selector))) {\n    last = last.previousElementSibling;\n  }\n  return last || null;\n}\n\n/**\r\n * Returns the index of an element within its parent for a selected set of\r\n * elements\r\n * @param  {HTMLElement} el\r\n * @param  {selector} selector\r\n * @return {number}\r\n */\nfunction index(el, selector) {\n  var index = 0;\n  if (!el || !el.parentNode) {\n    return -1;\n  }\n\n  /* jshint boss:true */\n  while (el = el.previousElementSibling) {\n    if (el.nodeName.toUpperCase() !== 'TEMPLATE' && el !== Sortable.clone && (!selector || matches(el, selector))) {\n      index++;\n    }\n  }\n  return index;\n}\n\n/**\r\n * Returns the scroll offset of the given element, added with all the scroll offsets of parent elements.\r\n * The value is returned in real pixels.\r\n * @param  {HTMLElement} el\r\n * @return {Array}             Offsets in the format of [left, top]\r\n */\nfunction getRelativeScrollOffset(el) {\n  var offsetLeft = 0,\n    offsetTop = 0,\n    winScroller = getWindowScrollingElement();\n  if (el) {\n    do {\n      var elMatrix = matrix(el),\n        scaleX = elMatrix.a,\n        scaleY = elMatrix.d;\n      offsetLeft += el.scrollLeft * scaleX;\n      offsetTop += el.scrollTop * scaleY;\n    } while (el !== winScroller && (el = el.parentNode));\n  }\n  return [offsetLeft, offsetTop];\n}\n\n/**\r\n * Returns the index of the object within the given array\r\n * @param  {Array} arr   Array that may or may not hold the object\r\n * @param  {Object} obj  An object that has a key-value pair unique to and identical to a key-value pair in the object you want to find\r\n * @return {Number}      The index of the object in the array, or -1\r\n */\nfunction indexOfObject(arr, obj) {\n  for (var i in arr) {\n    if (!arr.hasOwnProperty(i)) continue;\n    for (var key in obj) {\n      if (obj.hasOwnProperty(key) && obj[key] === arr[i][key]) return Number(i);\n    }\n  }\n  return -1;\n}\nfunction getParentAutoScrollElement(el, includeSelf) {\n  // skip to window\n  if (!el || !el.getBoundingClientRect) return getWindowScrollingElement();\n  var elem = el;\n  var gotSelf = false;\n  do {\n    // we don't need to get elem css if it isn't even overflowing in the first place (performance)\n    if (elem.clientWidth < elem.scrollWidth || elem.clientHeight < elem.scrollHeight) {\n      var elemCSS = css(elem);\n      if (elem.clientWidth < elem.scrollWidth && (elemCSS.overflowX == 'auto' || elemCSS.overflowX == 'scroll') || elem.clientHeight < elem.scrollHeight && (elemCSS.overflowY == 'auto' || elemCSS.overflowY == 'scroll')) {\n        if (!elem.getBoundingClientRect || elem === document.body) return getWindowScrollingElement();\n        if (gotSelf || includeSelf) return elem;\n        gotSelf = true;\n      }\n    }\n    /* jshint boss:true */\n  } while (elem = elem.parentNode);\n  return getWindowScrollingElement();\n}\nfunction extend(dst, src) {\n  if (dst && src) {\n    for (var key in src) {\n      if (src.hasOwnProperty(key)) {\n        dst[key] = src[key];\n      }\n    }\n  }\n  return dst;\n}\nfunction isRectEqual(rect1, rect2) {\n  return Math.round(rect1.top) === Math.round(rect2.top) && Math.round(rect1.left) === Math.round(rect2.left) && Math.round(rect1.height) === Math.round(rect2.height) && Math.round(rect1.width) === Math.round(rect2.width);\n}\nvar _throttleTimeout;\nfunction throttle(callback, ms) {\n  return function () {\n    if (!_throttleTimeout) {\n      var args = arguments,\n        _this = this;\n      if (args.length === 1) {\n        callback.call(_this, args[0]);\n      } else {\n        callback.apply(_this, args);\n      }\n      _throttleTimeout = setTimeout(function () {\n        _throttleTimeout = void 0;\n      }, ms);\n    }\n  };\n}\nfunction cancelThrottle() {\n  clearTimeout(_throttleTimeout);\n  _throttleTimeout = void 0;\n}\nfunction scrollBy(el, x, y) {\n  el.scrollLeft += x;\n  el.scrollTop += y;\n}\nfunction clone(el) {\n  var Polymer = window.Polymer;\n  var $ = window.jQuery || window.Zepto;\n  if (Polymer && Polymer.dom) {\n    return Polymer.dom(el).cloneNode(true);\n  } else if ($) {\n    return $(el).clone(true)[0];\n  } else {\n    return el.cloneNode(true);\n  }\n}\nfunction setRect(el, rect) {\n  css(el, 'position', 'absolute');\n  css(el, 'top', rect.top);\n  css(el, 'left', rect.left);\n  css(el, 'width', rect.width);\n  css(el, 'height', rect.height);\n}\nfunction unsetRect(el) {\n  css(el, 'position', '');\n  css(el, 'top', '');\n  css(el, 'left', '');\n  css(el, 'width', '');\n  css(el, 'height', '');\n}\nfunction getChildContainingRectFromElement(container, options, ghostEl) {\n  var rect = {};\n  Array.from(container.children).forEach(function (child) {\n    var _rect$left, _rect$top, _rect$right, _rect$bottom;\n    if (!closest(child, options.draggable, container, false) || child.animated || child === ghostEl) return;\n    var childRect = getRect(child);\n    rect.left = Math.min((_rect$left = rect.left) !== null && _rect$left !== void 0 ? _rect$left : Infinity, childRect.left);\n    rect.top = Math.min((_rect$top = rect.top) !== null && _rect$top !== void 0 ? _rect$top : Infinity, childRect.top);\n    rect.right = Math.max((_rect$right = rect.right) !== null && _rect$right !== void 0 ? _rect$right : -Infinity, childRect.right);\n    rect.bottom = Math.max((_rect$bottom = rect.bottom) !== null && _rect$bottom !== void 0 ? _rect$bottom : -Infinity, childRect.bottom);\n  });\n  rect.width = rect.right - rect.left;\n  rect.height = rect.bottom - rect.top;\n  rect.x = rect.left;\n  rect.y = rect.top;\n  return rect;\n}\nvar expando = 'Sortable' + new Date().getTime();\nfunction AnimationStateManager() {\n  var animationStates = [],\n    animationCallbackId;\n  return {\n    captureAnimationState: function captureAnimationState() {\n      animationStates = [];\n      if (!this.options.animation) return;\n      var children = [].slice.call(this.el.children);\n      children.forEach(function (child) {\n        if (css(child, 'display') === 'none' || child === Sortable.ghost) return;\n        animationStates.push({\n          target: child,\n          rect: getRect(child)\n        });\n        var fromRect = _objectSpread2({}, animationStates[animationStates.length - 1].rect);\n\n        // If animating: compensate for current animation\n        if (child.thisAnimationDuration) {\n          var childMatrix = matrix(child, true);\n          if (childMatrix) {\n            fromRect.top -= childMatrix.f;\n            fromRect.left -= childMatrix.e;\n          }\n        }\n        child.fromRect = fromRect;\n      });\n    },\n    addAnimationState: function addAnimationState(state) {\n      animationStates.push(state);\n    },\n    removeAnimationState: function removeAnimationState(target) {\n      animationStates.splice(indexOfObject(animationStates, {\n        target: target\n      }), 1);\n    },\n    animateAll: function animateAll(callback) {\n      var _this = this;\n      if (!this.options.animation) {\n        clearTimeout(animationCallbackId);\n        if (typeof callback === 'function') callback();\n        return;\n      }\n      var animating = false,\n        animationTime = 0;\n      animationStates.forEach(function (state) {\n        var time = 0,\n          target = state.target,\n          fromRect = target.fromRect,\n          toRect = getRect(target),\n          prevFromRect = target.prevFromRect,\n          prevToRect = target.prevToRect,\n          animatingRect = state.rect,\n          targetMatrix = matrix(target, true);\n        if (targetMatrix) {\n          // Compensate for current animation\n          toRect.top -= targetMatrix.f;\n          toRect.left -= targetMatrix.e;\n        }\n        target.toRect = toRect;\n        if (target.thisAnimationDuration) {\n          // Could also check if animatingRect is between fromRect and toRect\n          if (isRectEqual(prevFromRect, toRect) && !isRectEqual(fromRect, toRect) &&\n          // Make sure animatingRect is on line between toRect & fromRect\n          (animatingRect.top - toRect.top) / (animatingRect.left - toRect.left) === (fromRect.top - toRect.top) / (fromRect.left - toRect.left)) {\n            // If returning to same place as started from animation and on same axis\n            time = calculateRealTime(animatingRect, prevFromRect, prevToRect, _this.options);\n          }\n        }\n\n        // if fromRect != toRect: animate\n        if (!isRectEqual(toRect, fromRect)) {\n          target.prevFromRect = fromRect;\n          target.prevToRect = toRect;\n          if (!time) {\n            time = _this.options.animation;\n          }\n          _this.animate(target, animatingRect, toRect, time);\n        }\n        if (time) {\n          animating = true;\n          animationTime = Math.max(animationTime, time);\n          clearTimeout(target.animationResetTimer);\n          target.animationResetTimer = setTimeout(function () {\n            target.animationTime = 0;\n            target.prevFromRect = null;\n            target.fromRect = null;\n            target.prevToRect = null;\n            target.thisAnimationDuration = null;\n          }, time);\n          target.thisAnimationDuration = time;\n        }\n      });\n      clearTimeout(animationCallbackId);\n      if (!animating) {\n        if (typeof callback === 'function') callback();\n      } else {\n        animationCallbackId = setTimeout(function () {\n          if (typeof callback === 'function') callback();\n        }, animationTime);\n      }\n      animationStates = [];\n    },\n    animate: function animate(target, currentRect, toRect, duration) {\n      if (duration) {\n        css(target, 'transition', '');\n        css(target, 'transform', '');\n        var elMatrix = matrix(this.el),\n          scaleX = elMatrix && elMatrix.a,\n          scaleY = elMatrix && elMatrix.d,\n          translateX = (currentRect.left - toRect.left) / (scaleX || 1),\n          translateY = (currentRect.top - toRect.top) / (scaleY || 1);\n        target.animatingX = !!translateX;\n        target.animatingY = !!translateY;\n        css(target, 'transform', 'translate3d(' + translateX + 'px,' + translateY + 'px,0)');\n        this.forRepaintDummy = repaint(target); // repaint\n\n        css(target, 'transition', 'transform ' + duration + 'ms' + (this.options.easing ? ' ' + this.options.easing : ''));\n        css(target, 'transform', 'translate3d(0,0,0)');\n        typeof target.animated === 'number' && clearTimeout(target.animated);\n        target.animated = setTimeout(function () {\n          css(target, 'transition', '');\n          css(target, 'transform', '');\n          target.animated = false;\n          target.animatingX = false;\n          target.animatingY = false;\n        }, duration);\n      }\n    }\n  };\n}\nfunction repaint(target) {\n  return target.offsetWidth;\n}\nfunction calculateRealTime(animatingRect, fromRect, toRect, options) {\n  return Math.sqrt(Math.pow(fromRect.top - animatingRect.top, 2) + Math.pow(fromRect.left - animatingRect.left, 2)) / Math.sqrt(Math.pow(fromRect.top - toRect.top, 2) + Math.pow(fromRect.left - toRect.left, 2)) * options.animation;\n}\nvar plugins = [];\nvar defaults = {\n  initializeByDefault: true\n};\nvar PluginManager = {\n  mount: function mount(plugin) {\n    // Set default static properties\n    for (var option in defaults) {\n      if (defaults.hasOwnProperty(option) && !(option in plugin)) {\n        plugin[option] = defaults[option];\n      }\n    }\n    plugins.forEach(function (p) {\n      if (p.pluginName === plugin.pluginName) {\n        throw \"Sortable: Cannot mount plugin \".concat(plugin.pluginName, \" more than once\");\n      }\n    });\n    plugins.push(plugin);\n  },\n  pluginEvent: function pluginEvent(eventName, sortable, evt) {\n    var _this = this;\n    this.eventCanceled = false;\n    evt.cancel = function () {\n      _this.eventCanceled = true;\n    };\n    var eventNameGlobal = eventName + 'Global';\n    plugins.forEach(function (plugin) {\n      if (!sortable[plugin.pluginName]) return;\n      // Fire global events if it exists in this sortable\n      if (sortable[plugin.pluginName][eventNameGlobal]) {\n        sortable[plugin.pluginName][eventNameGlobal](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n\n      // Only fire plugin event if plugin is enabled in this sortable,\n      // and plugin has event defined\n      if (sortable.options[plugin.pluginName] && sortable[plugin.pluginName][eventName]) {\n        sortable[plugin.pluginName][eventName](_objectSpread2({\n          sortable: sortable\n        }, evt));\n      }\n    });\n  },\n  initializePlugins: function initializePlugins(sortable, el, defaults, options) {\n    plugins.forEach(function (plugin) {\n      var pluginName = plugin.pluginName;\n      if (!sortable.options[pluginName] && !plugin.initializeByDefault) return;\n      var initialized = new plugin(sortable, el, sortable.options);\n      initialized.sortable = sortable;\n      initialized.options = sortable.options;\n      sortable[pluginName] = initialized;\n\n      // Add default options from plugin\n      _extends(defaults, initialized.defaults);\n    });\n    for (var option in sortable.options) {\n      if (!sortable.options.hasOwnProperty(option)) continue;\n      var modified = this.modifyOption(sortable, option, sortable.options[option]);\n      if (typeof modified !== 'undefined') {\n        sortable.options[option] = modified;\n      }\n    }\n  },\n  getEventProperties: function getEventProperties(name, sortable) {\n    var eventProperties = {};\n    plugins.forEach(function (plugin) {\n      if (typeof plugin.eventProperties !== 'function') return;\n      _extends(eventProperties, plugin.eventProperties.call(sortable[plugin.pluginName], name));\n    });\n    return eventProperties;\n  },\n  modifyOption: function modifyOption(sortable, name, value) {\n    var modifiedValue;\n    plugins.forEach(function (plugin) {\n      // Plugin must exist on the Sortable\n      if (!sortable[plugin.pluginName]) return;\n\n      // If static option listener exists for this option, call in the context of the Sortable's instance of this plugin\n      if (plugin.optionListeners && typeof plugin.optionListeners[name] === 'function') {\n        modifiedValue = plugin.optionListeners[name].call(sortable[plugin.pluginName], value);\n      }\n    });\n    return modifiedValue;\n  }\n};\nfunction dispatchEvent(_ref) {\n  var sortable = _ref.sortable,\n    rootEl = _ref.rootEl,\n    name = _ref.name,\n    targetEl = _ref.targetEl,\n    cloneEl = _ref.cloneEl,\n    toEl = _ref.toEl,\n    fromEl = _ref.fromEl,\n    oldIndex = _ref.oldIndex,\n    newIndex = _ref.newIndex,\n    oldDraggableIndex = _ref.oldDraggableIndex,\n    newDraggableIndex = _ref.newDraggableIndex,\n    originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    extraEventProperties = _ref.extraEventProperties;\n  sortable = sortable || rootEl && rootEl[expando];\n  if (!sortable) return;\n  var evt,\n    options = sortable.options,\n    onName = 'on' + name.charAt(0).toUpperCase() + name.substr(1);\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent(name, {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent(name, true, true);\n  }\n  evt.to = toEl || rootEl;\n  evt.from = fromEl || rootEl;\n  evt.item = targetEl || rootEl;\n  evt.clone = cloneEl;\n  evt.oldIndex = oldIndex;\n  evt.newIndex = newIndex;\n  evt.oldDraggableIndex = oldDraggableIndex;\n  evt.newDraggableIndex = newDraggableIndex;\n  evt.originalEvent = originalEvent;\n  evt.pullMode = putSortable ? putSortable.lastPutMode : undefined;\n  var allEventProperties = _objectSpread2(_objectSpread2({}, extraEventProperties), PluginManager.getEventProperties(name, sortable));\n  for (var option in allEventProperties) {\n    evt[option] = allEventProperties[option];\n  }\n  if (rootEl) {\n    rootEl.dispatchEvent(evt);\n  }\n  if (options[onName]) {\n    options[onName].call(sortable, evt);\n  }\n}\nvar _excluded = [\"evt\"];\nvar pluginEvent = function pluginEvent(eventName, sortable) {\n  var _ref = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {},\n    originalEvent = _ref.evt,\n    data = _objectWithoutProperties(_ref, _excluded);\n  PluginManager.pluginEvent.bind(Sortable)(eventName, sortable, _objectSpread2({\n    dragEl: dragEl,\n    parentEl: parentEl,\n    ghostEl: ghostEl,\n    rootEl: rootEl,\n    nextEl: nextEl,\n    lastDownEl: lastDownEl,\n    cloneEl: cloneEl,\n    cloneHidden: cloneHidden,\n    dragStarted: moved,\n    putSortable: putSortable,\n    activeSortable: Sortable.active,\n    originalEvent: originalEvent,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex,\n    hideGhostForTarget: _hideGhostForTarget,\n    unhideGhostForTarget: _unhideGhostForTarget,\n    cloneNowHidden: function cloneNowHidden() {\n      cloneHidden = true;\n    },\n    cloneNowShown: function cloneNowShown() {\n      cloneHidden = false;\n    },\n    dispatchSortableEvent: function dispatchSortableEvent(name) {\n      _dispatchEvent({\n        sortable: sortable,\n        name: name,\n        originalEvent: originalEvent\n      });\n    }\n  }, data));\n};\nfunction _dispatchEvent(info) {\n  dispatchEvent(_objectSpread2({\n    putSortable: putSortable,\n    cloneEl: cloneEl,\n    targetEl: dragEl,\n    rootEl: rootEl,\n    oldIndex: oldIndex,\n    oldDraggableIndex: oldDraggableIndex,\n    newIndex: newIndex,\n    newDraggableIndex: newDraggableIndex\n  }, info));\n}\nvar dragEl,\n  parentEl,\n  ghostEl,\n  rootEl,\n  nextEl,\n  lastDownEl,\n  cloneEl,\n  cloneHidden,\n  oldIndex,\n  newIndex,\n  oldDraggableIndex,\n  newDraggableIndex,\n  activeGroup,\n  putSortable,\n  awaitingDragStarted = false,\n  ignoreNextClick = false,\n  sortables = [],\n  tapEvt,\n  touchEvt,\n  lastDx,\n  lastDy,\n  tapDistanceLeft,\n  tapDistanceTop,\n  moved,\n  lastTarget,\n  lastDirection,\n  pastFirstInvertThresh = false,\n  isCircumstantialInvert = false,\n  targetMoveDistance,\n  // For positioning ghost absolutely\n  ghostRelativeParent,\n  ghostRelativeParentInitialScroll = [],\n  // (left, top)\n\n  _silent = false,\n  savedInputChecked = [];\n\n/** @const */\nvar documentExists = typeof document !== 'undefined',\n  PositionGhostAbsolutely = IOS,\n  CSSFloatProperty = Edge || IE11OrLess ? 'cssFloat' : 'float',\n  // This will not pass for IE9, because IE9 DnD only works on anchors\n  supportDraggable = documentExists && !ChromeForAndroid && !IOS && 'draggable' in document.createElement('div'),\n  supportCssPointerEvents = function () {\n    if (!documentExists) return;\n    // false when <= IE11\n    if (IE11OrLess) {\n      return false;\n    }\n    var el = document.createElement('x');\n    el.style.cssText = 'pointer-events:auto';\n    return el.style.pointerEvents === 'auto';\n  }(),\n  _detectDirection = function _detectDirection(el, options) {\n    var elCSS = css(el),\n      elWidth = parseInt(elCSS.width) - parseInt(elCSS.paddingLeft) - parseInt(elCSS.paddingRight) - parseInt(elCSS.borderLeftWidth) - parseInt(elCSS.borderRightWidth),\n      child1 = getChild(el, 0, options),\n      child2 = getChild(el, 1, options),\n      firstChildCSS = child1 && css(child1),\n      secondChildCSS = child2 && css(child2),\n      firstChildWidth = firstChildCSS && parseInt(firstChildCSS.marginLeft) + parseInt(firstChildCSS.marginRight) + getRect(child1).width,\n      secondChildWidth = secondChildCSS && parseInt(secondChildCSS.marginLeft) + parseInt(secondChildCSS.marginRight) + getRect(child2).width;\n    if (elCSS.display === 'flex') {\n      return elCSS.flexDirection === 'column' || elCSS.flexDirection === 'column-reverse' ? 'vertical' : 'horizontal';\n    }\n    if (elCSS.display === 'grid') {\n      return elCSS.gridTemplateColumns.split(' ').length <= 1 ? 'vertical' : 'horizontal';\n    }\n    if (child1 && firstChildCSS[\"float\"] && firstChildCSS[\"float\"] !== 'none') {\n      var touchingSideChild2 = firstChildCSS[\"float\"] === 'left' ? 'left' : 'right';\n      return child2 && (secondChildCSS.clear === 'both' || secondChildCSS.clear === touchingSideChild2) ? 'vertical' : 'horizontal';\n    }\n    return child1 && (firstChildCSS.display === 'block' || firstChildCSS.display === 'flex' || firstChildCSS.display === 'table' || firstChildCSS.display === 'grid' || firstChildWidth >= elWidth && elCSS[CSSFloatProperty] === 'none' || child2 && elCSS[CSSFloatProperty] === 'none' && firstChildWidth + secondChildWidth > elWidth) ? 'vertical' : 'horizontal';\n  },\n  _dragElInRowColumn = function _dragElInRowColumn(dragRect, targetRect, vertical) {\n    var dragElS1Opp = vertical ? dragRect.left : dragRect.top,\n      dragElS2Opp = vertical ? dragRect.right : dragRect.bottom,\n      dragElOppLength = vertical ? dragRect.width : dragRect.height,\n      targetS1Opp = vertical ? targetRect.left : targetRect.top,\n      targetS2Opp = vertical ? targetRect.right : targetRect.bottom,\n      targetOppLength = vertical ? targetRect.width : targetRect.height;\n    return dragElS1Opp === targetS1Opp || dragElS2Opp === targetS2Opp || dragElS1Opp + dragElOppLength / 2 === targetS1Opp + targetOppLength / 2;\n  },\n  /**\r\n   * Detects first nearest empty sortable to X and Y position using emptyInsertThreshold.\r\n   * @param  {Number} x      X position\r\n   * @param  {Number} y      Y position\r\n   * @return {HTMLElement}   Element of the first found nearest Sortable\r\n   */\n  _detectNearestEmptySortable = function _detectNearestEmptySortable(x, y) {\n    var ret;\n    sortables.some(function (sortable) {\n      var threshold = sortable[expando].options.emptyInsertThreshold;\n      if (!threshold || lastChild(sortable)) return;\n      var rect = getRect(sortable),\n        insideHorizontally = x >= rect.left - threshold && x <= rect.right + threshold,\n        insideVertically = y >= rect.top - threshold && y <= rect.bottom + threshold;\n      if (insideHorizontally && insideVertically) {\n        return ret = sortable;\n      }\n    });\n    return ret;\n  },\n  _prepareGroup = function _prepareGroup(options) {\n    function toFn(value, pull) {\n      return function (to, from, dragEl, evt) {\n        var sameGroup = to.options.group.name && from.options.group.name && to.options.group.name === from.options.group.name;\n        if (value == null && (pull || sameGroup)) {\n          // Default pull value\n          // Default pull and put value if same group\n          return true;\n        } else if (value == null || value === false) {\n          return false;\n        } else if (pull && value === 'clone') {\n          return value;\n        } else if (typeof value === 'function') {\n          return toFn(value(to, from, dragEl, evt), pull)(to, from, dragEl, evt);\n        } else {\n          var otherGroup = (pull ? to : from).options.group.name;\n          return value === true || typeof value === 'string' && value === otherGroup || value.join && value.indexOf(otherGroup) > -1;\n        }\n      };\n    }\n    var group = {};\n    var originalGroup = options.group;\n    if (!originalGroup || _typeof(originalGroup) != 'object') {\n      originalGroup = {\n        name: originalGroup\n      };\n    }\n    group.name = originalGroup.name;\n    group.checkPull = toFn(originalGroup.pull, true);\n    group.checkPut = toFn(originalGroup.put);\n    group.revertClone = originalGroup.revertClone;\n    options.group = group;\n  },\n  _hideGhostForTarget = function _hideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', 'none');\n    }\n  },\n  _unhideGhostForTarget = function _unhideGhostForTarget() {\n    if (!supportCssPointerEvents && ghostEl) {\n      css(ghostEl, 'display', '');\n    }\n  };\n\n// #1184 fix - Prevent click event on fallback if dragged but item not changed position\nif (documentExists && !ChromeForAndroid) {\n  document.addEventListener('click', function (evt) {\n    if (ignoreNextClick) {\n      evt.preventDefault();\n      evt.stopPropagation && evt.stopPropagation();\n      evt.stopImmediatePropagation && evt.stopImmediatePropagation();\n      ignoreNextClick = false;\n      return false;\n    }\n  }, true);\n}\nvar nearestEmptyInsertDetectEvent = function nearestEmptyInsertDetectEvent(evt) {\n  if (dragEl) {\n    evt = evt.touches ? evt.touches[0] : evt;\n    var nearest = _detectNearestEmptySortable(evt.clientX, evt.clientY);\n    if (nearest) {\n      // Create imitation event\n      var event = {};\n      for (var i in evt) {\n        if (evt.hasOwnProperty(i)) {\n          event[i] = evt[i];\n        }\n      }\n      event.target = event.rootEl = nearest;\n      event.preventDefault = void 0;\n      event.stopPropagation = void 0;\n      nearest[expando]._onDragOver(event);\n    }\n  }\n};\nvar _checkOutsideTargetEl = function _checkOutsideTargetEl(evt) {\n  if (dragEl) {\n    dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n  }\n};\n\n/**\r\n * @class  Sortable\r\n * @param  {HTMLElement}  el\r\n * @param  {Object}       [options]\r\n */\nfunction Sortable(el, options) {\n  if (!(el && el.nodeType && el.nodeType === 1)) {\n    throw \"Sortable: `el` must be an HTMLElement, not \".concat({}.toString.call(el));\n  }\n  this.el = el; // root element\n  this.options = options = _extends({}, options);\n\n  // Export instance\n  el[expando] = this;\n  var defaults = {\n    group: null,\n    sort: true,\n    disabled: false,\n    store: null,\n    handle: null,\n    draggable: /^[uo]l$/i.test(el.nodeName) ? '>li' : '>*',\n    swapThreshold: 1,\n    // percentage; 0 <= x <= 1\n    invertSwap: false,\n    // invert always\n    invertedSwapThreshold: null,\n    // will be set to same as swapThreshold if default\n    removeCloneOnHide: true,\n    direction: function direction() {\n      return _detectDirection(el, this.options);\n    },\n    ghostClass: 'sortable-ghost',\n    chosenClass: 'sortable-chosen',\n    dragClass: 'sortable-drag',\n    ignore: 'a, img',\n    filter: null,\n    preventOnFilter: true,\n    animation: 0,\n    easing: null,\n    setData: function setData(dataTransfer, dragEl) {\n      dataTransfer.setData('Text', dragEl.textContent);\n    },\n    dropBubble: false,\n    dragoverBubble: false,\n    dataIdAttr: 'data-id',\n    delay: 0,\n    delayOnTouchOnly: false,\n    touchStartThreshold: (Number.parseInt ? Number : window).parseInt(window.devicePixelRatio, 10) || 1,\n    forceFallback: false,\n    fallbackClass: 'sortable-fallback',\n    fallbackOnBody: false,\n    fallbackTolerance: 0,\n    fallbackOffset: {\n      x: 0,\n      y: 0\n    },\n    supportPointer: Sortable.supportPointer !== false && 'PointerEvent' in window && !Safari,\n    emptyInsertThreshold: 5\n  };\n  PluginManager.initializePlugins(this, el, defaults);\n\n  // Set default options\n  for (var name in defaults) {\n    !(name in options) && (options[name] = defaults[name]);\n  }\n  _prepareGroup(options);\n\n  // Bind all private methods\n  for (var fn in this) {\n    if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n      this[fn] = this[fn].bind(this);\n    }\n  }\n\n  // Setup drag mode\n  this.nativeDraggable = options.forceFallback ? false : supportDraggable;\n  if (this.nativeDraggable) {\n    // Touch start threshold cannot be greater than the native dragstart threshold\n    this.options.touchStartThreshold = 1;\n  }\n\n  // Bind events\n  if (options.supportPointer) {\n    on(el, 'pointerdown', this._onTapStart);\n  } else {\n    on(el, 'mousedown', this._onTapStart);\n    on(el, 'touchstart', this._onTapStart);\n  }\n  if (this.nativeDraggable) {\n    on(el, 'dragover', this);\n    on(el, 'dragenter', this);\n  }\n  sortables.push(this.el);\n\n  // Restore sorting\n  options.store && options.store.get && this.sort(options.store.get(this) || []);\n\n  // Add animation state manager\n  _extends(this, AnimationStateManager());\n}\nSortable.prototype = /** @lends Sortable.prototype */{\n  constructor: Sortable,\n  _isOutsideThisEl: function _isOutsideThisEl(target) {\n    if (!this.el.contains(target) && target !== this.el) {\n      lastTarget = null;\n    }\n  },\n  _getDirection: function _getDirection(evt, target) {\n    return typeof this.options.direction === 'function' ? this.options.direction.call(this, evt, target, dragEl) : this.options.direction;\n  },\n  _onTapStart: function _onTapStart( /** Event|TouchEvent */evt) {\n    if (!evt.cancelable) return;\n    var _this = this,\n      el = this.el,\n      options = this.options,\n      preventOnFilter = options.preventOnFilter,\n      type = evt.type,\n      touch = evt.touches && evt.touches[0] || evt.pointerType && evt.pointerType === 'touch' && evt,\n      target = (touch || evt).target,\n      originalTarget = evt.target.shadowRoot && (evt.path && evt.path[0] || evt.composedPath && evt.composedPath()[0]) || target,\n      filter = options.filter;\n    _saveInputCheckedState(el);\n\n    // Don't trigger start event when an element is been dragged, otherwise the evt.oldindex always wrong when set option.group.\n    if (dragEl) {\n      return;\n    }\n    if (/mousedown|pointerdown/.test(type) && evt.button !== 0 || options.disabled) {\n      return; // only left button and enabled\n    }\n\n    // cancel dnd if original target is content editable\n    if (originalTarget.isContentEditable) {\n      return;\n    }\n\n    // Safari ignores further event handling after mousedown\n    if (!this.nativeDraggable && Safari && target && target.tagName.toUpperCase() === 'SELECT') {\n      return;\n    }\n    target = closest(target, options.draggable, el, false);\n    if (target && target.animated) {\n      return;\n    }\n    if (lastDownEl === target) {\n      // Ignoring duplicate `down`\n      return;\n    }\n\n    // Get the index of the dragged element within its parent\n    oldIndex = index(target);\n    oldDraggableIndex = index(target, options.draggable);\n\n    // Check filter\n    if (typeof filter === 'function') {\n      if (filter.call(this, evt, target, this)) {\n        _dispatchEvent({\n          sortable: _this,\n          rootEl: originalTarget,\n          name: 'filter',\n          targetEl: target,\n          toEl: el,\n          fromEl: el\n        });\n        pluginEvent('filter', _this, {\n          evt: evt\n        });\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    } else if (filter) {\n      filter = filter.split(',').some(function (criteria) {\n        criteria = closest(originalTarget, criteria.trim(), el, false);\n        if (criteria) {\n          _dispatchEvent({\n            sortable: _this,\n            rootEl: criteria,\n            name: 'filter',\n            targetEl: target,\n            fromEl: el,\n            toEl: el\n          });\n          pluginEvent('filter', _this, {\n            evt: evt\n          });\n          return true;\n        }\n      });\n      if (filter) {\n        preventOnFilter && evt.cancelable && evt.preventDefault();\n        return; // cancel dnd\n      }\n    }\n    if (options.handle && !closest(originalTarget, options.handle, el, false)) {\n      return;\n    }\n\n    // Prepare `dragstart`\n    this._prepareDragStart(evt, touch, target);\n  },\n  _prepareDragStart: function _prepareDragStart( /** Event */evt, /** Touch */touch, /** HTMLElement */target) {\n    var _this = this,\n      el = _this.el,\n      options = _this.options,\n      ownerDocument = el.ownerDocument,\n      dragStartFn;\n    if (target && !dragEl && target.parentNode === el) {\n      var dragRect = getRect(target);\n      rootEl = el;\n      dragEl = target;\n      parentEl = dragEl.parentNode;\n      nextEl = dragEl.nextSibling;\n      lastDownEl = target;\n      activeGroup = options.group;\n      Sortable.dragged = dragEl;\n      tapEvt = {\n        target: dragEl,\n        clientX: (touch || evt).clientX,\n        clientY: (touch || evt).clientY\n      };\n      tapDistanceLeft = tapEvt.clientX - dragRect.left;\n      tapDistanceTop = tapEvt.clientY - dragRect.top;\n      this._lastX = (touch || evt).clientX;\n      this._lastY = (touch || evt).clientY;\n      dragEl.style['will-change'] = 'all';\n      dragStartFn = function dragStartFn() {\n        pluginEvent('delayEnded', _this, {\n          evt: evt\n        });\n        if (Sortable.eventCanceled) {\n          _this._onDrop();\n          return;\n        }\n        // Delayed drag has been triggered\n        // we can re-enable the events: touchmove/mousemove\n        _this._disableDelayedDragEvents();\n        if (!FireFox && _this.nativeDraggable) {\n          dragEl.draggable = true;\n        }\n\n        // Bind the events: dragstart/dragend\n        _this._triggerDragStart(evt, touch);\n\n        // Drag start event\n        _dispatchEvent({\n          sortable: _this,\n          name: 'choose',\n          originalEvent: evt\n        });\n\n        // Chosen item\n        toggleClass(dragEl, options.chosenClass, true);\n      };\n\n      // Disable \"draggable\"\n      options.ignore.split(',').forEach(function (criteria) {\n        find(dragEl, criteria.trim(), _disableDraggable);\n      });\n      on(ownerDocument, 'dragover', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mousemove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'touchmove', nearestEmptyInsertDetectEvent);\n      on(ownerDocument, 'mouseup', _this._onDrop);\n      on(ownerDocument, 'touchend', _this._onDrop);\n      on(ownerDocument, 'touchcancel', _this._onDrop);\n\n      // Make dragEl draggable (must be before delay for FireFox)\n      if (FireFox && this.nativeDraggable) {\n        this.options.touchStartThreshold = 4;\n        dragEl.draggable = true;\n      }\n      pluginEvent('delayStart', this, {\n        evt: evt\n      });\n\n      // Delay is impossible for native DnD in Edge or IE\n      if (options.delay && (!options.delayOnTouchOnly || touch) && (!this.nativeDraggable || !(Edge || IE11OrLess))) {\n        if (Sortable.eventCanceled) {\n          this._onDrop();\n          return;\n        }\n        // If the user moves the pointer or let go the click or touch\n        // before the delay has been reached:\n        // disable the delayed drag\n        on(ownerDocument, 'mouseup', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchend', _this._disableDelayedDrag);\n        on(ownerDocument, 'touchcancel', _this._disableDelayedDrag);\n        on(ownerDocument, 'mousemove', _this._delayedDragTouchMoveHandler);\n        on(ownerDocument, 'touchmove', _this._delayedDragTouchMoveHandler);\n        options.supportPointer && on(ownerDocument, 'pointermove', _this._delayedDragTouchMoveHandler);\n        _this._dragStartTimer = setTimeout(dragStartFn, options.delay);\n      } else {\n        dragStartFn();\n      }\n    }\n  },\n  _delayedDragTouchMoveHandler: function _delayedDragTouchMoveHandler( /** TouchEvent|PointerEvent **/e) {\n    var touch = e.touches ? e.touches[0] : e;\n    if (Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) >= Math.floor(this.options.touchStartThreshold / (this.nativeDraggable && window.devicePixelRatio || 1))) {\n      this._disableDelayedDrag();\n    }\n  },\n  _disableDelayedDrag: function _disableDelayedDrag() {\n    dragEl && _disableDraggable(dragEl);\n    clearTimeout(this._dragStartTimer);\n    this._disableDelayedDragEvents();\n  },\n  _disableDelayedDragEvents: function _disableDelayedDragEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._disableDelayedDrag);\n    off(ownerDocument, 'touchend', this._disableDelayedDrag);\n    off(ownerDocument, 'touchcancel', this._disableDelayedDrag);\n    off(ownerDocument, 'mousemove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'touchmove', this._delayedDragTouchMoveHandler);\n    off(ownerDocument, 'pointermove', this._delayedDragTouchMoveHandler);\n  },\n  _triggerDragStart: function _triggerDragStart( /** Event */evt, /** Touch */touch) {\n    touch = touch || evt.pointerType == 'touch' && evt;\n    if (!this.nativeDraggable || touch) {\n      if (this.options.supportPointer) {\n        on(document, 'pointermove', this._onTouchMove);\n      } else if (touch) {\n        on(document, 'touchmove', this._onTouchMove);\n      } else {\n        on(document, 'mousemove', this._onTouchMove);\n      }\n    } else {\n      on(dragEl, 'dragend', this);\n      on(rootEl, 'dragstart', this._onDragStart);\n    }\n    try {\n      if (document.selection) {\n        // Timeout neccessary for IE9\n        _nextTick(function () {\n          document.selection.empty();\n        });\n      } else {\n        window.getSelection().removeAllRanges();\n      }\n    } catch (err) {}\n  },\n  _dragStarted: function _dragStarted(fallback, evt) {\n    awaitingDragStarted = false;\n    if (rootEl && dragEl) {\n      pluginEvent('dragStarted', this, {\n        evt: evt\n      });\n      if (this.nativeDraggable) {\n        on(document, 'dragover', _checkOutsideTargetEl);\n      }\n      var options = this.options;\n\n      // Apply effect\n      !fallback && toggleClass(dragEl, options.dragClass, false);\n      toggleClass(dragEl, options.ghostClass, true);\n      Sortable.active = this;\n      fallback && this._appendGhost();\n\n      // Drag start event\n      _dispatchEvent({\n        sortable: this,\n        name: 'start',\n        originalEvent: evt\n      });\n    } else {\n      this._nulling();\n    }\n  },\n  _emulateDragOver: function _emulateDragOver() {\n    if (touchEvt) {\n      this._lastX = touchEvt.clientX;\n      this._lastY = touchEvt.clientY;\n      _hideGhostForTarget();\n      var target = document.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n      var parent = target;\n      while (target && target.shadowRoot) {\n        target = target.shadowRoot.elementFromPoint(touchEvt.clientX, touchEvt.clientY);\n        if (target === parent) break;\n        parent = target;\n      }\n      dragEl.parentNode[expando]._isOutsideThisEl(target);\n      if (parent) {\n        do {\n          if (parent[expando]) {\n            var inserted = void 0;\n            inserted = parent[expando]._onDragOver({\n              clientX: touchEvt.clientX,\n              clientY: touchEvt.clientY,\n              target: target,\n              rootEl: parent\n            });\n            if (inserted && !this.options.dragoverBubble) {\n              break;\n            }\n          }\n          target = parent; // store last element\n        }\n        /* jshint boss:true */ while (parent = parent.parentNode);\n      }\n      _unhideGhostForTarget();\n    }\n  },\n  _onTouchMove: function _onTouchMove( /**TouchEvent*/evt) {\n    if (tapEvt) {\n      var options = this.options,\n        fallbackTolerance = options.fallbackTolerance,\n        fallbackOffset = options.fallbackOffset,\n        touch = evt.touches ? evt.touches[0] : evt,\n        ghostMatrix = ghostEl && matrix(ghostEl, true),\n        scaleX = ghostEl && ghostMatrix && ghostMatrix.a,\n        scaleY = ghostEl && ghostMatrix && ghostMatrix.d,\n        relativeScrollOffset = PositionGhostAbsolutely && ghostRelativeParent && getRelativeScrollOffset(ghostRelativeParent),\n        dx = (touch.clientX - tapEvt.clientX + fallbackOffset.x) / (scaleX || 1) + (relativeScrollOffset ? relativeScrollOffset[0] - ghostRelativeParentInitialScroll[0] : 0) / (scaleX || 1),\n        dy = (touch.clientY - tapEvt.clientY + fallbackOffset.y) / (scaleY || 1) + (relativeScrollOffset ? relativeScrollOffset[1] - ghostRelativeParentInitialScroll[1] : 0) / (scaleY || 1);\n\n      // only set the status to dragging, when we are actually dragging\n      if (!Sortable.active && !awaitingDragStarted) {\n        if (fallbackTolerance && Math.max(Math.abs(touch.clientX - this._lastX), Math.abs(touch.clientY - this._lastY)) < fallbackTolerance) {\n          return;\n        }\n        this._onDragStart(evt, true);\n      }\n      if (ghostEl) {\n        if (ghostMatrix) {\n          ghostMatrix.e += dx - (lastDx || 0);\n          ghostMatrix.f += dy - (lastDy || 0);\n        } else {\n          ghostMatrix = {\n            a: 1,\n            b: 0,\n            c: 0,\n            d: 1,\n            e: dx,\n            f: dy\n          };\n        }\n        var cssMatrix = \"matrix(\".concat(ghostMatrix.a, \",\").concat(ghostMatrix.b, \",\").concat(ghostMatrix.c, \",\").concat(ghostMatrix.d, \",\").concat(ghostMatrix.e, \",\").concat(ghostMatrix.f, \")\");\n        css(ghostEl, 'webkitTransform', cssMatrix);\n        css(ghostEl, 'mozTransform', cssMatrix);\n        css(ghostEl, 'msTransform', cssMatrix);\n        css(ghostEl, 'transform', cssMatrix);\n        lastDx = dx;\n        lastDy = dy;\n        touchEvt = touch;\n      }\n      evt.cancelable && evt.preventDefault();\n    }\n  },\n  _appendGhost: function _appendGhost() {\n    // Bug if using scale(): https://stackoverflow.com/questions/2637058\n    // Not being adjusted for\n    if (!ghostEl) {\n      var container = this.options.fallbackOnBody ? document.body : rootEl,\n        rect = getRect(dragEl, true, PositionGhostAbsolutely, true, container),\n        options = this.options;\n\n      // Position absolutely\n      if (PositionGhostAbsolutely) {\n        // Get relatively positioned parent\n        ghostRelativeParent = container;\n        while (css(ghostRelativeParent, 'position') === 'static' && css(ghostRelativeParent, 'transform') === 'none' && ghostRelativeParent !== document) {\n          ghostRelativeParent = ghostRelativeParent.parentNode;\n        }\n        if (ghostRelativeParent !== document.body && ghostRelativeParent !== document.documentElement) {\n          if (ghostRelativeParent === document) ghostRelativeParent = getWindowScrollingElement();\n          rect.top += ghostRelativeParent.scrollTop;\n          rect.left += ghostRelativeParent.scrollLeft;\n        } else {\n          ghostRelativeParent = getWindowScrollingElement();\n        }\n        ghostRelativeParentInitialScroll = getRelativeScrollOffset(ghostRelativeParent);\n      }\n      ghostEl = dragEl.cloneNode(true);\n      toggleClass(ghostEl, options.ghostClass, false);\n      toggleClass(ghostEl, options.fallbackClass, true);\n      toggleClass(ghostEl, options.dragClass, true);\n      css(ghostEl, 'transition', '');\n      css(ghostEl, 'transform', '');\n      css(ghostEl, 'box-sizing', 'border-box');\n      css(ghostEl, 'margin', 0);\n      css(ghostEl, 'top', rect.top);\n      css(ghostEl, 'left', rect.left);\n      css(ghostEl, 'width', rect.width);\n      css(ghostEl, 'height', rect.height);\n      css(ghostEl, 'opacity', '0.8');\n      css(ghostEl, 'position', PositionGhostAbsolutely ? 'absolute' : 'fixed');\n      css(ghostEl, 'zIndex', '100000');\n      css(ghostEl, 'pointerEvents', 'none');\n      Sortable.ghost = ghostEl;\n      container.appendChild(ghostEl);\n\n      // Set transform-origin\n      css(ghostEl, 'transform-origin', tapDistanceLeft / parseInt(ghostEl.style.width) * 100 + '% ' + tapDistanceTop / parseInt(ghostEl.style.height) * 100 + '%');\n    }\n  },\n  _onDragStart: function _onDragStart( /**Event*/evt, /**boolean*/fallback) {\n    var _this = this;\n    var dataTransfer = evt.dataTransfer;\n    var options = _this.options;\n    pluginEvent('dragStart', this, {\n      evt: evt\n    });\n    if (Sortable.eventCanceled) {\n      this._onDrop();\n      return;\n    }\n    pluginEvent('setupClone', this);\n    if (!Sortable.eventCanceled) {\n      cloneEl = clone(dragEl);\n      cloneEl.removeAttribute(\"id\");\n      cloneEl.draggable = false;\n      cloneEl.style['will-change'] = '';\n      this._hideClone();\n      toggleClass(cloneEl, this.options.chosenClass, false);\n      Sortable.clone = cloneEl;\n    }\n\n    // #1143: IFrame support workaround\n    _this.cloneId = _nextTick(function () {\n      pluginEvent('clone', _this);\n      if (Sortable.eventCanceled) return;\n      if (!_this.options.removeCloneOnHide) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      }\n      _this._hideClone();\n      _dispatchEvent({\n        sortable: _this,\n        name: 'clone'\n      });\n    });\n    !fallback && toggleClass(dragEl, options.dragClass, true);\n\n    // Set proper drop events\n    if (fallback) {\n      ignoreNextClick = true;\n      _this._loopId = setInterval(_this._emulateDragOver, 50);\n    } else {\n      // Undo what was set in _prepareDragStart before drag started\n      off(document, 'mouseup', _this._onDrop);\n      off(document, 'touchend', _this._onDrop);\n      off(document, 'touchcancel', _this._onDrop);\n      if (dataTransfer) {\n        dataTransfer.effectAllowed = 'move';\n        options.setData && options.setData.call(_this, dataTransfer, dragEl);\n      }\n      on(document, 'drop', _this);\n\n      // #1276 fix:\n      css(dragEl, 'transform', 'translateZ(0)');\n    }\n    awaitingDragStarted = true;\n    _this._dragStartId = _nextTick(_this._dragStarted.bind(_this, fallback, evt));\n    on(document, 'selectstart', _this);\n    moved = true;\n    if (Safari) {\n      css(document.body, 'user-select', 'none');\n    }\n  },\n  // Returns true - if no further action is needed (either inserted or another condition)\n  _onDragOver: function _onDragOver( /**Event*/evt) {\n    var el = this.el,\n      target = evt.target,\n      dragRect,\n      targetRect,\n      revert,\n      options = this.options,\n      group = options.group,\n      activeSortable = Sortable.active,\n      isOwner = activeGroup === group,\n      canSort = options.sort,\n      fromSortable = putSortable || activeSortable,\n      vertical,\n      _this = this,\n      completedFired = false;\n    if (_silent) return;\n    function dragOverEvent(name, extra) {\n      pluginEvent(name, _this, _objectSpread2({\n        evt: evt,\n        isOwner: isOwner,\n        axis: vertical ? 'vertical' : 'horizontal',\n        revert: revert,\n        dragRect: dragRect,\n        targetRect: targetRect,\n        canSort: canSort,\n        fromSortable: fromSortable,\n        target: target,\n        completed: completed,\n        onMove: function onMove(target, after) {\n          return _onMove(rootEl, el, dragEl, dragRect, target, getRect(target), evt, after);\n        },\n        changed: changed\n      }, extra));\n    }\n\n    // Capture animation state\n    function capture() {\n      dragOverEvent('dragOverAnimationCapture');\n      _this.captureAnimationState();\n      if (_this !== fromSortable) {\n        fromSortable.captureAnimationState();\n      }\n    }\n\n    // Return invocation when dragEl is inserted (or completed)\n    function completed(insertion) {\n      dragOverEvent('dragOverCompleted', {\n        insertion: insertion\n      });\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        } else {\n          activeSortable._showClone(_this);\n        }\n        if (_this !== fromSortable) {\n          // Set ghost class to new sortable's ghost class\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : activeSortable.options.ghostClass, false);\n          toggleClass(dragEl, options.ghostClass, true);\n        }\n        if (putSortable !== _this && _this !== Sortable.active) {\n          putSortable = _this;\n        } else if (_this === Sortable.active && putSortable) {\n          putSortable = null;\n        }\n\n        // Animation\n        if (fromSortable === _this) {\n          _this._ignoreWhileAnimating = target;\n        }\n        _this.animateAll(function () {\n          dragOverEvent('dragOverAnimationComplete');\n          _this._ignoreWhileAnimating = null;\n        });\n        if (_this !== fromSortable) {\n          fromSortable.animateAll();\n          fromSortable._ignoreWhileAnimating = null;\n        }\n      }\n\n      // Null lastTarget if it is not inside a previously swapped element\n      if (target === dragEl && !dragEl.animated || target === el && !target.animated) {\n        lastTarget = null;\n      }\n\n      // no bubbling and not fallback\n      if (!options.dragoverBubble && !evt.rootEl && target !== document) {\n        dragEl.parentNode[expando]._isOutsideThisEl(evt.target);\n\n        // Do not detect for empty insert if already inserted\n        !insertion && nearestEmptyInsertDetectEvent(evt);\n      }\n      !options.dragoverBubble && evt.stopPropagation && evt.stopPropagation();\n      return completedFired = true;\n    }\n\n    // Call when dragEl has been inserted\n    function changed() {\n      newIndex = index(dragEl);\n      newDraggableIndex = index(dragEl, options.draggable);\n      _dispatchEvent({\n        sortable: _this,\n        name: 'change',\n        toEl: el,\n        newIndex: newIndex,\n        newDraggableIndex: newDraggableIndex,\n        originalEvent: evt\n      });\n    }\n    if (evt.preventDefault !== void 0) {\n      evt.cancelable && evt.preventDefault();\n    }\n    target = closest(target, options.draggable, el, true);\n    dragOverEvent('dragOver');\n    if (Sortable.eventCanceled) return completedFired;\n    if (dragEl.contains(evt.target) || target.animated && target.animatingX && target.animatingY || _this._ignoreWhileAnimating === target) {\n      return completed(false);\n    }\n    ignoreNextClick = false;\n    if (activeSortable && !options.disabled && (isOwner ? canSort || (revert = parentEl !== rootEl) // Reverting item into the original list\n    : putSortable === this || (this.lastPutMode = activeGroup.checkPull(this, activeSortable, dragEl, evt)) && group.checkPut(this, activeSortable, dragEl, evt))) {\n      vertical = this._getDirection(evt, target) === 'vertical';\n      dragRect = getRect(dragEl);\n      dragOverEvent('dragOverValid');\n      if (Sortable.eventCanceled) return completedFired;\n      if (revert) {\n        parentEl = rootEl; // actualization\n        capture();\n        this._hideClone();\n        dragOverEvent('revert');\n        if (!Sortable.eventCanceled) {\n          if (nextEl) {\n            rootEl.insertBefore(dragEl, nextEl);\n          } else {\n            rootEl.appendChild(dragEl);\n          }\n        }\n        return completed(true);\n      }\n      var elLastChild = lastChild(el, options.draggable);\n      if (!elLastChild || _ghostIsLast(evt, vertical, this) && !elLastChild.animated) {\n        // Insert to end of list\n\n        // If already at end of list: Do not insert\n        if (elLastChild === dragEl) {\n          return completed(false);\n        }\n\n        // if there is a last element, it is the target\n        if (elLastChild && el === evt.target) {\n          target = elLastChild;\n        }\n        if (target) {\n          targetRect = getRect(target);\n        }\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, !!target) !== false) {\n          capture();\n          if (elLastChild && elLastChild.nextSibling) {\n            // the last draggable element is not the last node\n            el.insertBefore(dragEl, elLastChild.nextSibling);\n          } else {\n            el.appendChild(dragEl);\n          }\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (elLastChild && _ghostIsFirst(evt, vertical, this)) {\n        // Insert to start of list\n        var firstChild = getChild(el, 0, options, true);\n        if (firstChild === dragEl) {\n          return completed(false);\n        }\n        target = firstChild;\n        targetRect = getRect(target);\n        if (_onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, false) !== false) {\n          capture();\n          el.insertBefore(dragEl, firstChild);\n          parentEl = el; // actualization\n\n          changed();\n          return completed(true);\n        }\n      } else if (target.parentNode === el) {\n        targetRect = getRect(target);\n        var direction = 0,\n          targetBeforeFirstSwap,\n          differentLevel = dragEl.parentNode !== el,\n          differentRowCol = !_dragElInRowColumn(dragEl.animated && dragEl.toRect || dragRect, target.animated && target.toRect || targetRect, vertical),\n          side1 = vertical ? 'top' : 'left',\n          scrolledPastTop = isScrolledPast(target, 'top', 'top') || isScrolledPast(dragEl, 'top', 'top'),\n          scrollBefore = scrolledPastTop ? scrolledPastTop.scrollTop : void 0;\n        if (lastTarget !== target) {\n          targetBeforeFirstSwap = targetRect[side1];\n          pastFirstInvertThresh = false;\n          isCircumstantialInvert = !differentRowCol && options.invertSwap || differentLevel;\n        }\n        direction = _getSwapDirection(evt, target, targetRect, vertical, differentRowCol ? 1 : options.swapThreshold, options.invertedSwapThreshold == null ? options.swapThreshold : options.invertedSwapThreshold, isCircumstantialInvert, lastTarget === target);\n        var sibling;\n        if (direction !== 0) {\n          // Check if target is beside dragEl in respective direction (ignoring hidden elements)\n          var dragIndex = index(dragEl);\n          do {\n            dragIndex -= direction;\n            sibling = parentEl.children[dragIndex];\n          } while (sibling && (css(sibling, 'display') === 'none' || sibling === ghostEl));\n        }\n        // If dragEl is already beside target: Do not insert\n        if (direction === 0 || sibling === target) {\n          return completed(false);\n        }\n        lastTarget = target;\n        lastDirection = direction;\n        var nextSibling = target.nextElementSibling,\n          after = false;\n        after = direction === 1;\n        var moveVector = _onMove(rootEl, el, dragEl, dragRect, target, targetRect, evt, after);\n        if (moveVector !== false) {\n          if (moveVector === 1 || moveVector === -1) {\n            after = moveVector === 1;\n          }\n          _silent = true;\n          setTimeout(_unsilent, 30);\n          capture();\n          if (after && !nextSibling) {\n            el.appendChild(dragEl);\n          } else {\n            target.parentNode.insertBefore(dragEl, after ? nextSibling : target);\n          }\n\n          // Undo chrome's scroll adjustment (has no effect on other browsers)\n          if (scrolledPastTop) {\n            scrollBy(scrolledPastTop, 0, scrollBefore - scrolledPastTop.scrollTop);\n          }\n          parentEl = dragEl.parentNode; // actualization\n\n          // must be done before animation\n          if (targetBeforeFirstSwap !== undefined && !isCircumstantialInvert) {\n            targetMoveDistance = Math.abs(targetBeforeFirstSwap - getRect(target)[side1]);\n          }\n          changed();\n          return completed(true);\n        }\n      }\n      if (el.contains(dragEl)) {\n        return completed(false);\n      }\n    }\n    return false;\n  },\n  _ignoreWhileAnimating: null,\n  _offMoveEvents: function _offMoveEvents() {\n    off(document, 'mousemove', this._onTouchMove);\n    off(document, 'touchmove', this._onTouchMove);\n    off(document, 'pointermove', this._onTouchMove);\n    off(document, 'dragover', nearestEmptyInsertDetectEvent);\n    off(document, 'mousemove', nearestEmptyInsertDetectEvent);\n    off(document, 'touchmove', nearestEmptyInsertDetectEvent);\n  },\n  _offUpEvents: function _offUpEvents() {\n    var ownerDocument = this.el.ownerDocument;\n    off(ownerDocument, 'mouseup', this._onDrop);\n    off(ownerDocument, 'touchend', this._onDrop);\n    off(ownerDocument, 'pointerup', this._onDrop);\n    off(ownerDocument, 'touchcancel', this._onDrop);\n    off(document, 'selectstart', this);\n  },\n  _onDrop: function _onDrop( /**Event*/evt) {\n    var el = this.el,\n      options = this.options;\n\n    // Get the index of the dragged element within its parent\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    pluginEvent('drop', this, {\n      evt: evt\n    });\n    parentEl = dragEl && dragEl.parentNode;\n\n    // Get again after plugin event\n    newIndex = index(dragEl);\n    newDraggableIndex = index(dragEl, options.draggable);\n    if (Sortable.eventCanceled) {\n      this._nulling();\n      return;\n    }\n    awaitingDragStarted = false;\n    isCircumstantialInvert = false;\n    pastFirstInvertThresh = false;\n    clearInterval(this._loopId);\n    clearTimeout(this._dragStartTimer);\n    _cancelNextTick(this.cloneId);\n    _cancelNextTick(this._dragStartId);\n\n    // Unbind events\n    if (this.nativeDraggable) {\n      off(document, 'drop', this);\n      off(el, 'dragstart', this._onDragStart);\n    }\n    this._offMoveEvents();\n    this._offUpEvents();\n    if (Safari) {\n      css(document.body, 'user-select', '');\n    }\n    css(dragEl, 'transform', '');\n    if (evt) {\n      if (moved) {\n        evt.cancelable && evt.preventDefault();\n        !options.dropBubble && evt.stopPropagation();\n      }\n      ghostEl && ghostEl.parentNode && ghostEl.parentNode.removeChild(ghostEl);\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        // Remove clone(s)\n        cloneEl && cloneEl.parentNode && cloneEl.parentNode.removeChild(cloneEl);\n      }\n      if (dragEl) {\n        if (this.nativeDraggable) {\n          off(dragEl, 'dragend', this);\n        }\n        _disableDraggable(dragEl);\n        dragEl.style['will-change'] = '';\n\n        // Remove classes\n        // ghostClass is added in dragStarted\n        if (moved && !awaitingDragStarted) {\n          toggleClass(dragEl, putSortable ? putSortable.options.ghostClass : this.options.ghostClass, false);\n        }\n        toggleClass(dragEl, this.options.chosenClass, false);\n\n        // Drag stop event\n        _dispatchEvent({\n          sortable: this,\n          name: 'unchoose',\n          toEl: parentEl,\n          newIndex: null,\n          newDraggableIndex: null,\n          originalEvent: evt\n        });\n        if (rootEl !== parentEl) {\n          if (newIndex >= 0) {\n            // Add event\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'add',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n\n            // Remove event\n            _dispatchEvent({\n              sortable: this,\n              name: 'remove',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n\n            // drag from one list and drop into another\n            _dispatchEvent({\n              rootEl: parentEl,\n              name: 'sort',\n              toEl: parentEl,\n              fromEl: rootEl,\n              originalEvent: evt\n            });\n            _dispatchEvent({\n              sortable: this,\n              name: 'sort',\n              toEl: parentEl,\n              originalEvent: evt\n            });\n          }\n          putSortable && putSortable.save();\n        } else {\n          if (newIndex !== oldIndex) {\n            if (newIndex >= 0) {\n              // drag & drop within the same list\n              _dispatchEvent({\n                sortable: this,\n                name: 'update',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n              _dispatchEvent({\n                sortable: this,\n                name: 'sort',\n                toEl: parentEl,\n                originalEvent: evt\n              });\n            }\n          }\n        }\n        if (Sortable.active) {\n          /* jshint eqnull:true */\n          if (newIndex == null || newIndex === -1) {\n            newIndex = oldIndex;\n            newDraggableIndex = oldDraggableIndex;\n          }\n          _dispatchEvent({\n            sortable: this,\n            name: 'end',\n            toEl: parentEl,\n            originalEvent: evt\n          });\n\n          // Save sorting\n          this.save();\n        }\n      }\n    }\n    this._nulling();\n  },\n  _nulling: function _nulling() {\n    pluginEvent('nulling', this);\n    rootEl = dragEl = parentEl = ghostEl = nextEl = cloneEl = lastDownEl = cloneHidden = tapEvt = touchEvt = moved = newIndex = newDraggableIndex = oldIndex = oldDraggableIndex = lastTarget = lastDirection = putSortable = activeGroup = Sortable.dragged = Sortable.ghost = Sortable.clone = Sortable.active = null;\n    savedInputChecked.forEach(function (el) {\n      el.checked = true;\n    });\n    savedInputChecked.length = lastDx = lastDy = 0;\n  },\n  handleEvent: function handleEvent( /**Event*/evt) {\n    switch (evt.type) {\n      case 'drop':\n      case 'dragend':\n        this._onDrop(evt);\n        break;\n      case 'dragenter':\n      case 'dragover':\n        if (dragEl) {\n          this._onDragOver(evt);\n          _globalDragOver(evt);\n        }\n        break;\n      case 'selectstart':\n        evt.preventDefault();\n        break;\n    }\n  },\n  /**\r\n   * Serializes the item into an array of string.\r\n   * @returns {String[]}\r\n   */\n  toArray: function toArray() {\n    var order = [],\n      el,\n      children = this.el.children,\n      i = 0,\n      n = children.length,\n      options = this.options;\n    for (; i < n; i++) {\n      el = children[i];\n      if (closest(el, options.draggable, this.el, false)) {\n        order.push(el.getAttribute(options.dataIdAttr) || _generateId(el));\n      }\n    }\n    return order;\n  },\n  /**\r\n   * Sorts the elements according to the array.\r\n   * @param  {String[]}  order  order of the items\r\n   */\n  sort: function sort(order, useAnimation) {\n    var items = {},\n      rootEl = this.el;\n    this.toArray().forEach(function (id, i) {\n      var el = rootEl.children[i];\n      if (closest(el, this.options.draggable, rootEl, false)) {\n        items[id] = el;\n      }\n    }, this);\n    useAnimation && this.captureAnimationState();\n    order.forEach(function (id) {\n      if (items[id]) {\n        rootEl.removeChild(items[id]);\n        rootEl.appendChild(items[id]);\n      }\n    });\n    useAnimation && this.animateAll();\n  },\n  /**\r\n   * Save the current sorting\r\n   */\n  save: function save() {\n    var store = this.options.store;\n    store && store.set && store.set(this);\n  },\n  /**\r\n   * For each element in the set, get the first element that matches the selector by testing the element itself and traversing up through its ancestors in the DOM tree.\r\n   * @param   {HTMLElement}  el\r\n   * @param   {String}       [selector]  default: `options.draggable`\r\n   * @returns {HTMLElement|null}\r\n   */\n  closest: function closest$1(el, selector) {\n    return closest(el, selector || this.options.draggable, this.el, false);\n  },\n  /**\r\n   * Set/get option\r\n   * @param   {string} name\r\n   * @param   {*}      [value]\r\n   * @returns {*}\r\n   */\n  option: function option(name, value) {\n    var options = this.options;\n    if (value === void 0) {\n      return options[name];\n    } else {\n      var modifiedValue = PluginManager.modifyOption(this, name, value);\n      if (typeof modifiedValue !== 'undefined') {\n        options[name] = modifiedValue;\n      } else {\n        options[name] = value;\n      }\n      if (name === 'group') {\n        _prepareGroup(options);\n      }\n    }\n  },\n  /**\r\n   * Destroy\r\n   */\n  destroy: function destroy() {\n    pluginEvent('destroy', this);\n    var el = this.el;\n    el[expando] = null;\n    off(el, 'mousedown', this._onTapStart);\n    off(el, 'touchstart', this._onTapStart);\n    off(el, 'pointerdown', this._onTapStart);\n    if (this.nativeDraggable) {\n      off(el, 'dragover', this);\n      off(el, 'dragenter', this);\n    }\n    // Remove draggable attributes\n    Array.prototype.forEach.call(el.querySelectorAll('[draggable]'), function (el) {\n      el.removeAttribute('draggable');\n    });\n    this._onDrop();\n    this._disableDelayedDragEvents();\n    sortables.splice(sortables.indexOf(this.el), 1);\n    this.el = el = null;\n  },\n  _hideClone: function _hideClone() {\n    if (!cloneHidden) {\n      pluginEvent('hideClone', this);\n      if (Sortable.eventCanceled) return;\n      css(cloneEl, 'display', 'none');\n      if (this.options.removeCloneOnHide && cloneEl.parentNode) {\n        cloneEl.parentNode.removeChild(cloneEl);\n      }\n      cloneHidden = true;\n    }\n  },\n  _showClone: function _showClone(putSortable) {\n    if (putSortable.lastPutMode !== 'clone') {\n      this._hideClone();\n      return;\n    }\n    if (cloneHidden) {\n      pluginEvent('showClone', this);\n      if (Sortable.eventCanceled) return;\n\n      // show clone at dragEl or original position\n      if (dragEl.parentNode == rootEl && !this.options.group.revertClone) {\n        rootEl.insertBefore(cloneEl, dragEl);\n      } else if (nextEl) {\n        rootEl.insertBefore(cloneEl, nextEl);\n      } else {\n        rootEl.appendChild(cloneEl);\n      }\n      if (this.options.group.revertClone) {\n        this.animate(dragEl, cloneEl);\n      }\n      css(cloneEl, 'display', '');\n      cloneHidden = false;\n    }\n  }\n};\nfunction _globalDragOver( /**Event*/evt) {\n  if (evt.dataTransfer) {\n    evt.dataTransfer.dropEffect = 'move';\n  }\n  evt.cancelable && evt.preventDefault();\n}\nfunction _onMove(fromEl, toEl, dragEl, dragRect, targetEl, targetRect, originalEvent, willInsertAfter) {\n  var evt,\n    sortable = fromEl[expando],\n    onMoveFn = sortable.options.onMove,\n    retVal;\n  // Support for new CustomEvent feature\n  if (window.CustomEvent && !IE11OrLess && !Edge) {\n    evt = new CustomEvent('move', {\n      bubbles: true,\n      cancelable: true\n    });\n  } else {\n    evt = document.createEvent('Event');\n    evt.initEvent('move', true, true);\n  }\n  evt.to = toEl;\n  evt.from = fromEl;\n  evt.dragged = dragEl;\n  evt.draggedRect = dragRect;\n  evt.related = targetEl || toEl;\n  evt.relatedRect = targetRect || getRect(toEl);\n  evt.willInsertAfter = willInsertAfter;\n  evt.originalEvent = originalEvent;\n  fromEl.dispatchEvent(evt);\n  if (onMoveFn) {\n    retVal = onMoveFn.call(sortable, evt, originalEvent);\n  }\n  return retVal;\n}\nfunction _disableDraggable(el) {\n  el.draggable = false;\n}\nfunction _unsilent() {\n  _silent = false;\n}\nfunction _ghostIsFirst(evt, vertical, sortable) {\n  var firstElRect = getRect(getChild(sortable.el, 0, sortable.options, true));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX < childContainingRect.left - spacer || evt.clientY < firstElRect.top && evt.clientX < firstElRect.right : evt.clientY < childContainingRect.top - spacer || evt.clientY < firstElRect.bottom && evt.clientX < firstElRect.left;\n}\nfunction _ghostIsLast(evt, vertical, sortable) {\n  var lastElRect = getRect(lastChild(sortable.el, sortable.options.draggable));\n  var childContainingRect = getChildContainingRectFromElement(sortable.el, sortable.options, ghostEl);\n  var spacer = 10;\n  return vertical ? evt.clientX > childContainingRect.right + spacer || evt.clientY > lastElRect.bottom && evt.clientX > lastElRect.left : evt.clientY > childContainingRect.bottom + spacer || evt.clientX > lastElRect.right && evt.clientY > lastElRect.top;\n}\nfunction _getSwapDirection(evt, target, targetRect, vertical, swapThreshold, invertedSwapThreshold, invertSwap, isLastTarget) {\n  var mouseOnAxis = vertical ? evt.clientY : evt.clientX,\n    targetLength = vertical ? targetRect.height : targetRect.width,\n    targetS1 = vertical ? targetRect.top : targetRect.left,\n    targetS2 = vertical ? targetRect.bottom : targetRect.right,\n    invert = false;\n  if (!invertSwap) {\n    // Never invert or create dragEl shadow when target movemenet causes mouse to move past the end of regular swapThreshold\n    if (isLastTarget && targetMoveDistance < targetLength * swapThreshold) {\n      // multiplied only by swapThreshold because mouse will already be inside target by (1 - threshold) * targetLength / 2\n      // check if past first invert threshold on side opposite of lastDirection\n      if (!pastFirstInvertThresh && (lastDirection === 1 ? mouseOnAxis > targetS1 + targetLength * invertedSwapThreshold / 2 : mouseOnAxis < targetS2 - targetLength * invertedSwapThreshold / 2)) {\n        // past first invert threshold, do not restrict inverted threshold to dragEl shadow\n        pastFirstInvertThresh = true;\n      }\n      if (!pastFirstInvertThresh) {\n        // dragEl shadow (target move distance shadow)\n        if (lastDirection === 1 ? mouseOnAxis < targetS1 + targetMoveDistance // over dragEl shadow\n        : mouseOnAxis > targetS2 - targetMoveDistance) {\n          return -lastDirection;\n        }\n      } else {\n        invert = true;\n      }\n    } else {\n      // Regular\n      if (mouseOnAxis > targetS1 + targetLength * (1 - swapThreshold) / 2 && mouseOnAxis < targetS2 - targetLength * (1 - swapThreshold) / 2) {\n        return _getInsertDirection(target);\n      }\n    }\n  }\n  invert = invert || invertSwap;\n  if (invert) {\n    // Invert of regular\n    if (mouseOnAxis < targetS1 + targetLength * invertedSwapThreshold / 2 || mouseOnAxis > targetS2 - targetLength * invertedSwapThreshold / 2) {\n      return mouseOnAxis > targetS1 + targetLength / 2 ? 1 : -1;\n    }\n  }\n  return 0;\n}\n\n/**\r\n * Gets the direction dragEl must be swapped relative to target in order to make it\r\n * seem that dragEl has been \"inserted\" into that element's position\r\n * @param  {HTMLElement} target       The target whose position dragEl is being inserted at\r\n * @return {Number}                   Direction dragEl must be swapped\r\n */\nfunction _getInsertDirection(target) {\n  if (index(dragEl) < index(target)) {\n    return 1;\n  } else {\n    return -1;\n  }\n}\n\n/**\r\n * Generate id\r\n * @param   {HTMLElement} el\r\n * @returns {String}\r\n * @private\r\n */\nfunction _generateId(el) {\n  var str = el.tagName + el.className + el.src + el.href + el.textContent,\n    i = str.length,\n    sum = 0;\n  while (i--) {\n    sum += str.charCodeAt(i);\n  }\n  return sum.toString(36);\n}\nfunction _saveInputCheckedState(root) {\n  savedInputChecked.length = 0;\n  var inputs = root.getElementsByTagName('input');\n  var idx = inputs.length;\n  while (idx--) {\n    var el = inputs[idx];\n    el.checked && savedInputChecked.push(el);\n  }\n}\nfunction _nextTick(fn) {\n  return setTimeout(fn, 0);\n}\nfunction _cancelNextTick(id) {\n  return clearTimeout(id);\n}\n\n// Fixed #973:\nif (documentExists) {\n  on(document, 'touchmove', function (evt) {\n    if ((Sortable.active || awaitingDragStarted) && evt.cancelable) {\n      evt.preventDefault();\n    }\n  });\n}\n\n// Export utils\nSortable.utils = {\n  on: on,\n  off: off,\n  css: css,\n  find: find,\n  is: function is(el, selector) {\n    return !!closest(el, selector, el, false);\n  },\n  extend: extend,\n  throttle: throttle,\n  closest: closest,\n  toggleClass: toggleClass,\n  clone: clone,\n  index: index,\n  nextTick: _nextTick,\n  cancelNextTick: _cancelNextTick,\n  detectDirection: _detectDirection,\n  getChild: getChild\n};\n\n/**\r\n * Get the Sortable instance of an element\r\n * @param  {HTMLElement} element The element\r\n * @return {Sortable|undefined}         The instance of Sortable\r\n */\nSortable.get = function (element) {\n  return element[expando];\n};\n\n/**\r\n * Mount a plugin to Sortable\r\n * @param  {...SortablePlugin|SortablePlugin[]} plugins       Plugins being mounted\r\n */\nSortable.mount = function () {\n  for (var _len = arguments.length, plugins = new Array(_len), _key = 0; _key < _len; _key++) {\n    plugins[_key] = arguments[_key];\n  }\n  if (plugins[0].constructor === Array) plugins = plugins[0];\n  plugins.forEach(function (plugin) {\n    if (!plugin.prototype || !plugin.prototype.constructor) {\n      throw \"Sortable: Mounted plugin must be a constructor function, not \".concat({}.toString.call(plugin));\n    }\n    if (plugin.utils) Sortable.utils = _objectSpread2(_objectSpread2({}, Sortable.utils), plugin.utils);\n    PluginManager.mount(plugin);\n  });\n};\n\n/**\r\n * Create sortable instance\r\n * @param {HTMLElement}  el\r\n * @param {Object}      [options]\r\n */\nSortable.create = function (el, options) {\n  return new Sortable(el, options);\n};\n\n// Export\nSortable.version = version;\nvar autoScrolls = [],\n  scrollEl,\n  scrollRootEl,\n  scrolling = false,\n  lastAutoScrollX,\n  lastAutoScrollY,\n  touchEvt$1,\n  pointerElemChangedInterval;\nfunction AutoScrollPlugin() {\n  function AutoScroll() {\n    this.defaults = {\n      scroll: true,\n      forceAutoScrollFallback: false,\n      scrollSensitivity: 30,\n      scrollSpeed: 10,\n      bubbleScroll: true\n    };\n\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n  }\n  AutoScroll.prototype = {\n    dragStarted: function dragStarted(_ref) {\n      var originalEvent = _ref.originalEvent;\n      if (this.sortable.nativeDraggable) {\n        on(document, 'dragover', this._handleAutoScroll);\n      } else {\n        if (this.options.supportPointer) {\n          on(document, 'pointermove', this._handleFallbackAutoScroll);\n        } else if (originalEvent.touches) {\n          on(document, 'touchmove', this._handleFallbackAutoScroll);\n        } else {\n          on(document, 'mousemove', this._handleFallbackAutoScroll);\n        }\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref2) {\n      var originalEvent = _ref2.originalEvent;\n      // For when bubbling is canceled and using fallback (fallback 'touchmove' always reached)\n      if (!this.options.dragOverBubble && !originalEvent.rootEl) {\n        this._handleAutoScroll(originalEvent);\n      }\n    },\n    drop: function drop() {\n      if (this.sortable.nativeDraggable) {\n        off(document, 'dragover', this._handleAutoScroll);\n      } else {\n        off(document, 'pointermove', this._handleFallbackAutoScroll);\n        off(document, 'touchmove', this._handleFallbackAutoScroll);\n        off(document, 'mousemove', this._handleFallbackAutoScroll);\n      }\n      clearPointerElemChangedInterval();\n      clearAutoScrolls();\n      cancelThrottle();\n    },\n    nulling: function nulling() {\n      touchEvt$1 = scrollRootEl = scrollEl = scrolling = pointerElemChangedInterval = lastAutoScrollX = lastAutoScrollY = null;\n      autoScrolls.length = 0;\n    },\n    _handleFallbackAutoScroll: function _handleFallbackAutoScroll(evt) {\n      this._handleAutoScroll(evt, true);\n    },\n    _handleAutoScroll: function _handleAutoScroll(evt, fallback) {\n      var _this = this;\n      var x = (evt.touches ? evt.touches[0] : evt).clientX,\n        y = (evt.touches ? evt.touches[0] : evt).clientY,\n        elem = document.elementFromPoint(x, y);\n      touchEvt$1 = evt;\n\n      // IE does not seem to have native autoscroll,\n      // Edge's autoscroll seems too conditional,\n      // MACOS Safari does not have autoscroll,\n      // Firefox and Chrome are good\n      if (fallback || this.options.forceAutoScrollFallback || Edge || IE11OrLess || Safari) {\n        autoScroll(evt, this.options, elem, fallback);\n\n        // Listener for pointer element change\n        var ogElemScroller = getParentAutoScrollElement(elem, true);\n        if (scrolling && (!pointerElemChangedInterval || x !== lastAutoScrollX || y !== lastAutoScrollY)) {\n          pointerElemChangedInterval && clearPointerElemChangedInterval();\n          // Detect for pointer elem change, emulating native DnD behaviour\n          pointerElemChangedInterval = setInterval(function () {\n            var newElem = getParentAutoScrollElement(document.elementFromPoint(x, y), true);\n            if (newElem !== ogElemScroller) {\n              ogElemScroller = newElem;\n              clearAutoScrolls();\n            }\n            autoScroll(evt, _this.options, newElem, fallback);\n          }, 10);\n          lastAutoScrollX = x;\n          lastAutoScrollY = y;\n        }\n      } else {\n        // if DnD is enabled (and browser has good autoscrolling), first autoscroll will already scroll, so get parent autoscroll of first autoscroll\n        if (!this.options.bubbleScroll || getParentAutoScrollElement(elem, true) === getWindowScrollingElement()) {\n          clearAutoScrolls();\n          return;\n        }\n        autoScroll(evt, this.options, getParentAutoScrollElement(elem, false), false);\n      }\n    }\n  };\n  return _extends(AutoScroll, {\n    pluginName: 'scroll',\n    initializeByDefault: true\n  });\n}\nfunction clearAutoScrolls() {\n  autoScrolls.forEach(function (autoScroll) {\n    clearInterval(autoScroll.pid);\n  });\n  autoScrolls = [];\n}\nfunction clearPointerElemChangedInterval() {\n  clearInterval(pointerElemChangedInterval);\n}\nvar autoScroll = throttle(function (evt, options, rootEl, isFallback) {\n  // Bug: https://bugzilla.mozilla.org/show_bug.cgi?id=505521\n  if (!options.scroll) return;\n  var x = (evt.touches ? evt.touches[0] : evt).clientX,\n    y = (evt.touches ? evt.touches[0] : evt).clientY,\n    sens = options.scrollSensitivity,\n    speed = options.scrollSpeed,\n    winScroller = getWindowScrollingElement();\n  var scrollThisInstance = false,\n    scrollCustomFn;\n\n  // New scroll root, set scrollEl\n  if (scrollRootEl !== rootEl) {\n    scrollRootEl = rootEl;\n    clearAutoScrolls();\n    scrollEl = options.scroll;\n    scrollCustomFn = options.scrollFn;\n    if (scrollEl === true) {\n      scrollEl = getParentAutoScrollElement(rootEl, true);\n    }\n  }\n  var layersOut = 0;\n  var currentParent = scrollEl;\n  do {\n    var el = currentParent,\n      rect = getRect(el),\n      top = rect.top,\n      bottom = rect.bottom,\n      left = rect.left,\n      right = rect.right,\n      width = rect.width,\n      height = rect.height,\n      canScrollX = void 0,\n      canScrollY = void 0,\n      scrollWidth = el.scrollWidth,\n      scrollHeight = el.scrollHeight,\n      elCSS = css(el),\n      scrollPosX = el.scrollLeft,\n      scrollPosY = el.scrollTop;\n    if (el === winScroller) {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll' || elCSS.overflowX === 'visible');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll' || elCSS.overflowY === 'visible');\n    } else {\n      canScrollX = width < scrollWidth && (elCSS.overflowX === 'auto' || elCSS.overflowX === 'scroll');\n      canScrollY = height < scrollHeight && (elCSS.overflowY === 'auto' || elCSS.overflowY === 'scroll');\n    }\n    var vx = canScrollX && (Math.abs(right - x) <= sens && scrollPosX + width < scrollWidth) - (Math.abs(left - x) <= sens && !!scrollPosX);\n    var vy = canScrollY && (Math.abs(bottom - y) <= sens && scrollPosY + height < scrollHeight) - (Math.abs(top - y) <= sens && !!scrollPosY);\n    if (!autoScrolls[layersOut]) {\n      for (var i = 0; i <= layersOut; i++) {\n        if (!autoScrolls[i]) {\n          autoScrolls[i] = {};\n        }\n      }\n    }\n    if (autoScrolls[layersOut].vx != vx || autoScrolls[layersOut].vy != vy || autoScrolls[layersOut].el !== el) {\n      autoScrolls[layersOut].el = el;\n      autoScrolls[layersOut].vx = vx;\n      autoScrolls[layersOut].vy = vy;\n      clearInterval(autoScrolls[layersOut].pid);\n      if (vx != 0 || vy != 0) {\n        scrollThisInstance = true;\n        /* jshint loopfunc:true */\n        autoScrolls[layersOut].pid = setInterval(function () {\n          // emulate drag over during autoscroll (fallback), emulating native DnD behaviour\n          if (isFallback && this.layer === 0) {\n            Sortable.active._onTouchMove(touchEvt$1); // To move ghost if it is positioned absolutely\n          }\n          var scrollOffsetY = autoScrolls[this.layer].vy ? autoScrolls[this.layer].vy * speed : 0;\n          var scrollOffsetX = autoScrolls[this.layer].vx ? autoScrolls[this.layer].vx * speed : 0;\n          if (typeof scrollCustomFn === 'function') {\n            if (scrollCustomFn.call(Sortable.dragged.parentNode[expando], scrollOffsetX, scrollOffsetY, evt, touchEvt$1, autoScrolls[this.layer].el) !== 'continue') {\n              return;\n            }\n          }\n          scrollBy(autoScrolls[this.layer].el, scrollOffsetX, scrollOffsetY);\n        }.bind({\n          layer: layersOut\n        }), 24);\n      }\n    }\n    layersOut++;\n  } while (options.bubbleScroll && currentParent !== winScroller && (currentParent = getParentAutoScrollElement(currentParent, false)));\n  scrolling = scrollThisInstance; // in case another function catches scrolling as false in between when it is not\n}, 30);\nvar drop = function drop(_ref) {\n  var originalEvent = _ref.originalEvent,\n    putSortable = _ref.putSortable,\n    dragEl = _ref.dragEl,\n    activeSortable = _ref.activeSortable,\n    dispatchSortableEvent = _ref.dispatchSortableEvent,\n    hideGhostForTarget = _ref.hideGhostForTarget,\n    unhideGhostForTarget = _ref.unhideGhostForTarget;\n  if (!originalEvent) return;\n  var toSortable = putSortable || activeSortable;\n  hideGhostForTarget();\n  var touch = originalEvent.changedTouches && originalEvent.changedTouches.length ? originalEvent.changedTouches[0] : originalEvent;\n  var target = document.elementFromPoint(touch.clientX, touch.clientY);\n  unhideGhostForTarget();\n  if (toSortable && !toSortable.el.contains(target)) {\n    dispatchSortableEvent('spill');\n    this.onSpill({\n      dragEl: dragEl,\n      putSortable: putSortable\n    });\n  }\n};\nfunction Revert() {}\nRevert.prototype = {\n  startIndex: null,\n  dragStart: function dragStart(_ref2) {\n    var oldDraggableIndex = _ref2.oldDraggableIndex;\n    this.startIndex = oldDraggableIndex;\n  },\n  onSpill: function onSpill(_ref3) {\n    var dragEl = _ref3.dragEl,\n      putSortable = _ref3.putSortable;\n    this.sortable.captureAnimationState();\n    if (putSortable) {\n      putSortable.captureAnimationState();\n    }\n    var nextSibling = getChild(this.sortable.el, this.startIndex, this.options);\n    if (nextSibling) {\n      this.sortable.el.insertBefore(dragEl, nextSibling);\n    } else {\n      this.sortable.el.appendChild(dragEl);\n    }\n    this.sortable.animateAll();\n    if (putSortable) {\n      putSortable.animateAll();\n    }\n  },\n  drop: drop\n};\n_extends(Revert, {\n  pluginName: 'revertOnSpill'\n});\nfunction Remove() {}\nRemove.prototype = {\n  onSpill: function onSpill(_ref4) {\n    var dragEl = _ref4.dragEl,\n      putSortable = _ref4.putSortable;\n    var parentSortable = putSortable || this.sortable;\n    parentSortable.captureAnimationState();\n    dragEl.parentNode && dragEl.parentNode.removeChild(dragEl);\n    parentSortable.animateAll();\n  },\n  drop: drop\n};\n_extends(Remove, {\n  pluginName: 'removeOnSpill'\n});\nvar lastSwapEl;\nfunction SwapPlugin() {\n  function Swap() {\n    this.defaults = {\n      swapClass: 'sortable-swap-highlight'\n    };\n  }\n  Swap.prototype = {\n    dragStart: function dragStart(_ref) {\n      var dragEl = _ref.dragEl;\n      lastSwapEl = dragEl;\n    },\n    dragOverValid: function dragOverValid(_ref2) {\n      var completed = _ref2.completed,\n        target = _ref2.target,\n        onMove = _ref2.onMove,\n        activeSortable = _ref2.activeSortable,\n        changed = _ref2.changed,\n        cancel = _ref2.cancel;\n      if (!activeSortable.options.swap) return;\n      var el = this.sortable.el,\n        options = this.options;\n      if (target && target !== el) {\n        var prevSwapEl = lastSwapEl;\n        if (onMove(target) !== false) {\n          toggleClass(target, options.swapClass, true);\n          lastSwapEl = target;\n        } else {\n          lastSwapEl = null;\n        }\n        if (prevSwapEl && prevSwapEl !== lastSwapEl) {\n          toggleClass(prevSwapEl, options.swapClass, false);\n        }\n      }\n      changed();\n      completed(true);\n      cancel();\n    },\n    drop: function drop(_ref3) {\n      var activeSortable = _ref3.activeSortable,\n        putSortable = _ref3.putSortable,\n        dragEl = _ref3.dragEl;\n      var toSortable = putSortable || this.sortable;\n      var options = this.options;\n      lastSwapEl && toggleClass(lastSwapEl, options.swapClass, false);\n      if (lastSwapEl && (options.swap || putSortable && putSortable.options.swap)) {\n        if (dragEl !== lastSwapEl) {\n          toSortable.captureAnimationState();\n          if (toSortable !== activeSortable) activeSortable.captureAnimationState();\n          swapNodes(dragEl, lastSwapEl);\n          toSortable.animateAll();\n          if (toSortable !== activeSortable) activeSortable.animateAll();\n        }\n      }\n    },\n    nulling: function nulling() {\n      lastSwapEl = null;\n    }\n  };\n  return _extends(Swap, {\n    pluginName: 'swap',\n    eventProperties: function eventProperties() {\n      return {\n        swapItem: lastSwapEl\n      };\n    }\n  });\n}\nfunction swapNodes(n1, n2) {\n  var p1 = n1.parentNode,\n    p2 = n2.parentNode,\n    i1,\n    i2;\n  if (!p1 || !p2 || p1.isEqualNode(n2) || p2.isEqualNode(n1)) return;\n  i1 = index(n1);\n  i2 = index(n2);\n  if (p1.isEqualNode(p2) && i1 < i2) {\n    i2++;\n  }\n  p1.insertBefore(n2, p1.children[i1]);\n  p2.insertBefore(n1, p2.children[i2]);\n}\nvar multiDragElements = [],\n  multiDragClones = [],\n  lastMultiDragSelect,\n  // for selection with modifier key down (SHIFT)\n  multiDragSortable,\n  initialFolding = false,\n  // Initial multi-drag fold when drag started\n  folding = false,\n  // Folding any other time\n  dragStarted = false,\n  dragEl$1,\n  clonesFromRect,\n  clonesHidden;\nfunction MultiDragPlugin() {\n  function MultiDrag(sortable) {\n    // Bind all private methods\n    for (var fn in this) {\n      if (fn.charAt(0) === '_' && typeof this[fn] === 'function') {\n        this[fn] = this[fn].bind(this);\n      }\n    }\n    if (!sortable.options.avoidImplicitDeselect) {\n      if (sortable.options.supportPointer) {\n        on(document, 'pointerup', this._deselectMultiDrag);\n      } else {\n        on(document, 'mouseup', this._deselectMultiDrag);\n        on(document, 'touchend', this._deselectMultiDrag);\n      }\n    }\n    on(document, 'keydown', this._checkKeyDown);\n    on(document, 'keyup', this._checkKeyUp);\n    this.defaults = {\n      selectedClass: 'sortable-selected',\n      multiDragKey: null,\n      avoidImplicitDeselect: false,\n      setData: function setData(dataTransfer, dragEl) {\n        var data = '';\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          multiDragElements.forEach(function (multiDragElement, i) {\n            data += (!i ? '' : ', ') + multiDragElement.textContent;\n          });\n        } else {\n          data = dragEl.textContent;\n        }\n        dataTransfer.setData('Text', data);\n      }\n    };\n  }\n  MultiDrag.prototype = {\n    multiDragKeyDown: false,\n    isMultiDrag: false,\n    delayStartGlobal: function delayStartGlobal(_ref) {\n      var dragged = _ref.dragEl;\n      dragEl$1 = dragged;\n    },\n    delayEnded: function delayEnded() {\n      this.isMultiDrag = ~multiDragElements.indexOf(dragEl$1);\n    },\n    setupClone: function setupClone(_ref2) {\n      var sortable = _ref2.sortable,\n        cancel = _ref2.cancel;\n      if (!this.isMultiDrag) return;\n      for (var i = 0; i < multiDragElements.length; i++) {\n        multiDragClones.push(clone(multiDragElements[i]));\n        multiDragClones[i].sortableIndex = multiDragElements[i].sortableIndex;\n        multiDragClones[i].draggable = false;\n        multiDragClones[i].style['will-change'] = '';\n        toggleClass(multiDragClones[i], this.options.selectedClass, false);\n        multiDragElements[i] === dragEl$1 && toggleClass(multiDragClones[i], this.options.chosenClass, false);\n      }\n      sortable._hideClone();\n      cancel();\n    },\n    clone: function clone(_ref3) {\n      var sortable = _ref3.sortable,\n        rootEl = _ref3.rootEl,\n        dispatchSortableEvent = _ref3.dispatchSortableEvent,\n        cancel = _ref3.cancel;\n      if (!this.isMultiDrag) return;\n      if (!this.options.removeCloneOnHide) {\n        if (multiDragElements.length && multiDragSortable === sortable) {\n          insertMultiDragClones(true, rootEl);\n          dispatchSortableEvent('clone');\n          cancel();\n        }\n      }\n    },\n    showClone: function showClone(_ref4) {\n      var cloneNowShown = _ref4.cloneNowShown,\n        rootEl = _ref4.rootEl,\n        cancel = _ref4.cancel;\n      if (!this.isMultiDrag) return;\n      insertMultiDragClones(false, rootEl);\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', '');\n      });\n      cloneNowShown();\n      clonesHidden = false;\n      cancel();\n    },\n    hideClone: function hideClone(_ref5) {\n      var _this = this;\n      var sortable = _ref5.sortable,\n        cloneNowHidden = _ref5.cloneNowHidden,\n        cancel = _ref5.cancel;\n      if (!this.isMultiDrag) return;\n      multiDragClones.forEach(function (clone) {\n        css(clone, 'display', 'none');\n        if (_this.options.removeCloneOnHide && clone.parentNode) {\n          clone.parentNode.removeChild(clone);\n        }\n      });\n      cloneNowHidden();\n      clonesHidden = true;\n      cancel();\n    },\n    dragStartGlobal: function dragStartGlobal(_ref6) {\n      var sortable = _ref6.sortable;\n      if (!this.isMultiDrag && multiDragSortable) {\n        multiDragSortable.multiDrag._deselectMultiDrag();\n      }\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.sortableIndex = index(multiDragElement);\n      });\n\n      // Sort multi-drag elements\n      multiDragElements = multiDragElements.sort(function (a, b) {\n        return a.sortableIndex - b.sortableIndex;\n      });\n      dragStarted = true;\n    },\n    dragStarted: function dragStarted(_ref7) {\n      var _this2 = this;\n      var sortable = _ref7.sortable;\n      if (!this.isMultiDrag) return;\n      if (this.options.sort) {\n        // Capture rects,\n        // hide multi drag elements (by positioning them absolute),\n        // set multi drag elements rects to dragRect,\n        // show multi drag elements,\n        // animate to rects,\n        // unset rects & remove from DOM\n\n        sortable.captureAnimationState();\n        if (this.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            css(multiDragElement, 'position', 'absolute');\n          });\n          var dragRect = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRect);\n          });\n          folding = true;\n          initialFolding = true;\n        }\n      }\n      sortable.animateAll(function () {\n        folding = false;\n        initialFolding = false;\n        if (_this2.options.animation) {\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n        }\n\n        // Remove all auxiliary multidrag items from el, if sorting enabled\n        if (_this2.options.sort) {\n          removeMultiDragElements();\n        }\n      });\n    },\n    dragOver: function dragOver(_ref8) {\n      var target = _ref8.target,\n        completed = _ref8.completed,\n        cancel = _ref8.cancel;\n      if (folding && ~multiDragElements.indexOf(target)) {\n        completed(false);\n        cancel();\n      }\n    },\n    revert: function revert(_ref9) {\n      var fromSortable = _ref9.fromSortable,\n        rootEl = _ref9.rootEl,\n        sortable = _ref9.sortable,\n        dragRect = _ref9.dragRect;\n      if (multiDragElements.length > 1) {\n        // Setup unfold animation\n        multiDragElements.forEach(function (multiDragElement) {\n          sortable.addAnimationState({\n            target: multiDragElement,\n            rect: folding ? getRect(multiDragElement) : dragRect\n          });\n          unsetRect(multiDragElement);\n          multiDragElement.fromRect = dragRect;\n          fromSortable.removeAnimationState(multiDragElement);\n        });\n        folding = false;\n        insertMultiDragElements(!this.options.removeCloneOnHide, rootEl);\n      }\n    },\n    dragOverCompleted: function dragOverCompleted(_ref10) {\n      var sortable = _ref10.sortable,\n        isOwner = _ref10.isOwner,\n        insertion = _ref10.insertion,\n        activeSortable = _ref10.activeSortable,\n        parentEl = _ref10.parentEl,\n        putSortable = _ref10.putSortable;\n      var options = this.options;\n      if (insertion) {\n        // Clones must be hidden before folding animation to capture dragRectAbsolute properly\n        if (isOwner) {\n          activeSortable._hideClone();\n        }\n        initialFolding = false;\n        // If leaving sort:false root, or already folding - Fold to new location\n        if (options.animation && multiDragElements.length > 1 && (folding || !isOwner && !activeSortable.options.sort && !putSortable)) {\n          // Fold: Set all multi drag elements's rects to dragEl's rect when multi-drag elements are invisible\n          var dragRectAbsolute = getRect(dragEl$1, false, true, true);\n          multiDragElements.forEach(function (multiDragElement) {\n            if (multiDragElement === dragEl$1) return;\n            setRect(multiDragElement, dragRectAbsolute);\n\n            // Move element(s) to end of parentEl so that it does not interfere with multi-drag clones insertion if they are inserted\n            // while folding, and so that we can capture them again because old sortable will no longer be fromSortable\n            parentEl.appendChild(multiDragElement);\n          });\n          folding = true;\n        }\n\n        // Clones must be shown (and check to remove multi drags) after folding when interfering multiDragElements are moved out\n        if (!isOwner) {\n          // Only remove if not folding (folding will remove them anyways)\n          if (!folding) {\n            removeMultiDragElements();\n          }\n          if (multiDragElements.length > 1) {\n            var clonesHiddenBefore = clonesHidden;\n            activeSortable._showClone(sortable);\n\n            // Unfold animation for clones if showing from hidden\n            if (activeSortable.options.animation && !clonesHidden && clonesHiddenBefore) {\n              multiDragClones.forEach(function (clone) {\n                activeSortable.addAnimationState({\n                  target: clone,\n                  rect: clonesFromRect\n                });\n                clone.fromRect = clonesFromRect;\n                clone.thisAnimationDuration = null;\n              });\n            }\n          } else {\n            activeSortable._showClone(sortable);\n          }\n        }\n      }\n    },\n    dragOverAnimationCapture: function dragOverAnimationCapture(_ref11) {\n      var dragRect = _ref11.dragRect,\n        isOwner = _ref11.isOwner,\n        activeSortable = _ref11.activeSortable;\n      multiDragElements.forEach(function (multiDragElement) {\n        multiDragElement.thisAnimationDuration = null;\n      });\n      if (activeSortable.options.animation && !isOwner && activeSortable.multiDrag.isMultiDrag) {\n        clonesFromRect = _extends({}, dragRect);\n        var dragMatrix = matrix(dragEl$1, true);\n        clonesFromRect.top -= dragMatrix.f;\n        clonesFromRect.left -= dragMatrix.e;\n      }\n    },\n    dragOverAnimationComplete: function dragOverAnimationComplete() {\n      if (folding) {\n        folding = false;\n        removeMultiDragElements();\n      }\n    },\n    drop: function drop(_ref12) {\n      var evt = _ref12.originalEvent,\n        rootEl = _ref12.rootEl,\n        parentEl = _ref12.parentEl,\n        sortable = _ref12.sortable,\n        dispatchSortableEvent = _ref12.dispatchSortableEvent,\n        oldIndex = _ref12.oldIndex,\n        putSortable = _ref12.putSortable;\n      var toSortable = putSortable || this.sortable;\n      if (!evt) return;\n      var options = this.options,\n        children = parentEl.children;\n\n      // Multi-drag selection\n      if (!dragStarted) {\n        if (options.multiDragKey && !this.multiDragKeyDown) {\n          this._deselectMultiDrag();\n        }\n        toggleClass(dragEl$1, options.selectedClass, !~multiDragElements.indexOf(dragEl$1));\n        if (!~multiDragElements.indexOf(dragEl$1)) {\n          multiDragElements.push(dragEl$1);\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'select',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n\n          // Modifier activated, select from last to dragEl\n          if (evt.shiftKey && lastMultiDragSelect && sortable.el.contains(lastMultiDragSelect)) {\n            var lastIndex = index(lastMultiDragSelect),\n              currentIndex = index(dragEl$1);\n            if (~lastIndex && ~currentIndex && lastIndex !== currentIndex) {\n              // Must include lastMultiDragSelect (select it), in case modified selection from no selection\n              // (but previous selection existed)\n              var n, i;\n              if (currentIndex > lastIndex) {\n                i = lastIndex;\n                n = currentIndex;\n              } else {\n                i = currentIndex;\n                n = lastIndex + 1;\n              }\n              for (; i < n; i++) {\n                if (~multiDragElements.indexOf(children[i])) continue;\n                toggleClass(children[i], options.selectedClass, true);\n                multiDragElements.push(children[i]);\n                dispatchEvent({\n                  sortable: sortable,\n                  rootEl: rootEl,\n                  name: 'select',\n                  targetEl: children[i],\n                  originalEvent: evt\n                });\n              }\n            }\n          } else {\n            lastMultiDragSelect = dragEl$1;\n          }\n          multiDragSortable = toSortable;\n        } else {\n          multiDragElements.splice(multiDragElements.indexOf(dragEl$1), 1);\n          lastMultiDragSelect = null;\n          dispatchEvent({\n            sortable: sortable,\n            rootEl: rootEl,\n            name: 'deselect',\n            targetEl: dragEl$1,\n            originalEvent: evt\n          });\n        }\n      }\n\n      // Multi-drag drop\n      if (dragStarted && this.isMultiDrag) {\n        folding = false;\n        // Do not \"unfold\" after around dragEl if reverted\n        if ((parentEl[expando].options.sort || parentEl !== rootEl) && multiDragElements.length > 1) {\n          var dragRect = getRect(dragEl$1),\n            multiDragIndex = index(dragEl$1, ':not(.' + this.options.selectedClass + ')');\n          if (!initialFolding && options.animation) dragEl$1.thisAnimationDuration = null;\n          toSortable.captureAnimationState();\n          if (!initialFolding) {\n            if (options.animation) {\n              dragEl$1.fromRect = dragRect;\n              multiDragElements.forEach(function (multiDragElement) {\n                multiDragElement.thisAnimationDuration = null;\n                if (multiDragElement !== dragEl$1) {\n                  var rect = folding ? getRect(multiDragElement) : dragRect;\n                  multiDragElement.fromRect = rect;\n\n                  // Prepare unfold animation\n                  toSortable.addAnimationState({\n                    target: multiDragElement,\n                    rect: rect\n                  });\n                }\n              });\n            }\n\n            // Multi drag elements are not necessarily removed from the DOM on drop, so to reinsert\n            // properly they must all be removed\n            removeMultiDragElements();\n            multiDragElements.forEach(function (multiDragElement) {\n              if (children[multiDragIndex]) {\n                parentEl.insertBefore(multiDragElement, children[multiDragIndex]);\n              } else {\n                parentEl.appendChild(multiDragElement);\n              }\n              multiDragIndex++;\n            });\n\n            // If initial folding is done, the elements may have changed position because they are now\n            // unfolding around dragEl, even though dragEl may not have his index changed, so update event\n            // must be fired here as Sortable will not.\n            if (oldIndex === index(dragEl$1)) {\n              var update = false;\n              multiDragElements.forEach(function (multiDragElement) {\n                if (multiDragElement.sortableIndex !== index(multiDragElement)) {\n                  update = true;\n                  return;\n                }\n              });\n              if (update) {\n                dispatchSortableEvent('update');\n                dispatchSortableEvent('sort');\n              }\n            }\n          }\n\n          // Must be done after capturing individual rects (scroll bar)\n          multiDragElements.forEach(function (multiDragElement) {\n            unsetRect(multiDragElement);\n          });\n          toSortable.animateAll();\n        }\n        multiDragSortable = toSortable;\n      }\n\n      // Remove clones if necessary\n      if (rootEl === parentEl || putSortable && putSortable.lastPutMode !== 'clone') {\n        multiDragClones.forEach(function (clone) {\n          clone.parentNode && clone.parentNode.removeChild(clone);\n        });\n      }\n    },\n    nullingGlobal: function nullingGlobal() {\n      this.isMultiDrag = dragStarted = false;\n      multiDragClones.length = 0;\n    },\n    destroyGlobal: function destroyGlobal() {\n      this._deselectMultiDrag();\n      off(document, 'pointerup', this._deselectMultiDrag);\n      off(document, 'mouseup', this._deselectMultiDrag);\n      off(document, 'touchend', this._deselectMultiDrag);\n      off(document, 'keydown', this._checkKeyDown);\n      off(document, 'keyup', this._checkKeyUp);\n    },\n    _deselectMultiDrag: function _deselectMultiDrag(evt) {\n      if (typeof dragStarted !== \"undefined\" && dragStarted) return;\n\n      // Only deselect if selection is in this sortable\n      if (multiDragSortable !== this.sortable) return;\n\n      // Only deselect if target is not item in this sortable\n      if (evt && closest(evt.target, this.options.draggable, this.sortable.el, false)) return;\n\n      // Only deselect if left click\n      if (evt && evt.button !== 0) return;\n      while (multiDragElements.length) {\n        var el = multiDragElements[0];\n        toggleClass(el, this.options.selectedClass, false);\n        multiDragElements.shift();\n        dispatchEvent({\n          sortable: this.sortable,\n          rootEl: this.sortable.el,\n          name: 'deselect',\n          targetEl: el,\n          originalEvent: evt\n        });\n      }\n    },\n    _checkKeyDown: function _checkKeyDown(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = true;\n      }\n    },\n    _checkKeyUp: function _checkKeyUp(evt) {\n      if (evt.key === this.options.multiDragKey) {\n        this.multiDragKeyDown = false;\n      }\n    }\n  };\n  return _extends(MultiDrag, {\n    // Static methods & properties\n    pluginName: 'multiDrag',\n    utils: {\n      /**\r\n       * Selects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be selected\r\n       */\n      select: function select(el) {\n        var sortable = el.parentNode[expando];\n        if (!sortable || !sortable.options.multiDrag || ~multiDragElements.indexOf(el)) return;\n        if (multiDragSortable && multiDragSortable !== sortable) {\n          multiDragSortable.multiDrag._deselectMultiDrag();\n          multiDragSortable = sortable;\n        }\n        toggleClass(el, sortable.options.selectedClass, true);\n        multiDragElements.push(el);\n      },\n      /**\r\n       * Deselects the provided multi-drag item\r\n       * @param  {HTMLElement} el    The element to be deselected\r\n       */\n      deselect: function deselect(el) {\n        var sortable = el.parentNode[expando],\n          index = multiDragElements.indexOf(el);\n        if (!sortable || !sortable.options.multiDrag || !~index) return;\n        toggleClass(el, sortable.options.selectedClass, false);\n        multiDragElements.splice(index, 1);\n      }\n    },\n    eventProperties: function eventProperties() {\n      var _this3 = this;\n      var oldIndicies = [],\n        newIndicies = [];\n      multiDragElements.forEach(function (multiDragElement) {\n        oldIndicies.push({\n          multiDragElement: multiDragElement,\n          index: multiDragElement.sortableIndex\n        });\n\n        // multiDragElements will already be sorted if folding\n        var newIndex;\n        if (folding && multiDragElement !== dragEl$1) {\n          newIndex = -1;\n        } else if (folding) {\n          newIndex = index(multiDragElement, ':not(.' + _this3.options.selectedClass + ')');\n        } else {\n          newIndex = index(multiDragElement);\n        }\n        newIndicies.push({\n          multiDragElement: multiDragElement,\n          index: newIndex\n        });\n      });\n      return {\n        items: _toConsumableArray(multiDragElements),\n        clones: [].concat(multiDragClones),\n        oldIndicies: oldIndicies,\n        newIndicies: newIndicies\n      };\n    },\n    optionListeners: {\n      multiDragKey: function multiDragKey(key) {\n        key = key.toLowerCase();\n        if (key === 'ctrl') {\n          key = 'Control';\n        } else if (key.length > 1) {\n          key = key.charAt(0).toUpperCase() + key.substr(1);\n        }\n        return key;\n      }\n    }\n  });\n}\nfunction insertMultiDragElements(clonesInserted, rootEl) {\n  multiDragElements.forEach(function (multiDragElement, i) {\n    var target = rootEl.children[multiDragElement.sortableIndex + (clonesInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(multiDragElement, target);\n    } else {\n      rootEl.appendChild(multiDragElement);\n    }\n  });\n}\n\n/**\r\n * Insert multi-drag clones\r\n * @param  {[Boolean]} elementsInserted  Whether the multi-drag elements are inserted\r\n * @param  {HTMLElement} rootEl\r\n */\nfunction insertMultiDragClones(elementsInserted, rootEl) {\n  multiDragClones.forEach(function (clone, i) {\n    var target = rootEl.children[clone.sortableIndex + (elementsInserted ? Number(i) : 0)];\n    if (target) {\n      rootEl.insertBefore(clone, target);\n    } else {\n      rootEl.appendChild(clone);\n    }\n  });\n}\nfunction removeMultiDragElements() {\n  multiDragElements.forEach(function (multiDragElement) {\n    if (multiDragElement === dragEl$1) return;\n    multiDragElement.parentNode && multiDragElement.parentNode.removeChild(multiDragElement);\n  });\n}\nSortable.mount(new AutoScrollPlugin());\nSortable.mount(Remove, Revert);\nexport default Sortable;\nexport { MultiDragPlugin as MultiDrag, Sortable, SwapPlugin as Swap };","/*\nStimulus Webpack Helpers 1.0.0\nCopyright  2021 Basecamp, LLC\n */\nfunction definitionsFromContext(context) {\n  return context.keys().map(key => definitionForModuleWithContextAndKey(context, key)).filter(value => value);\n}\nfunction definitionForModuleWithContextAndKey(context, key) {\n  const identifier = identifierForContextKey(key);\n  if (identifier) {\n    return definitionForModuleAndIdentifier(context(key), identifier);\n  }\n}\nfunction definitionForModuleAndIdentifier(module, identifier) {\n  const controllerConstructor = module.default;\n  if (typeof controllerConstructor == \"function\") {\n    return {\n      identifier,\n      controllerConstructor\n    };\n  }\n}\nfunction identifierForContextKey(key) {\n  const logicalName = (key.match(/^(?:\\.\\/)?(.+)(?:[_-]controller\\..+?)$/) || [])[1];\n  if (logicalName) {\n    return logicalName.replace(/_/g, \"-\").replace(/\\//g, \"--\");\n  }\n}\nexport { definitionForModuleAndIdentifier, definitionForModuleWithContextAndKey, definitionsFromContext, identifierForContextKey };","import Sortable from \"sortablejs\";\n\nexport default class extends Controller {\n  connect() {\n    const el = this.element;\n    if (el) {\n      Sortable.create(el, {\n        animation: 150,\n        onEnd: (event) => {\n          const rows = Array.from(el.querySelectorAll('tr'));\n          const order = rows.map((row, index) => ({\n            id: row.dataset.id,\n            position: index + 1,\n          }));\n\n          fetch('/employees/update_order', {\n            method: 'POST',\n            headers: {\n              'Content-Type': 'application/json',\n              'X-CSRF-Token': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content'),\n            },\n            body: JSON.stringify({ order }),\n          })\n          .then(response => response.ok ? console.log('Order updated successfully') : console.log('Failed to update order'))\n          .catch(error => console.error('Error:', error));\n        },\n      });\n    }\n  }\n}\n","var map = {\n\t\"./application.js\": 6,\n\t\"./hello_controller.js\": 7,\n\t\"./index.js\": 8,\n\t\"./sortable_controller.js\": 3\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 4;","// app/javascript/packs/application.js\nimport { Application } from \"@hotwired/stimulus\"\nimport { definitionsFromContext } from \"@hotwired/stimulus-webpack-helpers\"\nimport Sortable from \"sortablejs\"\n\nwindow.Stimulus = Application.start()\nconst context = require.context(\"../controllers\", true, /\\.js$/)\nStimulus.load(definitionsFromContext(context))\n\ndocument.addEventListener('turbo:load', () => {\n  const el = document.getElementById('sortable-table-body');\n  if (el) {\n    Sortable.create(el, {\n      animation: 150,\n      onEnd: (event) => {\n        const rows = Array.from(el.querySelectorAll('tr'));\n        const order = rows.map((row, index) => ({\n          id: row.dataset.id,\n          position: index + 1,\n        }));\n\n        fetch('/employees/update_order', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n            'X-CSRF-Token': document.querySelector('meta[name=\"csrf-token\"]').getAttribute('content'),\n          },\n          body: JSON.stringify({ order }),\n        })\n        .then(response => response.ok ? console.log('Order updated successfully') : console.log('Failed to update order'))\n        .catch(error => console.error('Error:', error));\n      },\n    });\n  }\n});\n","import { Application } from \"@hotwired/stimulus\"\nimport Sortable from \"sortablejs\"\n\nconst application = Application.start()\n\n// Configure Stimulus development experience\napplication.debug = false\nwindow.Stimulus   = application\n\nexport { application }\n","import { Controller } from \"@hotwired/stimulus\"\n\nexport default class extends Controller {\n  connect() {\n    this.element.textContent = \"Hello World!\"\n  }\n}\n","import { Application } from \"@hotwired/stimulus\"\nimport { definitionsFromContext } from \"@hotwired/stimulus-webpack-helpers\"\nimport SortableController from \"./sortable_controller\"\n\nconst application = Application.start()\nconst context = require.context(\"controllers\", true, /\\.js$/)\napplication.load(definitionsFromContext(context))\n\napplication.register(\"sortable\", SortableController)"],"sourceRoot":""}